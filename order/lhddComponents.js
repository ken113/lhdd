!function(e){function t(s){if(a[s])return a[s].exports;var r=a[s]={exports:{},id:s,loaded:!1};return e[s].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){"use strict";a(1)},function(e,t,a){(function(t){e.exports=t.Components=a(2)}).call(t,function(){return this}())},function(e,t,a){"use strict";e.exports={Orders:a(3),UserInfo:a(47)}},function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var r=a(4),i=s(r),n=a(23),l=s(n),o=a(25),p=s(o),d=a(26),u=(s(d),a(27)),c=s(u),m=a(31),h=s(m),f=a(32),v=s(f),g=a(33),b=s(g),y=a(34),E=s(y),V=a(35),N=s(V),k=a(36),S=s(k),C=a(37),I=s(C),w=a(38),O=s(w),D=a(39),T=s(D),j=a(40),M=s(j),x=a(41),R=s(x),A=a(42),U=s(A),F=a(46),H=(s(F),""),P=function(){var e,t={};return t.getALL=function(){return e},t.setALL=function(t){e=t},t}(),_={DatePicker:c.default,PersonPicker:h.default,FlightNO:R.default,Hotel_area_name_tel:v.default,Date_setoutdate_returndate:b.default,Flight_takeofftime_arrivaltime:E.default,Flight_takeofftime_pickuptime:N.default,Hotelname:I.default,BusRoute:S.default,SelectMenu:T.default,TEXTinput:O.default,TimePicker:M.default,Hotel_area_name_tel_address:v.default},B=p.default.createClass({displayName:"SubOrder",getInitialState:function(){var e=this.props.subOrder,t=e.ServiceItemHistorys.AdultNum,a=e.ServiceItemHistorys.ChildNum,s=e.ServiceItemHistorys.INFNum,r=e.ServiceItemHistorys.RoomNum,i=e.ServiceItemHistorys.RightNum,n=e.state,l="",o={},p=JSON.parse(this.props.subOrder.ServiceItemHistorys.Elements).elementList,d=new Array;for(var u in p)d.push({orderIndex:p[u].orderIndex,cID:u});return d.sort(function(e,t){return parseInt(e.orderIndex)<parseInt(t.orderIndex)?-1:1}),{AdultNum:t,ChildNum:a,INFNum:s,RightNum:i,RoomNum:r,ExtraServiceHistorys:e.ServiceItemHistorys.ExtraServiceHistorys,state:n,copyStr:l,copyObj:o,sortInfo:d,xc:p}},rendersButtons:function(e,t,a){var s=(0,l.default)(t.ServiceItemHistorys.ExtraServiceHistorys),r={AdultNum:t.ServiceItemHistorys.AdultNum,ChildNum:t.ServiceItemHistorys.ChildNum,INFNum:t.ServiceItemHistorys.INFNum},i=t.ServiceItemHistorys.ServiceTypeID;if(4==i&&(r.RoomNum=t.ServiceItemHistorys.RoomNum,r.RightNum=t.ServiceItemHistorys.RightNum),r=(0,l.default)(r),"editable"==this.props.state)var n="",o="revisePersonNum",d="reviseExtras";else var n="disabled",o="",d="";var u=[];if(e.copyToClipboard){var c=p.default.createElement(U.default,{key:"CopyToClipboardWrapper",text:this.state.copyStr,onCopy:this.onCopy},p.default.createElement("a",{ref:"copyToClipboard",key:"buttonCopyToClipboard",id:"copyToClipboard",className:"btn btn-sm btn-default button70",style:{marginRight:"5px"},role:"button"},"对单利器"));u.push(c)}if(e.check){var c="";c=1==this.state.state?p.default.createElement("a",{href:"javascript:",key:"buttonCheck",ref:"tocheck",id:"tocheck","data-orderid":t.OrderID,style:{marginRight:"5px"},className:"status-green  btn btn-default btn-sm button70","data-next-code":"0"},"核对"):p.default.createElement("a",{href:"javascript:",key:"buttonCheck",id:"checked","data-orderid":t.OrderID,style:{marginRight:"5px"},className:" disabled   btn btn-default btn-sm button70","data-next-code":"0"},"核对"),u.push(c)}return e.toEdit&&u.push(p.default.createElement("a",{"data-state":t.state,key:"buttonEdit",target:"_blank",href:"/Orders/Edit/"+t.OrderID,className:"btn btn-sm btn-default button70"},"修改")),e.extraEdit&&u.push(p.default.createElement("a",{ref:"reviseExtras",role:"button",key:"buttonReviseExtras",disabled:n,"data-supplierid":t.ServiceItemHistorys.SupplierID,"data-serviceitemid":t.ServiceItemHistorys.ServiceItemID,id:d,"data-toggle":"modal","data-extras":s,href:"#extrasModal",style:{marginRight:"5px"},className:"btn btn-sm btn-default button70"},"改项目")),e.personNumEdit&&u.push(p.default.createElement("a",{ref:"revisePersonNum",key:"buttonRevisePersonNum",disabled:n,id:o,"data-type":1,"data-personnum":r,href:"javascript:;",className:"btn btn-sm btn-default button70"},"改人数")),e.clone&&u.push(p.default.createElement("a",{ref:"xx",id:"order-clone",key:"buttonClone","data-toggle":"modal","data-target":"#order-clone-modal",style:{marginLeft:"5px;z-index:40000"},href:"javascript:;",className:"btn btn-sm btn-default button70"},"换产品")),p.default.createElement("span",{style:{float:"right",lineHeight:"30px"}},u)},renderRivseExtraServicePerson:function(e,t,a){if(!e){if("anyview"===a){var s="";return s=1==this.state.state?p.default.createElement("a",{href:"javascript:",ref:"tocheck",id:"tocheck","data-orderid":t.OrderID,style:{marginRight:"5px"},className:"status-green  btn btn-default btn-sm button70","data-next-code":"0"},"核对"):p.default.createElement("a",{href:"javascript:",id:"checked","data-orderid":t.OrderID,style:{marginRight:"5px"},className:" disabled   btn btn-default btn-sm button70","data-next-code":"0"},"核对"),p.default.createElement("span",{id:"oneOrderOP",style:{float:"right",lineHeight:"30px"}},s,p.default.createElement("a",{"data-state":t.state,target:"_blank",href:"/Orders/Edit/"+t.OrderID,className:"btn btn-sm btn-default button70"},"修改"))}var r=(0,l.default)(t.ServiceItemHistorys.ExtraServiceHistorys),i={AdultNum:t.ServiceItemHistorys.AdultNum,ChildNum:t.ServiceItemHistorys.ChildNum,INFNum:t.ServiceItemHistorys.INFNum},n=t.ServiceItemHistorys.ServiceTypeID;if(4==n&&(i.RoomNum=t.ServiceItemHistorys.RoomNum,i.RightNum=t.ServiceItemHistorys.RightNum),i=(0,l.default)(i),"editable"==this.props.state)var o="",d="revisePersonNum",u="reviseExtras";else var o="disabled",d="",u="";return p.default.createElement("span",{style:{float:"right",lineHeight:"30px"}},p.default.createElement("a",{ref:"reviseExtras",role:"button",disabled:o,"data-supplierid":t.ServiceItemHistorys.SupplierID,"data-serviceitemid":t.ServiceItemHistorys.ServiceItemID,id:u,"data-toggle":"modal","data-extras":r,href:"#extrasModal",style:{marginRight:"5px"},className:"btn btn-sm btn-default button70"},"改项目"),p.default.createElement("a",{ref:"revisePersonNum",disabled:o,id:d,"data-type":1,"data-personnum":i,href:"javascript:;",className:"btn btn-sm btn-default button70"},"改人数"),p.default.createElement("a",{ref:"xx",id:"order-clone","data-toggle":"modal","data-target":"#order-clone-modal",style:{marginLeft:"5px;z-index:40000"},href:"javascript:;",className:"btn btn-sm btn-default button70"},"换产品"))}},renderRoom:function(){if(4==this.props.subOrder.ServiceItemHistorys.ServiceTypeID)return p.default.createElement("span",{className:"childnum"},"间数 ",this.state.RoomNum,"  ")},renderNight:function(){if(4==this.props.subOrder.ServiceItemHistorys.ServiceTypeID)return p.default.createElement("span",{className:"childnum"},"晚数 ",this.state.RightNum,"  ")},renderExtrasInfo:function(e){if(e){var t=0,a=new Array;for(var s in e)t+=e[s].ServiceNum,0!==parseInt(e[s].ServiceNum)&&a.push(e[s].ServiceName+"："+e[s].ServiceNum+e[s].ServiceUnit);var r=a.join("，");if(0!=t)return p.default.createElement("div",{className:"langhuatips"},"【已选项目】",p.default.createElement("span",{className:""},r))}},renderComponentsList:function(e,t,a,s,r,i,n,l,o,d,u,c,m){var h=new Array,f=new Array;for(var v in e)e[v].componentid=v,f.push(e[v]);f.sort(function(e,t){return parseInt(e.orderIndex)<parseInt(t.orderIndex)?-1:1});var g=0;for(var b in f){if("initempty"==t)var y="emptyrow";else if(t[f[b].componentid])var y=t[f[b].componentid];else var y="emptyrow";if("Date_setoutdate_returndate"==f[b].type&&"ServiceDate"in n)g=1;else{var E=f[b].componentid;h.push(p.default.createElement(_[f[b].type],{key:E,id:E,ref:E,type:f[b].type,allLength:f.length-g,orderid:E,postKey:E,componentid:E,suborderid:a,serviceItemID:l,data:f[b],initdata:y,UIType:"edit",limit:i,fixedDays:o,ServiceTypeID:u,basePeopleNum:parseInt(this.state.AdultNum)+parseInt(this.state.ChildNum)+parseInt(this.state.INFNum),UpdateDataToForm:r.recievedata,recievePeson:r.recievePeson,recieveDatePair:r.recieveDatePair,reciveTempValue:r.reciveTempValue,reciveValueState:r.reciveValueState,recieveSystemFields:r.recieveSystemFields,isForCusClient:d,copyToClipboard:this.props.buttons.copyToClipboard,updateCopyObjx:this.formatCopyObj2Str,Nights:c,severTimeStamp:m}))}}return h},renderCover:function(){return null},render:function(){var e=this.props.subOrder,t=this.props.state,a=(this.props.areas,this.props.isForCusClient),s=this.props.functions;if(null==e.ServiceItemHistorys.ElementsValue)var r="initempty";else var r=JSON.parse(e.ServiceItemHistorys.ElementsValue);var i=parseInt(this.state.AdultNum)+parseInt(this.state.ChildNum)+parseInt(this.state.INFNum),n=e.ServiceItemHistorys.RightNum,l=this.props.limit;this.props.buttons;return p.default.createElement("div",{className:"panel panel-default oneSuborder",key:"suborder"+e.OrderID,ref:"suborder"+e.OrderID,id:"suborder"+e.OrderID,"data-customerid":e.CustomerID},p.default.createElement("div",{className:"panel-heading"},p.default.createElement("span",{className:"servicecnname bold",style:{lineHeight:"30px"}},e.ServiceItemHistorys.cnItemName,"    "),p.default.createElement("span",{className:" visible-lg-inline-block visible-xs-block visible-md-inline-block visible-sm-inline-block"},p.default.createElement("span",{className:"adultnum"},"成人 ",this.state.AdultNum,"  "),p.default.createElement("span",{className:"childnum"},"儿童 ",this.state.ChildNum,"  "),p.default.createElement("span",{className:""},"婴儿 ",this.state.INFNum,"  "),this.renderRoom(),this.renderNight()),this.rendersButtons(this.props.buttons,e,t)),p.default.createElement("div",{className:"panel-body form",style:{position:"relative"}},this.renderExtrasInfo(this.state.ExtraServiceHistorys),this.renderComponentsList(JSON.parse(e.ServiceItemHistorys.Elements).elementList,r,e.OrderID,i,s,l,JSON.parse(e.ServiceItemHistorys.Elements).systemFieldsMap,e.ServiceItemHistorys.ServiceItemID,e.ServiceItemHistorys.FixedDays,a,e.ServiceItemHistorys.ServiceTypeID,n,e.severTimeStamp),this.renderCover()))},componentDidMount:function(){var e=this;$(e.refs.revisePersonNum).bind("update",function(t,a){e.setState(a,function(){e.updatetCopyObj2Str()})}),$(e.refs.reviseExtras).bind("update",function(t,a){e.setState({ExtraServiceHistorys:a},function(){e.updatetCopyObj2Str()})}),$(e.refs.tocheck).bind("update",function(t,a){e.setState({state:a})})},formatCopyObj2Str:function(e){var t,a=this.state.copyObj;for(var t in e)a[t]=e[t];this.setState({copyObj:a},function(){this.updatetCopyObj2Str()})},updatetCopyObj2Str:function(){var e,t,a,s,r=[],i=this.state.copyObj,n=this.state.sortInfo,l=this.state.ExtraServiceHistorys,o="";o+="【"+this.props.subOrder.ServiceItemHistorys.cnItemName+"】的资料请您核对一下哦！\n";for(t in l)0!=l[t].ServiceNum&&r.push(l[t].ServiceName+"："+l[t].ServiceNum+l[t].ServiceUnit);var p=r.join("，");p&&(o+="【已选项目】"+p+"\n"),o+="  成人："+this.state.AdultNum+"人，儿童："+this.state.ChildNum+"人，婴儿："+this.state.INFNum+"人\n";for(e in n)if(a=n[e].cID,a in i)for(s in i[a])o+="  "+i[a][s].title+"："+i[a][s].str+"\n";this.setState({copyStr:o})},onCopy:function(){$(this.refs.copyToClipboard).success("复制成功！")}}),W=p.default.createClass({displayName:"TBOrders",componentDidMount:function(){var e=this;$(this.refs.all).bind("forceupdate",function(){e.forceUpdate()}),$("#clientOrderLoading").remove()},receiveDataUpdate:function(e){if("rechangeable"!=this.props.state){window.postData||(window.postData={});var t=window.postData;for(var a in e){t instanceof Object||(t={});for(var s in e[a]){t[a]instanceof Object||(t[a]={});for(var r in e[a][s])t[a][s]instanceof Object||(t[a][s]={}),t[a][s][r]=e[a][s][r]}}window.postData=t}},recievePeson:function(e){if("rechangeable"!=this.props.state){window.personData||(window.personData={});var t=window.personData;for(var a in e)if(a in t)for(var s in e[a])t[a][s]=e[a][s];else t[a]=e[a];window.personData=t}},recieveDatePair:function(e){if("rechangeable"!=this.props.state)for(var t in e)datePair[t]=e[t]},recieveSystemFields:function(e){if("rechangeable"!=this.props.state){window.systemFieldsMaps||(window.systemFieldsMaps={}),systemFieldsMaps=window.systemFieldsMaps;for(var t in e){t in systemFieldsMaps||(systemFieldsMaps[t]=new Object);for(var a in e[t])systemFieldsMaps[t][a]=e[t][a]}window.systemFieldsMaps=systemFieldsMaps}},reciveTempValue:function(e){if("rechangeable"!=this.props.state){window.tempValue||(window.tempValue={});var t=window.tempValue;for(var a in e)for(var s in e[a])t[a]instanceof Object||(t[a]={}),t[a][s]=e[a][s];window.tempValue=t}},reciveValueState:function(e){if("rechangeable"!=this.props.state){window.valueSate||(window.valueSate={});var t=window.valueSate;for(var a in e)for(var s in e[a])t[a]instanceof Object||(t[a]={}),t[a][s]=e[a][s];window.valueSate=t}},updateSubmitStatus:function(){var e=this.state.postData;for(var t in e)for(var a in e[t])if(e[t][a]==this.props.invalidtag)return void this.setState({postAble:!1})},renderCover:function(){return"rechangeable"==this.props.state?p.default.createElement("div",{className:"full-cover"}):null},render:function(){var e=this.props.subOrderList,t=this.props.isForCusClient,a={recievedata:this.receiveDataUpdate,recievePeson:this.recievePeson,recieveDatePair:this.recieveDatePair,reciveTempValue:this.reciveTempValue,reciveValueState:this.reciveValueState,recieveSystemFields:this.recieveSystemFields},s=this.props.state,r=this.props.limit,i=this.props.buttons;return p.default.createElement("form",{ref:"all",id:"reactall",className:"form-horizontal",role:"form",style:{position:"relative"}},e.map(function(e,n){var l=e.OrderID;return p.default.createElement(B,{key:l,id:l,ref:l,subOrderId:"suborder"+l,subOrder:e,isForCusClient:t,functions:a,state:s,limit:r,buttons:i})}))}}),z=p.default.createClass({displayName:"RechangeSubOrder",getInitialState:function(){var e=this.props.subOrder,t=e.ServiceItemHistorys.AdultNum,a=e.ServiceItemHistorys.ChildNum,s=e.ServiceItemHistorys.INFNum,r="",i="",n="";if(null==e.ServiceItemHistorys.ChangeValue){var l=e.ServiceItemHistorys.ExtraServiceHistorys,o="",p=new Object;p.AdultNum=t,p.ChildNum=a,p.INFNum=s,r=t,i=a,n=s,p.CustomerName=e.CustomerName,p.CustomerEnname=e.CustomerEnname,p.Tel=e.Tel,p.BakTel=e.BakTel,p.Email=e.Email,p.Wechat=e.Wechat,4==e.ServiceItemHistorys.ServiceTypeID&&(p.RightNum=e.ServiceItemHistorys.RightNum,p.RoomNum=e.ServiceItemHistorys.RoomNum)}else{var l=JSON.parse(e.ServiceItemHistorys.ChangeValue).extra,o=JSON.parse(e.ServiceItemHistorys.ChangeValue).extraDisplay,p=JSON.parse(e.ServiceItemHistorys.ChangeValue).nameAndNum;r=p.AdultNum,i=p.ChildNum,n=p.INFNum}var d=new Object;return d.AdultNum=t,d.ChildNum=a,d.INFNum=s,d.CustomerName=e.CustomerName,d.CustomerEnname=e.CustomerEnname,d.Tel=e.Tel,d.BakTel=e.BakTel,d.Email=e.Email,d.Wechat=e.Wechat,4==e.ServiceItemHistorys.ServiceTypeID&&(d.RightNum=e.ServiceItemHistorys.RightNum,d.RoomNum=e.ServiceItemHistorys.RoomNum),{AdultNum:t,ChildNum:a,INFNum:s,AdultNumR:r,ChildNumR:i,INFNumR:n,ExtraServiceHistorys:l,valueExtraOld:e.ServiceItemHistorys.ExtraServiceHistorys,ExtraReChangeDisplay:o,nameAndNum:p,oldnameAndNum:d}},renderComponentsList:function(e,t,a,s,r,i,n,l,o,d,u,c){var m=new Array,h=new Array;for(var f in e)e[f].componentid=f,h.push(e[f]);h.sort(function(e,t){return e.orderIndex<t.orderIndex?-1:1});var v=0;for(var g in h){if("initempty"==t)var b="emptyrow";else var b=t[h[g].componentid];if("initempty"==a)var y=b;else var y=a.formElemnents[s][h[g].componentid];if("Date_setoutdate_returndate"==h[g].type&&"ServiceDate"in n)v=1;else{var E=h[g].componentid;m.push(p.default.createElement(_[h[g].type],{key:E,id:E,ref:E,type:h[g].type,allLength:h.length-v,orderid:E,postKey:E,componentid:E,suborderid:s,serviceItemID:l,ServiceTypeID:u,data:h[g],initdata:y,willChangeValue:y,beforeRechangeValue:b,UIType:"reChange",fixedDays:o,basePeopleNum:r,UpdateDataToForm:i.recievedata,recievePeson:i.recievePeson,recieveDatePair:i.recieveDatePair,reciveTempValue:i.reciveTempValue,reciveValueState:i.reciveValueState,reciveValueChange:i.reciveValueChange,recieveSystemFields:i.recieveSystemFields,isForCusClient:d,Nights:c}))}}return m},renderExtrasInfo:function(e){if(e){var t=0,a=[];console.log(e);for(var s in e)t+=parseInt(e[s].ServiceNum),0!==parseInt(e[s].ServiceNum)&&a.push(e[s].ServiceName+"："+e[s].ServiceNum+e[s].ServiceUnit);var r=a.join("， ");if(0!=t)return p.default.createElement("div",{className:""},p.default.createElement("span",{className:"visible-lg-inline-block visible-xs-block visible-md-inline-block visible-sm-inline-block"},r))}},renderRivseExtraService:function(e){var t,a=this;if(null==e.ServiceItemHistorys.ChangeValue)var s=(0,l.default)(e.ServiceItemHistorys.ExtraServiceHistorys);else var s=(0,l.default)(JSON.parse(e.ServiceItemHistorys.ChangeValue).extra);var r=(0,l.default)(e.ServiceItemHistorys.ExtraServiceHistorys);return p.default.createElement("div",null,p.default.createElement("a",(t={ref:"reviseExtras",id:"reviseExtrasRechange","data-serviceitemid":e.ServiceItemHistorys.ServiceItemID,"data-supplierid":e.ServiceItemHistorys.SupplierID,"data-toggle":"modal","data-extra-old":r,"data-extras":s},(0,i.default)(t,"ref","reviseExtrasR"),(0,i.default)(t,"style",{marginRight:"5px"}),(0,i.default)(t,"className","btn btn-sm btn-default button70"),t),"改项目"),p.default.createElement("span",null,function(){return""!=a.state.ExtraReChangeDisplay?a.state.ExtraReChangeDisplay.changeAltCN:""}()))},renderRoom:function(e,t){if(4==e.ServiceItemHistorys.ServiceTypeID)return p.default.createElement("tr",null,p.default.createElement("td",null,"间数"),p.default.createElement("td",null,e.ServiceItemHistorys.RoomNum),p.default.createElement("td",null,p.default.createElement("input",{id:"RoomNum",ref:"RoomNum",type:"text","data-for":"RoomNum",defaultValue:t.RoomNum,onBlur:this.changeHandle,className:"form-control input-inline input-medium"}),p.default.createElement("div",null,p.default.createElement("span",{class:this.state.RoomNumclassname},this.state.RoomNumtips))))},renderNight:function(e,t){if(4==e.ServiceItemHistorys.ServiceTypeID)return p.default.createElement("tr",null,p.default.createElement("td",null,"晚数"),p.default.createElement("td",null,e.ServiceItemHistorys.RightNum),p.default.createElement("td",null,p.default.createElement("input",{id:"RightNum",ref:"RightNum",type:"text","data-for":"RightNum",defaultValue:t.RightNum,onBlur:this.changeHandle,className:"form-control input-inline input-medium"}),p.default.createElement("div",null,p.default.createElement("span",{class:this.state.RightNumclassname},this.state.RightNumtips))))},render:function(){var e=this.props.subOrder,t=(this.props.isForCusClient,this.props.functions);if(null==e.ServiceItemHistorys.ElementsValue)var a="initempty";else var a=JSON.parse(e.ServiceItemHistorys.ElementsValue);if(null==e.ServiceItemHistorys.ChangeValue)var s="initempty";else var s=JSON.parse(e.ServiceItemHistorys.ChangeValue);var r=parseInt(this.state.AdultNumR)+parseInt(this.state.ChildNumR)+parseInt(this.state.INFNumR),i=this.state.oldnameAndNum,n=this.state.nameAndNum;for(var l in i)i[l]==n[l]&&(n[l]="");var o=e.ServiceItemHistorys.RightNum;return p.default.createElement("table",{className:"table reChangeTable table-bordered oneSuborder","data-customerid":e.CustomerID},p.default.createElement("thead",null,p.default.createElement("tr",null,p.default.createElement("th",{style:{width:"165px",maxWidth:"165px",minWidth:"165px"}},"变更项目"),p.default.createElement("th",{style:{width:"165px"}},"原内容"),p.default.createElement("th",{style:{width:"280px"}},"变更后内容"))),p.default.createElement("tbody",null,p.default.createElement("tr",null,p.default.createElement("td",null,p.default.createElement("span",{className:"redspark"},"*"),"联系人姓名（中文）"),p.default.createElement("td",null,e.CustomerName),p.default.createElement("td",null,p.default.createElement("input",{id:"CustomerName",ref:"CustomerName",type:"text","data-for":"cnName",defaultValue:n.CustomerName,onBlur:this.changeHandle,className:"form-control input-inline input-medium"}))),p.default.createElement("tr",null,p.default.createElement("td",null,p.default.createElement("span",{className:"redspark"},"*"),"联系人姓名（英文）"),p.default.createElement("td",null,e.CustomerEnname),p.default.createElement("td",null,p.default.createElement("input",{id:"CustomerEnname",ref:"CustomerEnname",type:"text","data-for":"enName",defaultValue:n.CustomerEnname,onBlur:this.changeHandle,className:"form-control input-inline input-medium"}))),p.default.createElement("tr",null,p.default.createElement("td",null,p.default.createElement("span",{className:"redspark"},"*"),"联系电话"),p.default.createElement("td",null,e.Tel),p.default.createElement("td",null,p.default.createElement("input",{id:"Tel",ref:"Tel",type:"text","data-for":"Tel",defaultValue:n.Tel,onBlur:this.changeHandle,className:"form-control input-inline input-medium"}))),p.default.createElement("tr",null,p.default.createElement("td",null,"备用电话"),p.default.createElement("td",null,e.BakTel),p.default.createElement("td",null,p.default.createElement("input",{id:"BakTel",ref:"BakTel",type:"text","data-for":"BakTel",defaultValue:n.BakTel,onBlur:this.changeHandle,className:"form-control input-inline input-medium"}))),p.default.createElement("tr",null,p.default.createElement("td",null,p.default.createElement("span",{className:"redspark"},"*"),"Email地址"),p.default.createElement("td",null,e.Email),p.default.createElement("td",null,p.default.createElement("input",{id:"Email",ref:"Email",type:"text","data-for":"Email",defaultValue:n.Email,onBlur:this.changeHandle,className:"form-control input-inline input-medium"}))),p.default.createElement("tr",null,p.default.createElement("td",null,p.default.createElement("span",{className:"redspark"},"*"),"微信号"),p.default.createElement("td",null,e.Wechat),p.default.createElement("td",null,p.default.createElement("input",{id:"Wechat",ref:"Wechat",type:"text","data-for":"Wechat",defaultValue:n.Wechat,onBlur:this.changeHandle,className:"form-control input-inline input-medium"}))),p.default.createElement("tr",null,p.default.createElement("td",null,"成人"),p.default.createElement("td",null,e.ServiceItemHistorys.AdultNum),p.default.createElement("td",null,p.default.createElement("input",{id:"AdultNum",ref:"AdultNum",type:"text","data-for":"Adult",defaultValue:n.AdultNum,onBlur:this.changeHandle,className:"form-control input-inline input-medium"}))),p.default.createElement("tr",null,p.default.createElement("td",null,"儿童"),p.default.createElement("td",null,e.ServiceItemHistorys.ChildNum),p.default.createElement("td",null,p.default.createElement("input",{id:"ChildNum",ref:"ChildNum",type:"text","data-for":"Child",defaultValue:n.ChildNum,onBlur:this.changeHandle,className:"form-control input-inline input-medium"})," ")),p.default.createElement("tr",null,p.default.createElement("td",null,"婴儿"),p.default.createElement("td",null,e.ServiceItemHistorys.INFNum),p.default.createElement("td",null,p.default.createElement("input",{id:"INFNum",ref:"INFNum",type:"text","data-for":"Infant",defaultValue:n.INFNum,onBlur:this.changeHandle,className:"form-control input-inline input-medium"})," ")),this.renderRoom(e,n),this.renderNight(e,n),p.default.createElement("tr",null,p.default.createElement("td",null,"附加项目"),p.default.createElement("td",null,this.renderExtrasInfo(e.ServiceItemHistorys.ExtraServiceHistorys)),p.default.createElement("td",null,this.renderRivseExtraService(e)))),this.renderComponentsList(JSON.parse(e.ServiceItemHistorys.Elements).elementList,a,s,e.OrderID,r,t,JSON.parse(e.ServiceItemHistorys.Elements).systemFieldsMap,e.ServiceItemHistorys.ServiceItemID,e.ServiceItemHistorys.FixedDays,this.props.isForCusClient,e.ServiceItemHistorys.ServiceTypeID,o))},componentDidMount:function(){var e=this;valueExtraReChange=e.state.ExtraServiceHistorys,valueExtraReChangeDisplay=e.state.ExtraReChangeDisplay,$(e.refs.reviseExtrasR).bind("update",function(t,a,s){valueExtraReChange=a,valueExtraReChangeDisplay=s,e.setState({ExtraReChangeDisplay:s})}),valueNameAndNum=e.state.nameAndNum,valueOldnameAndNum=e.state.oldnameAndNum,valueExtraOld=e.state.valueExtraOld},changeHandle:function(e){var t=$(e.target).attr("id"),a=$(e.target).val().trim();if("CustomerName"==t){var s=/^[\u4e00-\u9fa5]+$/;s.test(a)||$(e.target).val("")}else if("CustomerEnname"==t){var s=/^[A-Za-z ]+$/;s.test(a)?$(e.target).val(a.toUpperCase()):$(e.target).val("")}else if("CustomerEnname"==t){var s=/^[A-Za-z ]+$/;s.test(a)?$(e.target).val(a.toUpperCase()):$(e.target).val("")}else if("Tel"==t){var s=/^[0-9+-]+$/;s.test(a)?$(e.target).val(a):$(e.target).val("")}else if("BakTel"==t);else if("Wechat"==t)$(e.target).val(a);else if("Email"==t){var s=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;s.test(a)?$(e.target).val(a):$(e.target).val("")}else if("RightNum"==t){var s=/^[0-9]+$/;s.test(a)?($(e.target).val(a),$(".forceUpdate-setoutreturn").trigger("update",[parseInt(a)])):($(e.target).val(""),$(".forceUpdate-setoutreturn").trigger("update",[parseInt(this.state.oldnameAndNum[$(e.target).attr("id")])]))}else if("RoomNum"==t){var s=/^[0-9]+$/;s.test(a)?$(e.target).val(a):$(e.target).val("")}else{var s=/^\s+$/,r=new Array("AdultNum","ChildNum","INFNum"),i=[$(e.target).attr("id")],n=0;for(var l in r)r[l]!=i&&(n+=valueNameAndNum[r[l]]?parseInt(valueNameAndNum[r[l]]):parseInt(valueOldnameAndNum[r[l]]));if(s.test(a))$(e.target).val(""),n+=this.state.oldnameAndNum[$(e.target).attr("id")];else if(isNaN(a))$(e.target).val(""),n+=this.state.oldnameAndNum[$(e.target).attr("id")];else{var o=a?parseInt(a):"";$(e.target).val(o),n+=o}$(".forceUpdate-peoplenum").trigger("update",[n])}""==$(e.target).val()?valueNameAndNum[$(e.target).attr("id")]=this.state.oldnameAndNum[$(e.target).attr("id")]:valueNameAndNum[$(e.target).attr("id")]=$(e.target).val()}}),L=p.default.createClass({displayName:"RechangeOrder",receiveDataUpdate:function(e){var t=postData;for(var a in e){t instanceof Object||(t={});for(var s in e[a]){t[a]instanceof Object||(t[a]={});for(var r in e[a][s])t[a][s]instanceof Object||(t[a][s]={}),t[a][s][r]=e[a][s][r]}}postData=t},recievePeson:function(e){for(var t in e)if(t in personData)for(var a in e[t])personData[t][a]=e[t][a];else personData[t]=e[t]},recieveDatePair:function(e){for(var t in e)datePair[t]=e[t]},recieveSystemFields:function(e){for(var t in e)systemFieldsMaps[t]=e[t]},reciveTempValue:function(e){for(var t in e)for(var a in e[t])tempValue[t]instanceof Object||(tempValue[t]={}),tempValue[t][a]=e[t][a]},reciveValueState:function(e){for(var t in e)for(var a in e[t])valueSate[t]instanceof Object||(valueSate[t]={}),valueSate[t][a]=e[t][a]},reciveValueChange:function(e){for(var t in e)for(var a in e[t])valueReChange[t]instanceof Object||(valueReChange[t]={}),valueReChange[t][a]=e[t][a]},updateSubmitStatus:function(){var e=this.state.postData;for(var t in e)for(var a in e[t])if(e[t][a]==this.props.invalidtag)return void this.setState({postAble:!1})},render:function(){var e=this.props.oneSuborder,t={recievedata:this.receiveDataUpdate,recievePeson:this.recievePeson,recieveDatePair:this.recieveDatePair,reciveTempValue:this.reciveTempValue,reciveValueState:this.reciveValueState,reciveValueChange:this.reciveValueChange,recieveSystemFields:this.recieveSystemFields},a=e.OrderID;return p.default.createElement(z,{key:a,id:a,ref:a,subOrderId:"suborder"+a,subOrder:e,functions:t,isForCusClient:this.props.isForCusClient})}}),Y=p.default.createClass({displayName:"Orders",render:function(){function e(e){return"[object Array]"===Object.prototype.toString.call(e)}var t=!1,a={copyToClipboard:!1,extraEdit:!1,personNumEdit:!1,clone:!1,check:!1,toEdit:!1},s=this.props.buttons;for(var r in a)r in s&&(a[r]=s[r]);if(void 0!==this.props.unlimited&&(t=this.props.unlimited),"edit"==this.props.UIType){var i=!0,n=[];return e(this.props.initdata)?(n=this.props.initdata,i=!0):(n.push(this.props.initdata),i=!1),p.default.createElement(W,{ref:function(e){P.setALL(e),H=e},subOrderList:n,isForCusClient:this.props.isForCusClient,state:this.props.state,limit:!t,buttons:a})}if("reChange"==this.props.UIType)return p.default.createElement(L,{ref:function(e){H=e},oneSuborder:this.props.initdata,isForCusClient:!1,limit:!t});if("view"==this.props.UIType){var n=[];return e(this.props.initdata)?n=this.props.initdata:n.push(this.props.initdata),p.default.createElement(W,{subOrderList:n,isForCusClient:this.props.isForCusClient,state:this.props.state,limit:!t})}},componentDidMount:function(){window.postData||(window.postData={}),window.personData||(window.personData={}),window.tempValue||(window.tempValue={}),window.systemFieldsMaps||(window.systemFieldsMaps={}),window.valueSate||(window.valueSate={}),window.valueReChange||(window.valueReChange={}),window.valueExtraReChange||(window.valueExtraReChange=[]),window.valueExtraOld||(window.valueExtraOld=[]),window.valueExtraReChangeDisplay||(window.valueExtraReChangeDisplay=""),window.valueNameAndNum||(window.valueNameAndNum={}),window.valueOldnameAndNum||(window.valueOldnameAndNum=new Object)}});e.exports=Y},function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=a(5),i=s(r);t.default=function(e,t,a){return t in e?(0,i.default)(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},function(e,t,a){"use strict";e.exports={default:a(6),__esModule:!0}},function(e,t,a){"use strict";a(7);var s=a(10).Object;e.exports=function(e,t,a){return s.defineProperty(e,t,a)}},function(e,t,a){"use strict";var s=a(8);s(s.S+s.F*!a(18),"Object",{defineProperty:a(14).f})},function(e,t,a){"use strict";var s=a(9),r=a(10),i=a(11),n=a(13),l="prototype",o=function e(t,a,o){var p,d,u,c=t&e.F,m=t&e.G,h=t&e.S,f=t&e.P,v=t&e.B,g=t&e.W,b=m?r:r[a]||(r[a]={}),y=b[l],E=m?s:h?s[a]:(s[a]||{})[l];m&&(o=a);for(p in o)d=!c&&E&&void 0!==E[p],d&&p in b||(u=d?E[p]:o[p],b[p]=m&&"function"!=typeof E[p]?o[p]:v&&d?i(u,s):g&&E[p]==u?function(e){var t=function(t,a,s){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,a)}return new e(t,a,s)}return e.apply(this,arguments)};return t[l]=e[l],t}(u):f&&"function"==typeof u?i(Function.call,u):u,f&&((b.virtual||(b.virtual={}))[p]=u,t&e.R&&y&&!y[p]&&n(y,p,u)))};o.F=1,o.G=2,o.S=4,o.P=8,o.B=16,o.W=32,o.U=64,o.R=128,e.exports=o},function(e,t){"use strict";var a=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=a)},function(e,t){"use strict";var a=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=a)},function(e,t,a){"use strict";var s=a(12);e.exports=function(e,t,a){if(s(e),void 0===t)return e;switch(a){case 1:return function(a){return e.call(t,a)};case 2:return function(a,s){return e.call(t,a,s)};case 3:return function(a,s,r){return e.call(t,a,s,r)}}return function(){return e.apply(t,arguments)}}},function(e,t){"use strict";e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,a){"use strict";var s=a(14),r=a(22);e.exports=a(18)?function(e,t,a){return s.f(e,t,r(1,a))}:function(e,t,a){return e[t]=a,e}},function(e,t,a){"use strict";var s=a(15),r=a(17),i=a(21),n=Object.defineProperty;t.f=a(18)?Object.defineProperty:function(e,t,a){if(s(e),t=i(t,!0),s(a),r)try{return n(e,t,a)}catch(e){}if("get"in a||"set"in a)throw TypeError("Accessors not supported!");return"value"in a&&(e[t]=a.value),e}},function(e,t,a){"use strict";var s=a(16);e.exports=function(e){if(!s(e))throw TypeError(e+" is not an object!");return e}},function(e,t){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function(e){return"object"===("undefined"==typeof e?"undefined":a(e))?null!==e:"function"==typeof e}},function(e,t,a){"use strict";e.exports=!a(18)&&!a(19)(function(){return 7!=Object.defineProperty(a(20)("div"),"a",{get:function(){return 7}}).a})},function(e,t,a){"use strict";e.exports=!a(19)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){
"use strict";e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,a){"use strict";var s=a(16),r=a(9).document,i=s(r)&&s(r.createElement);e.exports=function(e){return i?r.createElement(e):{}}},function(e,t,a){"use strict";var s=a(16);e.exports=function(e,t){if(!s(e))return e;var a,r;if(t&&"function"==typeof(a=e.toString)&&!s(r=a.call(e)))return r;if("function"==typeof(a=e.valueOf)&&!s(r=a.call(e)))return r;if(!t&&"function"==typeof(a=e.toString)&&!s(r=a.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,t){"use strict";e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,a){"use strict";e.exports={default:a(24),__esModule:!0}},function(e,t,a){"use strict";var s=a(10),r=s.JSON||(s.JSON={stringify:JSON.stringify});e.exports=function(e){return r.stringify.apply(r,arguments)}},function(e,t){e.exports=React},function(e,t){e.exports=ReactDOM},function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(25),i=s(r),n=a(26),l=(s(n),a(28)),o=s(l),p=a(29),d=s(p),u=a(30),c=s(u),m=i.default.createClass({displayName:"DatePickerRow",prehandledata:function(e){if("emptyrow"==e){var t={};return t[this.props.data.elements.single.code]={value:""},t}return e},prehandleupdatedata:function(e){return e},isDate:function(e,t){function a(e,t){return 4==t||6==t||9==t||11==t?"30":2==t?e%4==0&&e%100!=0||e%400==0?"29":"28":"31"}function s(e){var t="^[0-9]+$",a=new RegExp(t);return e.search(a)!=-1}null==t&&(t="yyyyMMdd");var r=t.indexOf("yyyy");if(r==-1)return!1;var i=e.substring(r,r+4),n=t.indexOf("MM");if(n==-1)return!1;var l=e.substring(n,n+2),o=t.indexOf("dd");if(o==-1)return!1;var p=e.substring(o,o+2);return!(!s(i)||i>"2100"||i<"1900")&&(!(!s(l)||l>"12"||l<"01")&&!(p>a(i,l)||p<"01"))},detectValueState:function(e){var t=1,a=1,s="",r="";e?this.isDate(e,"yyyy-MM-dd")?(s="help-inline",r=this.props.data.elements.single.tips,t=1,a=1):(s="help-inline tips",r="请选择或填写正确的"+this.props.data.elements.single.title,t=0,a=1):(s="help-inline tips",r="请选择或填写正确的"+this.props.data.elements.single.title,t=0,a=0),this.props.limit!==!1&&"2"!=this.props.data.mandatory||(s="help-inline",r=this.props.data.elements.single.tips),this.setState({setoutclassname:s,setouttips:r});var i=new Object;i[this.props.suborderid]=new Object,i[this.props.suborderid][this.props.data.elements.single.code]=new Object,i[this.props.suborderid][this.props.data.elements.single.code].isValueUseAble=t,i[this.props.suborderid][this.props.data.elements.single.code].isValueNotEmpty=a,i[this.props.suborderid][this.props.data.elements.single.code].isValueMandatory=this.props.data.mandatory,this.props.reciveValueState(i)},detectValueWhenMounted:function(){if("emptyrow"==this.getDefaultValue()){this.setState({setoutclassname:"help-inline",setouttips:this.props.data.elements.single.tips});var e=new Object;e[this.props.suborderid]=new Object,e[this.props.suborderid][this.props.data.elements.single.code]=new Object,e[this.props.suborderid][this.props.data.elements.single.code].isValueUseAble=0,e[this.props.suborderid][this.props.data.elements.single.code].isValueNotEmpty=0,e[this.props.suborderid][this.props.data.elements.single.code].isValueMandatory=this.props.data.mandatory,this.props.reciveValueState(e)}else this.detectValueState(this.state.postValue[this.props.data.elements.single.code].value)},componentDidMount:function(e){this.detectValueWhenMounted();var t={};t[this.props.suborderid]=new Object,t[this.props.suborderid][this.props.data.elements.single.code]=this.state.postValue[this.props.data.elements.single.code].value,this.props.reciveTempValue(t);var a={};a[this.props.data.elements.single.code]={title:this.props.data.elements.single.title,str:this.state.postValue[this.props.data.elements.single.code].value},this.updateCopyObj(a),$(this.refs.datepicker).datepicker({autoclose:!0,orientation:"top right",language:"ZH-CN",format:"yyyy-mm-dd",todayHighlight:!0,container:"#reactall",todayBtn:"linked",clearBtn:!0}).on("changeDate",function(e){var t=e.date?e.date.valueOf():"";if(""!=t)var a=new Date(t),s=a.getFullYear(),r=1==String(parseInt(a.getMonth())+1).length?"0"+String(parseInt(a.getMonth())+1):String(parseInt(a.getMonth())+1),i=1==String(parseInt(a.getDate())).length?"0"+String(parseInt(a.getDate())):String(parseInt(a.getDate())),n=s+"-"+r+"-"+i;else var n="";var l={};if(l[this.props.data.elements.single.code]={value:n},"reChange"==this.props.UIType&&""==n){var o=this.prehandledata(this.props.beforeRechangeValue);l[this.props.data.elements.single.code]=o[this.props.data.elements.single.code]}this.detectValueState(l[this.props.data.elements.single.code].value),this.setState({postValue:l},function(){this.upadteToForm(this.getdUpdateData());var e={};e[this.props.suborderid]=new Object,e[this.props.suborderid][this.props.data.elements.single.code]=this.state.postValue[this.props.data.elements.single.code].value,this.props.reciveTempValue(e);var t={};t[this.props.data.elements.single.code]={title:this.props.data.elements.single.title,str:this.state.postValue[this.props.data.elements.single.code].value},this.updateCopyObj(t)})}.bind(this)).on("hide",function(){$(this.refs.datepicker).find("input").blur()}.bind(this))},mixins:[c.default],handlerChange:function(e){},render:function(){var e=this.props.suborderid,t=this.props.componentid,a=this.props.data.elements.single.code;if("edit"==this.props.UIType)return i.default.createElement("div",{className:"form-group","data-suborderid":e,"data-componentid":t,"data-segmentcode":a},i.default.createElement(o.default,{params:{isMust:1==this.props.data.mandatory,title:this.props.data.elements.single.title}}),i.default.createElement("div",{className:"col-md-10"},i.default.createElement("div",{ref:"datepicker",className:"input-group input-medium  input-group-sm ddDatePicker date date-picker  "},i.default.createElement("input",{ref:"datepick",readOnly:!0,type:"text",className:"form-control input-medium input  readOnlyDat readOnlyDatePicker",defaultValue:this.state.postValue[a].value,onPaste:this.handlerChange}),i.default.createElement("span",{className:"input-group-btn"},i.default.createElement("button",{className:"btn default",type:"button"},i.default.createElement("i",{className:"fa fa-calendar"})))),i.default.createElement("span",{className:this.state.setoutclassname},this.state.setouttips)));if("reChange"==this.props.UIType){var s=this.prehandledata(this.props.beforeRechangeValue),r=0;if(s[this.props.data.elements.single.code].value==this.state.postValue[this.props.data.elements.single.code].value||""==this.state.postValue[this.props.data.elements.single.code]){r=0;var n=""}else{r=1;var n=this.state.postValue[this.props.data.elements.single.code].value}var l=new Object;return l[this.props.suborderid]=new Object,l[this.props.suborderid][this.props.data.elements.single.code]=new Object,l[this.props.suborderid][this.props.data.elements.single.code].isValueChange=r,this.props.reciveValueChange(l),i.default.createElement("tbody",null,i.default.createElement("tr",null,i.default.createElement("td",null,i.default.createElement(d.default,{params:{isMust:1==this.props.data.mandatory,title:this.props.data.elements.single.title}})),i.default.createElement("td",null,this.getDefaultValue()[this.props.data.elements.single.code].value),i.default.createElement("td",null,i.default.createElement("div",{ref:"datepicker",className:"input-group input-medium  input-group-sm ddDatePicker date date-picker  "},i.default.createElement("input",{ref:"datepick",readOnly:!0,type:"text",className:"form-control input-medium input readOnlyDatePicker",defaultValue:n,onPaste:this.handlerChange}),i.default.createElement("span",{className:"input-group-btn"},i.default.createElement("button",{className:"btn default",type:"button"},i.default.createElement("i",{className:"fa fa-calendar"})))),i.default.createElement("div",null,i.default.createElement("span",{className:this.state.setoutclassname},this.state.setouttips)))))}}});t.default=m},function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(25),i=s(r),n=a(26),l=(s(n),i.default.createClass({displayName:"Lable",isMust:function(e){if(e)return i.default.createElement("span",{className:"redspark"},"*")},getName:function(e){return e||(e="undefined"),i.default.createElement("span",null,e,"：")},renderSelectedPeple:function(){if("personpicker"==this.props.params.reactType)return i.default.createElement("div",{className:"selectnumtips"},"已选：",this.props.params.selectednum,"人")},componentDidMount:function(){},render:function(){return i.default.createElement("label",{className:"col-md-2 control-label"},this.isMust(this.props.params.isMust),this.getName(this.props.params.title),this.renderSelectedPeple())}}));t.default=l},function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(25),i=s(r),n=a(26),l=(s(n),i.default.createClass({displayName:"LableRechange",isMust:function(e){if(e)return i.default.createElement("span",{className:"redspark"},"*")},getName:function(e){return e||(e="undefined"),i.default.createElement("span",null,e,"：")},renderSelectedPeple:function(){if("personpicker"==this.props.params.reactType)return i.default.createElement("div",{className:"selectnumtips"},"已选：",this.props.params.selectednum,"人")},render:function(){return i.default.createElement("span",null,this.isMust(this.props.params.isMust),this.getName(this.props.params.title))}}));t.default=l},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={getdUpdateData:function(){var e=new Object;return e[this.props.suborderid]=new Object,e[this.props.suborderid][this.props.componentid]=this.prehandleupdatedata(this.state.postValue),e},upadteToForm:function(e){this.props.UpdateDataToForm(e)},getInitialState:function(){var e=this.props.initdata;return e=this.prehandledata(e),{postValue:e,forceUpdateMax:2,forceUpdateState:0}},componentDidMount:function(){this.upadteToForm(this.getdUpdateData())},componentDidUpdate:function(){},getDefaultValue:function(){return"reChange"==this.props.UIType?this.props.beforeRechangeValue:this.props.initdata},updateCopyObj:function(e){if(this.props.copyToClipboard){var t={};t[this.props.componentid]=e,this.props.updateCopyObjx(t)}}};t.default=a},function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(23),i=s(r),n=a(25),l=s(n),o=a(26),p=s(o),d=a(28),u=s(d),c=a(29),m=s(c),h=a(30),f=s(h),v=l.default.createClass({displayName:"PersonPickerRow",prehandledata:function(e){if("emptyrow"==e){var t={};return t[this.props.data.elements.single.code]={},t}var a=this.props.data.elements.single.code,t={};for(var s in e[a])t[e[a][s].personID]=e[a][s];var r={};return r[a]=t,r},prehandleupdatedata:function(e){var t=this.props.data.elements.single.code,a=[];for(var s in e[t])a.push(e[t][s]);var r={};return r[t]=a,this.setState({selectednum:a.length}),r},arr2Obj:function(e){var t={};for(var a in e)t[e[a].personID]=e[a];return t},makeArray:function(e){var t=[];for(var a in e)t.push(e[a]);return t},mixins:[f.default],detectRechangeState:function(e,t){var a,s,r=0,i=0,n=0,l=0,o=0;for(a in t)a in e&&r++,i++;for(s in e)s in t&&n++,l++;if(r==i&&i==l){e:for(a in t)for(s in t[a])if(s in e[a]&&e[a][s]!=t[a][s]){o=1;break e}}else o=1;var p=new Object;p[this.props.suborderid]=new Object,p[this.props.suborderid][this.props.data.elements.single.code]=new Object,p[this.props.suborderid][this.props.data.elements.single.code].isValueChange=o,this.props.reciveValueChange(p)},detectValueState:function(e){var t=1,a=1,s="",r="",i=parseInt(this.state.maxPeopleNum);0==e.length?(s="help-inline tips",r="请选择"+this.props.data.elements.single.title,t=0,a=0,"reChange"==this.props.UIType&&2==this.props.data.mandatory&&(s="help-inline",r=this.props.data.elements.single.tips)):e.length>i?(s="help-inline tips",r="最多可以选择"+i+"人",t=0,a=1):(s="help-inline",r=this.props.data.elements.single.tips,t=1,a=1),this.props.limit!==!1&&"2"!=this.props.data.mandatory||(s="help-inline",r=this.props.data.elements.single.tips),this.setState({classname:s,tips:r});var n=new Object;n[this.props.suborderid]=new Object,n[this.props.suborderid][this.props.data.elements.single.code]=new Object,n[this.props.suborderid][this.props.data.elements.single.code].isValueUseAble=t,n[this.props.suborderid][this.props.data.elements.single.code].isValueNotEmpty=a,n[this.props.suborderid][this.props.data.elements.single.code].isValueMandatory=this.props.data.mandatory,this.props.reciveValueState(n)},detectValueWhenMounted:function(){if("emptyrow"==this.getDefaultValue()){this.setState({classname:"help-inline",tips:this.props.data.elements.single.tips});var e=new Object;e[this.props.suborderid]=new Object,e[this.props.suborderid][this.props.data.elements.single.code]=new Object,e[this.props.suborderid][this.props.data.elements.single.code].isValueUseAble=0,e[this.props.suborderid][this.props.data.elements.single.code].isValueNotEmpty=0,e[this.props.suborderid][this.props.data.elements.single.code].isValueMandatory=this.props.data.mandatory,this.props.reciveValueState(e)}else this.detectValueState(this.makeArray(this.state.postValue[this.props.data.elements.single.code]))},getInitialState:function(){return{maxPeopleNum:this.props.basePeopleNum}},componentDidMount:function(){var e=this;$(this.refs.forceUpdate).bind("update",function(t,a){e.setState({maxPeopleNum:a},function(){this.detectValueState(this.makeArray(this.state.postValue[this.props.data.elements.single.code]))})});var t=this.props.suborderid,a=this.props.componentid,s={};s[t]={},s[t][a]=this.state.postValue,this.props.recievePeson(s),this.detectValueWhenMounted();var s={};s[this.props.suborderid]=new Object;var r=this.state.postValue[this.props.data.elements.single.code],i=new Object;i.type="PersonPicker",i.value=new Array;for(var n in r)i.value.push(r[n]);if(s[this.props.suborderid][this.props.data.elements.single.code]=i,this.props.reciveTempValue(s),"reChange"==this.props.UIType){var l=e.arr2Obj(this.props.beforeRechangeValue[this.props.data.elements.single.code]),o=this.state.postValue[this.props.data.elements.single.code];e.detectRechangeState(l,o)}var d={},u="";for(var c in r)u+=r[c].TravellerName+"，";d[this.props.data.elements.single.code]={title:this.props.data.elements.single.title,str:u},this.updateCopyObj(d);var m=p.default.findDOMNode(this);$(m).bind("addone",function(t,a){e.state.postValue[e.props.data.elements.single.code],e.props.basePeopleNum;if("reChange"==e.props.UIType){var s=e.arr2Obj(e.props.beforeRechangeValue[e.props.data.elements.single.code]);e.detectRechangeState(s,e.arr2Obj(a))}var r={};for(var i in a)r[a[i].personID]=a[i];var n=new Object;n[e.props.data.elements.single.code]=r,e.setState({postValue:n},function(){this.upadteToForm(this.getdUpdateData()),this.detectValueState(this.makeArray(this.state.postValue[this.props.data.elements.single.code]));var e=this.props.suborderid,t=this.props.componentid,a={};a[e]={},a[e][t]=this.state.postValue,this.props.recievePeson(a);var a={};a[this.props.suborderid]=new Object;var s=this.state.postValue[this.props.data.elements.single.code],r=new Object;r.type="PersonPicker",r.value=new Array;for(var i in s)r.value.push(s[i]);a[this.props.suborderid][this.props.data.elements.single.code]=r,this.props.reciveTempValue(a);var n={},l="";for(var o in s)l+=s[o].TravellerName+"，";n[this.props.data.elements.single.code]={title:this.props.data.elements.single.title,str:l},this.updateCopyObj(n)})}).bind("delete",function(t,a){var s=e.state.postValue[e.props.data.elements.single.code];for(var r in a)a[r].TravellerID in s&&delete s[a[r].TravellerID];var i=new Array;for(var n in s)i.push(s[n]);$(m).trigger("addone",[i])})},click:function(e){var t=this.props.data.elements.single.code,a=$(e.target).parent().attr("data-index"),s=this.state;delete s.postValue[t][a];this.setState(s,function(){this.upadteToForm(this.getdUpdateData());var e=this.props.suborderid,t=this.props.componentid,a={};a[e]={},a[e][t]=this.state.postValue,this.props.recievePeson(a),this.detectValueState(this.makeArray(this.state.postValue[this.props.data.elements.single.code]));var a={};a[this.props.suborderid]=new Object;var s=this.state.postValue[this.props.data.elements.single.code],r=new Object;r.type="PersonPicker",r.value=new Array;for(var i in s)r.value.push(s[i]);a[this.props.suborderid][this.props.data.elements.single.code]=r,this.props.reciveTempValue(a);var n={},l="";for(var o in s)l+=s[o].TravellerName+"，";n[this.props.data.elements.single.code]={title:this.props.data.elements.single.title,str:l},this.updateCopyObj(n)})},renderSelected:function(e){var t=this,a=[];for(var s in e){var r=e[s].Birthday,i=r.split("T")[0].split("-"),r=new Date(i[0],i[1]-1,i[2],0,0,0),n=new Date,o=n.getFullYear()-r.getFullYear(),p=r.getMonth(),d=r.getDate(),u=n.getMonth(),c=n.getDate(),m=!1;parseInt(u)<parseInt(p)||(parseInt(u)==parseInt(p)?parseInt(c)>=parseInt(d)&&(m=!0):m=!0);var h=parseInt(o);m||(h-=1);var f="one",v=h,g="age ";t.props.isForCusClient===!0?g+=" hidden":(f+=1==e[s].TravellerSex?" female":" male",g+=h>=60?" highlight age-gt-60":h>=12&&h<60?" highlight  adult":h>=4&&h<12?" highlight child":" highlight age-lt-4"),a.push(l.default.createElement("span",{"data-index":s,id:e[s].personID,key:e[s].personID,className:f},l.default.createElement("span",{className:"altname"},e[s].text),l.default.createElement("span",{className:g},v),l.default.createElement("span",{className:"delete",title:"取消选择",onClick:this.click},"×")))}return l.default.createElement("span",{className:"formselecttelist"},a)},render:function(){var e=this.props.suborderid,t=this.props.componentid,a=this.props.data.elements.single.code,s=new Object;if("ageMinChecked"in this.props.data?(this.props.data.ageMinChecked?s.ageMin=this.props.data.ageMin:s.ageMin=-1,this.props.data.ageMaxChecked?s.ageMax=this.props.data.ageMax:s.ageMax=-1):(s.ageMin=-1,s.ageMax=-1),"edit"==this.props.UIType)return l.default.createElement("div",{ref:"forceUpdate",className:"form-group addpersons forceUpdate-peoplenum","data-suborderid":e,"data-componentid":t,"data-segmentcode":a},l.default.createElement(u.default,{params:{isMust:1==this.props.data.mandatory,title:this.props.data.elements.single.title,reactType:"personpicker",selectednum:this.state.selectednum}}),l.default.createElement("div",{className:"col-md-10"},l.default.createElement("span",{className:"formbuttonwrapper"},l.default.createElement("a",{id:"addpersons","data-needextrainfo":this.props.data.needExtraInfo,"data-selected":(0,i.default)(this.state.postValue),"data-agerange":(0,i.default)(s),className:"btn btn-sm btn-primary button70","data-toggle":"modal","data-target":"#personlist"},"选择")),this.renderSelected(this.state.postValue[a]),l.default.createElement("span",{className:this.state.classname},this.state.tips)));if("reChange"==this.props.UIType){this.prehandledata(this.props.beforeRechangeValue)[this.props.data.elements.single.code],this.prehandledata(this.state.postValue)[this.props.data.elements.single.code];return l.default.createElement("tbody",{ref:"forceUpdate",className:"forceUpdate-peoplenum"},l.default.createElement("tr",{className:"addpersons"},l.default.createElement("td",null,l.default.createElement(m.default,{params:{isMust:1==this.props.data.mandatory,title:this.props.data.elements.single.title}})),l.default.createElement("td",null,this.getDefaultValue()[this.props.data.elements.single.code].length,"人"),l.default.createElement("td",null,l.default.createElement("span",{className:"formbuttonwrapper"},l.default.createElement("a",{id:"addpersons","data-agerange":(0,i.default)(s),"data-needextrainfo":this.props.data.needExtraInfo,"data-selected":(0,i.default)(this.state.postValue),className:"btn btn-sm btn-primary button70"}," 选择")),l.default.createElement("div",null,l.default.createElement("span",{className:this.state.classname},this.state.tips)))))}}});t.default=v},function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(25),i=s(r),n=a(26),l=(s(n),a(28)),o=s(l),p=a(29),d=s(p),u=a(30),c=s(u),m=i.default.createClass({displayName:"Hotel_name_zone_telRow",prehandledata:function(e){if("emptyrow"==e){var t=this.props.data.elements,a=new Object;return a[t.area.code]={value:-1,hotelAreaName:"",AreaEnName:""},a[t.name.code]="",a[t.tel.code]="","address"in t&&(a[t.address.code]=""),a}return e},prehandleupdatedata:function(e){return e},mixins:[c.default],isPropertyHotelName:function(e){var t="^[^一-龥]+$",a=new RegExp(t);return!!a.test(e)},isPropertyTel:function(e){var t="^[0-9-+()（） ]+$",a=new RegExp(t);return!!a.test(e)},detectValueState:function(e,t,a,s){var r=1,i=1,n=1,l=1,o=1,p=1,d=1,u=1,c="",m="",h="",f="",v="",g="",b="",y="";if(e)if(this.isPropertyHotelName(e)){m="help-inline",c=this.props.data.elements.name.tips;var r=1,i=1}else{m="help-inline tips",c="请填写正确的"+this.props.data.elements.name.title+"不要中文！";var r=0,i=1}else{m="help-inline tips",c="请填写正确的"+this.props.data.elements.name.title+"不要中文！";var r=0,i=0}if(t)if(this.isPropertyTel(t)){f="help-inline",h=this.props.data.elements.tel.tips;var n=1,l=1}else{f="help-inline tips",h="请填写有效的"+this.props.data.elements.tel.title+"!";var n=0,l=1}else{f="help-inline tips",h="请填写有效的"+this.props.data.elements.tel.title+"!";var n=0,l=0}if(a&&a!=-1){g="help-inline",v=this.props.data.elements.area.tips;var o=1,p=1}else{g="help-inline tips",v="请选择酒店所在区域！";var o=0,p=0}if("address"in this.props.data.elements)if(s){y="help-inline",b=this.props.data.elements.address.tips;var d=1,u=1}else{y="help-inline tips",b="请填写"+this.props.data.elements.address.title;var d=0,u=0}this.props.limit!==!1&&"2"!=this.props.data.mandatory||(c=this.props.data.elements.name.tips,m="",h=this.props.data.elements.tel.tips,f="",v=this.props.data.elements.area.tips,g="","address"in this.props.data.elements&&(b=this.props.data.elements.address.tips,y=""));var E={nametips:c,nameclassname:m,teltips:h,telclassname:f,zonetips:v,zoneclassname:g};"address"in this.props.data.elements&&(E.addresstips=b,E.addressclassname=y),this.setState(E);var V=new Object;V[this.props.suborderid]=new Object,V[this.props.suborderid][this.props.data.elements.name.code]=new Object,V[this.props.suborderid][this.props.data.elements.name.code].isValueUseAble=r,V[this.props.suborderid][this.props.data.elements.name.code].isValueNotEmpty=i,V[this.props.suborderid][this.props.data.elements.name.code].isValueMandatory=this.props.data.mandatory,V[this.props.suborderid][this.props.data.elements.tel.code]=new Object,V[this.props.suborderid][this.props.data.elements.tel.code].isValueUseAble=n,V[this.props.suborderid][this.props.data.elements.tel.code].isValueNotEmpty=l,V[this.props.suborderid][this.props.data.elements.tel.code].isValueMandatory=this.props.data.mandatory,V[this.props.suborderid][this.props.data.elements.area.code]=new Object,V[this.props.suborderid][this.props.data.elements.area.code].isValueUseAble=o,V[this.props.suborderid][this.props.data.elements.area.code].isValueNotEmpty=p,V[this.props.suborderid][this.props.data.elements.area.code].isValueMandatory=this.props.data.mandatory,"address"in this.props.data.elements&&(V[this.props.suborderid][this.props.data.elements.address.code]=new Object,V[this.props.suborderid][this.props.data.elements.address.code].isValueUseAble=d,V[this.props.suborderid][this.props.data.elements.address.code].isValueNotEmpty=u,V[this.props.suborderid][this.props.data.elements.address.code].isValueMandatory=this.props.data.mandatory),this.props.reciveValueState(V)},detectValueWhenMounted:function(){if("emptyrow"==this.getDefaultValue()){var e=this;this.setState({nametips:this.props.data.elements.name.tips,nameclassname:"help-inline",teltips:this.props.data.elements.tel.tips,telclassname:"help-inline",zonetips:this.props.data.elements.area.tips,zoneclassname:"help-inline",addresstips:function(){return"address"in e.props.data.elements?e.props.data.elements.address.tips:""}(),addressclassname:"help-inline"});var t=new Object;t[this.props.suborderid]=new Object,t[this.props.suborderid][this.props.data.elements.name.code]=new Object,t[this.props.suborderid][this.props.data.elements.name.code].isValueUseAble=0,t[this.props.suborderid][this.props.data.elements.name.code].isValueNotEmpty=0,t[this.props.suborderid][this.props.data.elements.name.code].isValueMandatory=this.props.data.mandatory,t[this.props.suborderid][this.props.data.elements.tel.code]=new Object,t[this.props.suborderid][this.props.data.elements.tel.code].isValueUseAble=0,t[this.props.suborderid][this.props.data.elements.tel.code].isValueNotEmpty=0,t[this.props.suborderid][this.props.data.elements.tel.code].isValueMandatory=this.props.data.mandatory,t[this.props.suborderid][this.props.data.elements.area.code]=new Object,t[this.props.suborderid][this.props.data.elements.area.code].isValueUseAble=0,t[this.props.suborderid][this.props.data.elements.area.code].isValueNotEmpty=0,t[this.props.suborderid][this.props.data.elements.area.code].isValueMandatory=this.props.data.mandatory,"address"in this.props.data.elements&&(t[this.props.suborderid][this.props.data.elements.address.code]=new Object,t[this.props.suborderid][this.props.data.elements.address.code].isValueUseAble=0,t[this.props.suborderid][this.props.data.elements.address.code].isValueNotEmpty=0,t[this.props.suborderid][this.props.data.elements.address.code].isValueMandatory=this.props.data.mandatory),this.props.reciveValueState(t)}else{var a="";if("address"in this.props.data.elements)var a=this.state.postValue[this.props.data.elements.address.code];this.detectValueState(this.state.postValue[this.props.data.elements.name.code],this.state.postValue[this.props.data.elements.tel.code],this.state.postValue[this.props.data.elements.area.code].value,a)}},getInitialState:function(){return{areas:[]}},componentDidMount:function(){this.detectValueWhenMounted();var e=this,t=e.state.postValue[e.props.data.elements.area.code].value,a=t==-1?"":e.state.postValue[e.props.data.elements.area.code].AreaEnName,s={};s[e.props.suborderid]=new Object,s[e.props.suborderid][e.props.data.elements.name.code]=e.state.postValue[e.props.data.elements.name.code],s[e.props.suborderid][e.props.data.elements.tel.code]=e.state.postValue[e.props.data.elements.tel.code];var r=e.props.data.elements;"address"in r&&(s[e.props.suborderid][e.props.data.elements.address.code]=e.state.postValue[e.props.data.elements.address.code]),s[e.props.suborderid][e.props.data.elements.area.code]=a,e.props.reciveTempValue(s);var i={};i[e.props.data.elements.name.code]={title:e.props.data.elements.name.title,str:e.state.postValue[e.props.data.elements.name.code]},i[e.props.data.elements.tel.code]={title:e.props.data.elements.tel.title,str:e.state.postValue[e.props.data.elements.tel.code]},i[e.props.data.elements.area.code]={title:e.props.data.elements.area.title,str:a},"address"in r&&(i[e.props.data.elements.address.code]={title:e.props.data.elements.address.title,str:e.state.postValue[e.props.data.elements.address.code]}),e.updateCopyObj(i);var n=this.props.data.areaID;$.ajax({url:"/Hotals/GetArea",type:"get",dataType:"json",data:{CityID:n},success:function(t){200==t.ErrorCode&&e.setState({areas:t.area},function(){var a=e.prehandledata(e.props.beforeRechangeValue),s=e.prehandledata(e.state.postValue);if("reChange"==this.props.UIType)if(a[e.props.data.elements.area.code].value==s[e.props.data.elements.area.code].value)var r=-1;else{var r=s[e.props.data.elements.area.code].value,i=!1;for(var n in t.area)if(parseInt(t.area[n].AreaID)===parseInt(r)){i=!0;break}i===!1&&parseInt(r)!==-1&&("address"in e.props.data.elements?e.detectValueState(e.state.postValue[e.props.data.elements.name.code],e.state.postValue[e.props.data.elements.tel.code],-1,e.state.postValue[e.props.data.elements.address.code]):e.detectValueState(e.state.postValue[e.props.data.elements.name.code],e.state.postValue[e.props.data.elements.tel.code],-1),r=-1)}else{var r=s[e.props.data.elements.area.code].value,i=!1;for(var n in t.area)if(parseInt(t.area[n].AreaID)===parseInt(r)){i=!0;break}i===!1&&parseInt(r)!==-1&&("address"in e.props.data.elements?e.detectValueState(e.state.postValue[e.props.data.elements.name.code],e.state.postValue[e.props.data.elements.tel.code],-1,e.state.postValue[e.props.data.elements.address.code]):e.detectValueState(e.state.postValue[e.props.data.elements.name.code],e.state.postValue[e.props.data.elements.tel.code],-1),r=-1)}$(e.refs.area).val(r)})}});var l=new Bloodhound({datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.HotalName)},queryTokenizer:Bloodhound.tokenizers.whitespace,limit:15,remote:{wildcard:"%QUERY",url:window.location.origin+"/Hotals/GetHotal?CityID="+n+"&Str=%QUERY",filter:function(e){return e.hotals.map(function(e){return{AreaName:e.HotalName,tel:e.HotalPhone,AreaID:e.AreaID,hotelAreaName:e.HotalArea.AreaName,AreaEnName:e.HotalArea.AreaEnName,address:e.HotalAddress}})}}});l.initialize(),$(this.refs.name).typeahead({hint:!1,highlight:!0,minLength:1,classNames:{menu:function(){var e=$(document).width();return e<500?"tt-menu tt-menu-top":"tt-menu"}()}},{name:"xxx",displayKey:"AreaName",limit:30,source:l,templates:{header:function(e){return['<div class="empty-message">',"共搜索到<strong>"+e.suggestions.length+"</strong>个酒店","</div>"].join("\n")}}}).bind("typeahead:select",function(t,a){var s=e.props.data.elements;$(e.refs.tel).val(a.tel),$(e.refs.area).val(a.AreaID),$(e.refs.address).val(a.address);var r=new Object;r[s.area.code]={value:a.AreaID,hotelAreaName:a.hotelAreaName,AreaEnName:a.AreaEnName},r[s.name.code]=a.AreaName,r[s.tel.code]=a.tel;var s=e.props.data.elements,i="";if("address"in s&&(r[s.address.code]=$(e.refs.address).val(),i=$(e.refs.address).val()),"reChange"==e.props.UIType){var n=e.prehandledata(e.props.beforeRechangeValue);r[s.name.code]||(r[e.props.data.elements.name.code]=n[e.props.data.elements.name.code]),r[s.tel.code]||(r[e.props.data.elements.tel.code]=n[e.props.data.elements.tel.code]),r[s.area.code].value==-1&&(r[e.props.data.elements.name.code]=n[e.props.data.elements.name.code]),"address"in s&&(r[s.address.code]||(r[e.props.data.elements.address.code]=n[e.props.data.elements.address.code],i=n[e.props.data.elements.address.code]))}e.detectValueState(r[s.name.code],r[s.tel.code],r[s.area.code].value,i),e.setState({postValue:r},function(){var e=this;this.upadteToForm(this.getdUpdateData());var t=this.state.postValue[this.props.data.elements.area.code].value,a=t==-1?"":this.state.postValue[this.props.data.elements.area.code].AreaEnName,s={};s[this.props.suborderid]=new Object,s[this.props.suborderid][this.props.data.elements.name.code]=this.state.postValue[this.props.data.elements.name.code],s[this.props.suborderid][this.props.data.elements.tel.code]=this.state.postValue[this.props.data.elements.tel.code];var r=this.props.data.elements;"address"in r&&(s[this.props.suborderid][this.props.data.elements.address.code]=this.state.postValue[this.props.data.elements.address.code]),s[this.props.suborderid][this.props.data.elements.area.code]=a,this.props.reciveTempValue(s);var i={};i[e.props.data.elements.name.code]={title:e.props.data.elements.name.title,str:e.state.postValue[e.props.data.elements.name.code]},i[e.props.data.elements.tel.code]={title:e.props.data.elements.tel.title,str:e.state.postValue[e.props.data.elements.tel.code]},i[e.props.data.elements.area.code]={title:e.props.data.elements.area.title,str:a},"address"in r&&(i[e.props.data.elements.address.code]={title:e.props.data.elements.address.title,str:e.state.postValue[e.props.data.elements.address.code]}),e.updateCopyObj(i)})})},namechange:function(e){var t={},a=e.target.value,s=this.state.postValue;t[this.props.data.elements.name.code]=a,t=$.extend(!0,new Object,s,t);
var r="",i=this.props.data.elements;"address"in i&&(r=t[i.address.code]);var n=this.prehandledata(this.props.beforeRechangeValue);"reChange"==this.props.UIType&&(t[i.name.code]||(t[this.props.data.elements.name.code]=n[this.props.data.elements.name.code]),t[i.tel.code]||(t[this.props.data.elements.tel.code]=n[this.props.data.elements.tel.code]),t[i.area.code].value==-1&&(t[this.props.data.elements.name.code]=n[this.props.data.elements.name.code]),"address"in i&&(t[i.address.code]||(t[this.props.data.elements.address.code]=n[this.props.data.elements.address.code],r=n[this.props.data.elements.address.code]))),this.detectValueState(t[i.name.code],t[i.tel.code],t[i.area.code].value,r),this.setState({postValue:t},function(){var e=this;this.upadteToForm(this.getdUpdateData());var t=this.state.postValue[this.props.data.elements.area.code].value,a=t==-1?"":this.state.postValue[this.props.data.elements.area.code].AreaEnName,s={};s[this.props.suborderid]=new Object,s[this.props.suborderid][this.props.data.elements.name.code]=this.state.postValue[this.props.data.elements.name.code],s[this.props.suborderid][this.props.data.elements.tel.code]=this.state.postValue[this.props.data.elements.tel.code];var r=this.props.data.elements;"address"in r&&(s[this.props.suborderid][this.props.data.elements.address.code]=this.state.postValue[this.props.data.elements.address.code]),s[this.props.suborderid][this.props.data.elements.area.code]=a,this.props.reciveTempValue(s);var i={};i[e.props.data.elements.name.code]={title:e.props.data.elements.name.title,str:e.state.postValue[e.props.data.elements.name.code]},i[e.props.data.elements.tel.code]={title:e.props.data.elements.tel.title,str:e.state.postValue[e.props.data.elements.tel.code]},i[e.props.data.elements.area.code]={title:e.props.data.elements.area.title,str:a},"address"in r&&(i[e.props.data.elements.address.code]={title:e.props.data.elements.address.title,str:e.state.postValue[e.props.data.elements.address.code]}),e.updateCopyObj(i)})},telchange:function(e){var t={},a=e.target.value,s=this.state.postValue;t[this.props.data.elements.tel.code]=a,t=$.extend(!0,new Object,s,t);var r="",i=this.props.data.elements;"address"in i&&(r=t[i.address.code]);var n=this.prehandledata(this.props.beforeRechangeValue);"reChange"==this.props.UIType&&(t[i.name.code]||(t[this.props.data.elements.name.code]=n[this.props.data.elements.name.code]),t[i.tel.code]||(t[this.props.data.elements.tel.code]=n[this.props.data.elements.tel.code]),t[i.area.code].value==-1&&(t[this.props.data.elements.name.code]=n[this.props.data.elements.name.code]),"address"in i&&(t[i.address.code]||(t[this.props.data.elements.address.code]=n[this.props.data.elements.address.code],r=n[this.props.data.elements.address.code]))),this.detectValueState(t[i.name.code],t[i.tel.code],t[i.area.code].value,r),this.setState({postValue:t},function(){var e=this;this.upadteToForm(this.getdUpdateData());var t=this.state.postValue[this.props.data.elements.area.code].value,a=t==-1?"":this.state.postValue[this.props.data.elements.area.code].AreaEnName,s={};s[this.props.suborderid]=new Object,s[this.props.suborderid][this.props.data.elements.name.code]=this.state.postValue[this.props.data.elements.name.code],s[this.props.suborderid][this.props.data.elements.tel.code]=this.state.postValue[this.props.data.elements.tel.code];var r=this.props.data.elements;"address"in r&&(s[this.props.suborderid][this.props.data.elements.address.code]=this.state.postValue[this.props.data.elements.address.code]),s[this.props.suborderid][this.props.data.elements.area.code]=a,this.props.reciveTempValue(s);var i={};i[e.props.data.elements.name.code]={title:e.props.data.elements.name.title,str:e.state.postValue[e.props.data.elements.name.code]},i[e.props.data.elements.tel.code]={title:e.props.data.elements.tel.title,str:e.state.postValue[e.props.data.elements.tel.code]},i[e.props.data.elements.area.code]={title:e.props.data.elements.area.title,str:a},"address"in r&&(i[e.props.data.elements.address.code]={title:e.props.data.elements.address.title,str:e.state.postValue[e.props.data.elements.address.code]}),e.updateCopyObj(i)})},addresschange:function(e){var t={},a=e.target.value,s=this.state.postValue;t[this.props.data.elements.address.code]=a,t=$.extend(!0,new Object,s,t);var r="",i=this.props.data.elements;"address"in i&&(r=t[i.address.code]);var n=this.prehandledata(this.props.beforeRechangeValue);"reChange"==this.props.UIType&&(t[i.name.code]||(t[this.props.data.elements.name.code]=n[this.props.data.elements.name.code]),t[i.tel.code]||(t[this.props.data.elements.tel.code]=n[this.props.data.elements.tel.code]),t[i.area.code].value==-1&&(t[this.props.data.elements.name.code]=n[this.props.data.elements.name.code]),"address"in i&&(t[i.address.code]||(t[this.props.data.elements.address.code]=n[this.props.data.elements.address.code],r=n[this.props.data.elements.address.code]))),this.detectValueState(t[i.name.code],t[i.tel.code],t[i.area.code].value,r),this.setState({postValue:t},function(){var e=this;this.upadteToForm(this.getdUpdateData());var t=this.state.postValue[this.props.data.elements.area.code].value,a=t==-1?"":this.state.postValue[this.props.data.elements.area.code].AreaEnName,s={};s[this.props.suborderid]=new Object,s[this.props.suborderid][this.props.data.elements.name.code]=this.state.postValue[this.props.data.elements.name.code],s[this.props.suborderid][this.props.data.elements.tel.code]=this.state.postValue[this.props.data.elements.tel.code],s[this.props.suborderid][this.props.data.elements.address.code]=this.state.postValue[this.props.data.elements.address.code],s[this.props.suborderid][this.props.data.elements.area.code]=a,this.props.reciveTempValue(s);var r={};r[e.props.data.elements.name.code]={title:e.props.data.elements.name.title,str:e.state.postValue[e.props.data.elements.name.code]},r[e.props.data.elements.tel.code]={title:e.props.data.elements.tel.title,str:e.state.postValue[e.props.data.elements.tel.code]},r[e.props.data.elements.area.code]={title:e.props.data.elements.area.title,str:a},r[e.props.data.elements.address.code]={title:e.props.data.elements.address.title,str:e.state.postValue[e.props.data.elements.address.code]},e.updateCopyObj(r)})},selectchange:function(e){var t={},a=e.target.value,s=$(e.target).find("option:selected").text().split("-")[0],r=this.state.postValue;t[this.props.data.elements.area.code]={value:a,AreaEnName:s},t=$.extend(!0,new Object,r,t);var i="",n=this.props.data.elements;"address"in n&&(i=t[n.address.code]);var l=this.prehandledata(this.props.beforeRechangeValue);"reChange"==this.props.UIType&&(t[n.name.code]||(t[this.props.data.elements.name.code]=l[this.props.data.elements.name.code]),t[n.tel.code]||(t[this.props.data.elements.tel.code]=l[this.props.data.elements.tel.code]),t[n.area.code].value==-1&&(t[this.props.data.elements.area.code]=l[this.props.data.elements.area.code]),"address"in n&&(t[n.address.code]||(t[this.props.data.elements.address.code]=l[this.props.data.elements.address.code],i=l[this.props.data.elements.address.code]))),this.detectValueState(t[n.name.code],t[n.tel.code],t[n.area.code].value,i),this.setState({postValue:t},function(){var e=this;this.upadteToForm(this.getdUpdateData());var t=this.state.postValue[this.props.data.elements.area.code].value,a=t==-1?"":this.state.postValue[this.props.data.elements.area.code].AreaEnName,s={};s[this.props.suborderid]=new Object,s[this.props.suborderid][this.props.data.elements.name.code]=this.state.postValue[this.props.data.elements.name.code],s[this.props.suborderid][this.props.data.elements.tel.code]=this.state.postValue[this.props.data.elements.tel.code];var r=this.props.data.elements;"address"in r&&(s[this.props.suborderid][this.props.data.elements.address.code]=this.state.postValue[this.props.data.elements.address.code]),s[this.props.suborderid][this.props.data.elements.area.code]=a,this.props.reciveTempValue(s);var i={};i[e.props.data.elements.name.code]={title:e.props.data.elements.name.title,str:e.state.postValue[e.props.data.elements.name.code]},i[e.props.data.elements.tel.code]={title:e.props.data.elements.tel.title,str:e.state.postValue[e.props.data.elements.tel.code]},i[e.props.data.elements.area.code]={title:e.props.data.elements.area.title,str:a},"address"in r&&(i[e.props.data.elements.address.code]={title:e.props.data.elements.address.title,str:e.state.postValue[e.props.data.elements.address.code]}),e.updateCopyObj(i)})},renderselect:function(e,t){var a=new Array(i.default.createElement("option",{key:-1,value:"-1"},"请选择"));return a.concat(e.map(function(e,t){return i.default.createElement("option",{key:t,value:e.AreaID},e.AreaEnName,"-",e.AreaName)}))},renderAddress:function(e){var t=this.props.suborderid,a=this.props.componentid,s=this.props.data.elements;if("address"in s){if("edit"==this.props.UIType)return i.default.createElement("div",{className:"form-group","data-suborderid":t,"data-componentid":a,"data-segmentcode":s.address.code},i.default.createElement(o.default,{params:{isMust:1==this.props.data.mandatory,title:s.address.title}}),i.default.createElement("div",{className:"col-md-10"},i.default.createElement("input",{type:"text",ref:"address",className:"form-control input-inline input-sm input-medium",defaultValue:this.state.postValue[s.address.code],onChange:this.addresschange,placeholder:""}),i.default.createElement("span",{className:this.state.addressclassname},this.state.addresstips)));if("reChange"==this.props.UIType)return i.default.createElement("tr",null,i.default.createElement("td",null,i.default.createElement(d.default,{params:{isMust:1==this.props.data.mandatory,title:s.address.title}})),i.default.createElement("td",null,this.getDefaultValue()[this.props.data.elements.address.code]),i.default.createElement("td",null,i.default.createElement("input",{type:"text",ref:"address",defaultValue:e,className:"form-control input-inline input-sm input-medium",onChange:this.addresschange,placeholder:""})))}},render:function(){var e=this.props.data,t=this.props.data.elements.name,a=this.props.data.elements.tel,s=this.props.data.elements.area,r=(e.areaID,this.props.suborderid),n=this.props.componentid;if("edit"==this.props.UIType)return i.default.createElement("div",null,i.default.createElement("div",{className:"form-group","data-suborderid":r,"data-componentid":n,"data-segmentcode":t.code},i.default.createElement(o.default,{params:{isMust:1==e.mandatory,title:t.title}}),i.default.createElement("div",{className:"col-md-10"},i.default.createElement("input",{type:"text",ref:"name",className:"form-control input-inline input-medium  input-sm",defaultValue:this.state.postValue[t.code],onChange:this.namechange,placeholder:"输入酒店名字或搜索"}),i.default.createElement("span",{className:this.state.nameclassname},"  ",this.state.nametips))),i.default.createElement("div",{className:"form-group","data-suborderid":r,"data-componentid":n,"data-segmentcode":a.code},i.default.createElement(o.default,{params:{isMust:1==e.mandatory,title:a.title}}),i.default.createElement("div",{className:"col-md-10"},i.default.createElement("input",{type:"text",ref:"tel",className:"form-control input-inline input-medium  input-sm",defaultValue:this.state.postValue[a.code],onChange:this.telchange,placeholder:"输入酒店电话"}),i.default.createElement("span",{className:this.state.telclassname},this.state.teltips))),i.default.createElement("div",{className:"form-group","data-suborderid":r,"data-componentid":n,"data-segmentcode":s.code},i.default.createElement(o.default,{params:{isMust:1==e.mandatory,title:s.title}}),i.default.createElement("div",{className:"col-md-10"},i.default.createElement("select",{ref:"area",onChange:this.selectchange,className:"form-control input-inline input-sm input-medium"},this.renderselect(this.state.areas)),i.default.createElement("span",{className:this.state.zoneclassname},this.state.zonetips))),this.renderAddress());if("reChange"==this.props.UIType){var l,p,u,c,m,h,f,v,g=this.prehandledata(this.props.beforeRechangeValue),l=0,p="",u=0,c="",m=0,h="",f=0,v="";if(g[t.code]==this.state.postValue[t.code]||""==this.state.postValue[t.code]?(l=0,p=""):(l=1,p=this.state.postValue[t.code]),g[a.code]==this.state.postValue[a.code]||""==this.state.postValue[a.code]?(u=0,c=""):(u=1,c=this.state.postValue[a.code]),g[s.code].value==this.state.postValue[s.code].value?m=0:(m=1,h=this.state.postValue[s.code].value),"address"in this.props.data.elements){var b=this.props.data.elements.address;g[b.code]==this.state.postValue[b.code]||""==this.state.postValue[b.code]?(f=0,v=""):(f=1,v=this.state.postValue[b.code])}var y=new Object;return y[this.props.suborderid]=new Object,y[this.props.suborderid][this.props.data.elements.name.code]=new Object,y[this.props.suborderid][this.props.data.elements.name.code].isValueChange=l,y[this.props.suborderid][this.props.data.elements.tel.code]=new Object,y[this.props.suborderid][this.props.data.elements.tel.code].isValueChange=u,y[this.props.suborderid][this.props.data.elements.area.code]=new Object,y[this.props.suborderid][this.props.data.elements.area.code].isValueChange=m,"address"in this.props.data.elements&&(y[this.props.suborderid][this.props.data.elements.address.code]=new Object,y[this.props.suborderid][this.props.data.elements.address.code].isValueChange=f),this.props.reciveValueChange(y),i.default.createElement("tbody",null,i.default.createElement("tr",null,i.default.createElement("td",null,i.default.createElement(d.default,{params:{isMust:1==e.mandatory,title:t.title}})),i.default.createElement("td",null,this.getDefaultValue()[this.props.data.elements.name.code]),i.default.createElement("td",null,i.default.createElement("input",{type:"text",ref:"name",className:"form-control input-inline input-medium  input-sm",defaultValue:p,onChange:this.namechange,placeholder:"输入酒店名字或搜索"}),i.default.createElement("div",null," ",i.default.createElement("span",{className:this.state.nameclassname},"  ",this.state.nametips)))),i.default.createElement("tr",null,i.default.createElement("td",null,i.default.createElement(d.default,{params:{isMust:1==e.mandatory,title:a.title}})),i.default.createElement("td",null,this.getDefaultValue()[this.props.data.elements.tel.code]),i.default.createElement("td",null,i.default.createElement("input",{type:"text",ref:"tel",className:"form-control input-inline input-medium  input-sm",defaultValue:c,onChange:this.telchange,placeholder:"输入酒店电话"}),i.default.createElement("div",null,i.default.createElement("span",{className:this.state.telclassname},this.state.teltips)))),i.default.createElement("tr",null,i.default.createElement("td",null,i.default.createElement(d.default,{params:{isMust:1==e.mandatory,title:s.title}})),i.default.createElement("td",null,this.getDefaultValue()[this.props.data.elements.area.code].hotelAreaName),i.default.createElement("td",null,i.default.createElement("select",{ref:"area",onChange:this.selectchange,className:"form-control input-inline input-sm input-medium"},this.renderselect(this.state.areas)),i.default.createElement("div",null,i.default.createElement("span",{className:this.state.zoneclassname},this.state.zonetips)))),this.renderAddress(v))}}});t.default=m},function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(25),i=s(r),n=a(26),l=(s(n),a(28)),o=s(l),p=a(29),d=s(p),u=a(30),c=s(u),m=i.default.createClass({displayName:"Date_setoutdate_returndateRow",prehandledata:function(e){if("emptyrow"==e){var t=this.props.data.elements,a=new Object;return a[t.setoutdate.code]="",a[t.returndate.code]="",a}return e},prehandleupdatedata:function(e){return e},mixins:[c.default],isDate:function(e,t){function a(e,t){return 4==t||6==t||9==t||11==t?"30":2==t?e%4==0&&e%100!=0||e%400==0?"29":"28":"31"}function s(e){var t="^[0-9]+$",a=new RegExp(t);return e.search(a)!=-1}null==t&&(t="yyyyMMdd");var r=t.indexOf("yyyy");if(r==-1)return!1;var i=e.substring(r,r+4),n=t.indexOf("MM");if(n==-1)return!1;var l=e.substring(n,n+2),o=t.indexOf("dd");if(o==-1)return!1;var p=e.substring(o,o+2);return!(!s(i)||i>"2100"||i<"1900")&&(!(!s(l)||l>"12"||l<"01")&&!(p>a(i,l)||p<"01"))},detectValueState:function(e,t){var a=1,s=1,r=1,i=1,n="",l="",o="",p="",d=parseInt(this.state.Nights),u=this.props.ServiceTypeID;if(e&&this.isDate(e,"yyyy-MM-dd")&&e&&this.isDate(t,"yyyy-MM-dd")){var c=new Date(e).valueOf(),m=new Date(t).valueOf(),h=24*d*60*60*1e3;if(m<c){if(a=0,r=0,s=1,i=1,p=this.props.data.elements.setoutdate.title+"小于"+this.props.data.elements.returndate.title,l=this.props.data.elements.setoutdate.title+"大于"+this.props.data.elements.returndate.title,o="help-inline tips",n="help-inline tips","reChange"==this.props.UIType){var f=this.prehandledata(this.props.beforeRechangeValue);e==f[this.props.data.elements.setoutdate.code]&&(l=this.props.data.elements.setoutdate.tips,n="help-inline"),t==f[this.props.data.elements.returndate.code]&&(p=this.props.data.elements.returndate.tips,o="help-inline")}}else c!=m-h&&0!=h&&4==u?(a=0,r=0,s=1,i=1,p=this.props.data.elements.setoutdate.title+"和"+this.props.data.elements.returndate.title+"应当相差"+d+"晚",l=this.props.data.elements.setoutdate.title+"和"+this.props.data.elements.returndate.title+"应当相差"+d+"晚",o="help-inline tips",n="help-inline tips"):(a=1,r=1,s=1,i=1,p=this.props.data.elements.returndate.tips,l=this.props.data.elements.setoutdate.tips,o="help-inline",n="help-inline")}else e?this.isDate(e,"yyyy-MM-dd")?(n="help-inline",l=this.props.data.elements.setoutdate.tips,a=1,s=1):(n="help-inline tips",l="请选择或填写正确的日期",a=0,s=1):(n="help-inline tips",l="请选择或填写正确的日期",a=0,s=0),t?this.isDate(t,"yyyy-MM-dd")?(o="help-inline",p=this.props.data.elements.setoutdate.tips,r=1,i=1):(o="help-inline tips",p="请选择或填写正确的日期",r=0,i=1):(o="help-inline tips",p="请选择或填写正确的日期",r=0,i=0);this.props.limit!==!1&&"2"!=this.props.data.mandatory||(n="help-inline",l=this.props.data.elements.setoutdate.tips,o="help-inline",p=this.props.data.elements.returndate.tips),this.setState({setoutclassname:n,setouttips:l,returnclassname:o,returntips:p});var v=new Object;v[this.props.suborderid]=new Object,v[this.props.suborderid][this.props.data.elements.setoutdate.code]=new Object,v[this.props.suborderid][this.props.data.elements.setoutdate.code].isValueUseAble=a,v[this.props.suborderid][this.props.data.elements.setoutdate.code].isValueNotEmpty=s,v[this.props.suborderid][this.props.data.elements.setoutdate.code].isValueMandatory=this.props.data.mandatory,v[this.props.suborderid][this.props.data.elements.returndate.code]=new Object,v[this.props.suborderid][this.props.data.elements.returndate.code].isValueUseAble=r,v[this.props.suborderid][this.props.data.elements.returndate.code].isValueNotEmpty=i,v[this.props.suborderid][this.props.data.elements.returndate.code].isValueMandatory=this.props.data.mandatory,this.props.data.elements.returndate.visible&&1!=this.props.ServiceTypeID||(v[this.props.suborderid][this.props.data.elements.returndate.code].tipsvisible=!1),this.props.reciveValueState(v)},detectValueWhenMounted:function(){if("emptyrow"==this.getDefaultValue()){this.setState({returnclassname:"help-inline",returntips:this.props.data.elements.setoutdate.tips,setoutclassname:"help-inline",setouttips:this.props.data.elements.setoutdate.tips});var e=new Object;e[this.props.suborderid]=new Object,e[this.props.suborderid][this.props.data.elements.setoutdate.code]=new Object,e[this.props.suborderid][this.props.data.elements.setoutdate.code].isValueUseAble=0,e[this.props.suborderid][this.props.data.elements.setoutdate.code].isValueNotEmpty=0,e[this.props.suborderid][this.props.data.elements.setoutdate.code].isValueMandatory=this.props.data.mandatory,e[this.props.suborderid][this.props.data.elements.returndate.code]=new Object,e[this.props.suborderid][this.props.data.elements.returndate.code].isValueUseAble=0,e[this.props.suborderid][this.props.data.elements.returndate.code].isValueNotEmpty=0,e[this.props.suborderid][this.props.data.elements.returndate.code].isValueMandatory=this.props.data.mandatory,this.props.data.elements.returndate.visible&&1!=this.props.ServiceTypeID||(e[this.props.suborderid][this.props.data.elements.returndate.code].tipsvisible=!1),this.props.reciveValueState(e)}else this.detectValueState(this.state.postValue[this.props.data.elements.setoutdate.code],this.state.postValue[this.props.data.elements.returndate.code])},getInitialState:function(){return{Nights:this.props.Nights}},componentDidMount:function(e){function t(e){$(this.refs.setoutdatepicker).datepicker({orientation:"top right",container:"#reactall",startDate:function(){if(u.props.isForCusClient){var e=parseInt(r.props.severTimeStamp),t=new Date(e);if(void 0!==e||null!==e){var a=new Date,s=a.valueOf();return Math.abs(e-s)>36e5?t:"+0d"}return"+0d"}return-(1/0)}(),beforeShowDay:function(t){var a=new Object;a.enabled=!0,a.classes="",a.tooltip="";for(var s in e){var r=e[s].StartTime.split("T")[0].split("-"),i=e[s].EndTime.split("T")[0].split("-"),n=new Date(r[0],r[1]-1,r[2],0,0,0).valueOf(),l=new Date(i[0],i[1]-1,i[2],0,0,0).valueOf(),o=t.valueOf(),p=0==e[s].RuleUseTypeValue;if(!(o>l||o<n))switch(e[s].SelectRuleType){case 0:var d=e[s].RangeStart.split("T")[0].split("-"),u=e[s].RangeEnd.split("T")[0].split("-"),c=new Date(d[0],d[1]-1,d[2],0,0,0).valueOf(),m=new Date(u[0],u[1]-1,u[2],0,0,0).valueOf(),h=!1;o<=m&&o>=c&&(h=!0);var f=p==h;f||(a.enabled=!1);break;case 1:var v=e[s].Week.split("|"),g=!1,b=t.getDay();for(var y in v)if(v[y]==b){g=!0;break}var f=p==g;f||(a.enabled=!1);break;case 2:p=p==e[s].IsDouble;var E=!1;t.getDate()%2==0&&(E=!0);var f=E==p;f||(a.enabled=!1);break;case 3:var V=e[s].UseDate.split("|"),N=t.getDate(),k=!1;for(var S in V)if(V[S]==N){k=!0;break}var f=p==k;f||(a.enabled=!1)}}return a.enabled||(a.classes="delete",a.tooltip=""),console.log(),a}})}function a(){$(this.refs.setoutdatepicker).datepicker({orientation:"top right",container:"#reactall",startDate:function(){return u.props.isForCusClient?"+0d":-(1/0)}()})}function s(){$(this.refs.setoutdatepicker).on("changeDate",function(e){var t=e.date?e.date.valueOf():"";if(""!=t)var a=new Date(t),s=a.getFullYear(),r=1==String(parseInt(a.getMonth())+1).length?"0"+String(parseInt(a.getMonth())+1):String(parseInt(a.getMonth())+1),i=1==String(parseInt(a.getDate())).length?"0"+String(parseInt(a.getDate())):String(parseInt(a.getDate())),n=s+"-"+r+"-"+i;else var n="";var l={},o=this.state.postValue;if(l[this.props.data.elements.setoutdate.code]=n,l[this.props.data.elements.returndate.code]=o[this.props.data.elements.returndate.code],!f){var p=n;if(""!=n){var d=0==this.props.fixedDays?0:parseInt(this.props.fixedDays)-1,u=24*d*60*60*1e3,c=e.date.valueOf(),m=c+u,h=new Date(m),v=h.getFullYear(),g=1==String(parseInt(h.getMonth())+1).length?"0"+String(parseInt(h.getMonth())+1):String(parseInt(h.getMonth())+1),b=1==String(parseInt(h.getDate())).length?"0"+String(parseInt(h.getDate())):String(parseInt(h.getDate()));p=v+"-"+g+"-"+b}l[this.props.data.elements.returndate.code]=p}if("reChange"==this.props.UIType){if(""==l[this.props.data.elements.setoutdate.code]){var y=this.prehandledata(this.props.beforeRechangeValue);l[this.props.data.elements.setoutdate.code]=y[this.props.data.elements.setoutdate.code]}if(""==l[this.props.data.elements.returndate.code]){var y=this.prehandledata(this.props.beforeRechangeValue);l[this.props.data.elements.returndate.code]=y[this.props.data.elements.returndate.code]}}this.detectValueState(l[this.props.data.elements.setoutdate.code],l[this.props.data.elements.returndate.code]),this.setState({postValue:l},function(){this.upadteToForm(this.getdUpdateData());var e=this.props.data.elements,t=this.state.postValue,a=new Object;a[this.props.suborderid]=new Object;for(var s in e)for(var r in e[s].systemFieldMap)a[this.props.suborderid][e[s].systemFieldMap[r].postKey]=t[e[s].code];this.props.recieveSystemFields(a);var i={};i[this.props.suborderid]=new Object,i[this.props.suborderid][this.props.data.elements.setoutdate.code]=this.state.postValue[this.props.data.elements.setoutdate.code],i[this.props.suborderid][this.props.data.elements.returndate.code]=this.state.postValue[this.props.data.elements.returndate.code],this.props.reciveTempValue(i);var n={};n[this.props.data.elements.setoutdate.code]={title:this.props.data.elements.setoutdate.title,str:this.state.postValue[this.props.data.elements.setoutdate.code]},f&&(n[this.props.data.elements.returndate.code]={title:this.props.data.elements.returndate.title,str:this.state.postValue[this.props.data.elements.returndate.code]}),this.updateCopyObj(n)})}.bind(this)).on("hide",function(){$(this.refs.setoutdatepicker).find("input").blur()}.bind(this)),f&&$(this.refs.returndatepicker).datepicker({orientation:"top right",container:"#reactall"}).on("changeDate",function(e){var t=e.date?e.date.valueOf():"";if(""!=t)var a=new Date(t),s=a.getFullYear(),r=1==String(parseInt(a.getMonth())+1).length?"0"+String(parseInt(a.getMonth())+1):String(parseInt(a.getMonth())+1),i=1==String(parseInt(a.getDate())).length?"0"+String(parseInt(a.getDate())):String(parseInt(a.getDate())),n=s+"-"+r+"-"+i;else var n="";var l={},o=this.state.postValue;if(l[this.props.data.elements.returndate.code]=n,l[this.props.data.elements.setoutdate.code]=o[this.props.data.elements.setoutdate.code],"reChange"==this.props.UIType){if(""==l[this.props.data.elements.setoutdate.code]){var p=this.prehandledata(this.props.beforeRechangeValue);l[this.props.data.elements.setoutdate.code]=p[this.props.data.elements.setoutdate.code]}if(""==l[this.props.data.elements.returndate.code]){var p=this.prehandledata(this.props.beforeRechangeValue);l[this.props.data.elements.returndate.code]=p[this.props.data.elements.returndate.code]}}this.detectValueState(l[this.props.data.elements.setoutdate.code],l[this.props.data.elements.returndate.code]),this.setState({postValue:l},function(){this.upadteToForm(this.getdUpdateData());var e=this.props.data.elements,t=this.state.postValue,a=new Object;a[this.props.suborderid]=new Object;for(var s in e)for(var r in e[s].systemFieldMap)a[this.props.suborderid][e[s].systemFieldMap[r].postKey]=t[e[s].code];this.props.recieveSystemFields(a);var i={};i[this.props.suborderid]=new Object,i[this.props.suborderid][this.props.data.elements.setoutdate.code]=this.state.postValue[this.props.data.elements.setoutdate.code],i[this.props.suborderid][this.props.data.elements.returndate.code]=this.state.postValue[this.props.data.elements.returndate.code],this.props.reciveTempValue(i);var n={};n[this.props.data.elements.setoutdate.code]={title:this.props.data.elements.setoutdate.title,str:this.state.postValue[this.props.data.elements.setoutdate.code]},n[this.props.data.elements.returndate.code]={title:this.props.data.elements.returndate.title,str:this.state.postValue[this.props.data.elements.returndate.code]},this.updateCopyObj(n)})}.bind(this)).on("hide",function(){$(this.refs.returndatepicker).find("input").blur()}.bind(this))}var r=this;$(this.refs.forceUpdate).bind("update",function(e,t){r.setState({Nights:t},function(){this.detectValueState(this.state.postValue[this.props.data.elements.setoutdate.code],this.state.postValue[this.props.data.elements.returndate.code])})});var i=this.props.data.elements,n=this.state.postValue,l=new Object;l[this.props.suborderid]=new Object;for(var o in i)for(var p in i[o].systemFieldMap)l[this.props.suborderid][i[o].systemFieldMap[p].postKey]=n[i[o].code];this.props.recieveSystemFields(l),this.detectValueWhenMounted();var d={};d[this.props.suborderid]=new Object,d[this.props.suborderid][this.props.data.elements.setoutdate.code]=this.state.postValue[this.props.data.elements.setoutdate.code],d[this.props.suborderid][this.props.data.elements.returndate.code]=this.state.postValue[this.props.data.elements.returndate.code],this.props.reciveTempValue(d);var u=this,c=u.props.ServiceTypeID,m=u.props.fixedDays,h=u.props.data.elements.returndate,f=!0;this.props.data.elements.returndate;2==c?0!=m&&(f=!1):h.visible&&1!=this.props.ServiceTypeID||(f=!1);var v={};v[this.props.data.elements.setoutdate.code]={title:this.props.data.elements.setoutdate.title,str:this.state.postValue[this.props.data.elements.setoutdate.code]},f&&(v[this.props.data.elements.returndate.code]={title:this.props.data.elements.returndate.title,str:this.state.postValue[this.props.data.elements.returndate.code]}),this.updateCopyObj(v),this.props.limit===!1?a.call(r):$.ajax({url:"/ServiceRules/GetRulesByItemID/"+this.props.serviceItemID,type:"get",dataType:"json",success:function(e){t.call(r,e)}}),s.call(r,f)},render:function(){var e=(this.props.data,this.props.suborderid),t=this.props.componentid,a=this.props.ServiceTypeID,s=this.props.fixedDays,r=this.props.data.elements.setoutdate,n=this.props.data.elements.returndate,l="form-group",p="";if(2==a?0!=s&&(l="form-group  hidden",p="hidden"):n.visible?1==this.props.ServiceTypeID&&(l="form-group  hidden",p="hidden"):(l="form-group  hidden",p="hidden"),"edit"==this.props.UIType)return i.default.createElement("div",{ref:"forceUpdate",className:"forceUpdate-setoutreturn"},i.default.createElement("div",{className:"form-group","data-suborderid":e,"data-componentid":t,"data-segmentcode":r.code},i.default.createElement(o.default,{params:{isMust:1==this.props.data.mandatory,title:this.props.data.elements.setoutdate.title}}),i.default.createElement("div",{className:"col-md-10"},i.default.createElement("div",{ref:"setoutdatepicker",className:"input-group input-medium  input-group-sm ddDatePicker date date-picker  "},i.default.createElement("input",{ref:"setoutdate",readOnly:!0,type:"text",className:"form-control input-medium input readOnlyDatePicker",defaultValue:this.state.postValue[r.code],onPaste:this.handlerChange}),i.default.createElement("span",{className:"input-group-btn"},i.default.createElement("button",{className:"btn default",type:"button"},i.default.createElement("i",{className:"fa fa-calendar"})))),i.default.createElement("span",{className:this.state.setoutclassname},this.state.setouttips))),i.default.createElement("div",{className:l,"data-suborderid":e,"data-componentid":t,"data-segmentcode":n.code},i.default.createElement(o.default,{params:{isMust:1==this.props.data.mandatory,title:this.props.data.elements.returndate.title}}),i.default.createElement("div",{className:"col-md-10"},i.default.createElement("div",{ref:"returndatepicker",className:"input-group input-medium  input-group-sm ddDatePicker date date-picker  "},i.default.createElement("input",{ref:"returndate",readOnly:!0,type:"text",className:"form-control input-medium readOnlyDatePicker",defaultValue:this.state.postValue[n.code],onPaste:this.handlerChange}),i.default.createElement("span",{className:"input-group-btn"},i.default.createElement("button",{className:"btn default",type:"button"},i.default.createElement("i",{className:"fa fa-calendar"})))),i.default.createElement("span",{className:this.state.returnclassname},this.state.returntips))));if("reChange"==this.props.UIType){var u=this.prehandledata(this.props.beforeRechangeValue),c=0,m=0,h="",f="";u==this.state.postValue?(c=0,m=0,h="",f=""):(u[r.code]==this.state.postValue[r.code]||""==this.state.postValue[r.code]?(c=0,h=""):(c=1,h=this.state.postValue[r.code]),u[n.code]==this.state.postValue[n.code]||""==this.state.postValue[r.code]?(m=0,f=""):(m=1,f=this.state.postValue[n.code]));var v=new Object;return v[this.props.suborderid]=new Object,v[this.props.suborderid][this.props.data.elements.setoutdate.code]=new Object,v[this.props.suborderid][this.props.data.elements.setoutdate.code].isValueChange=c,v[this.props.suborderid][this.props.data.elements.returndate.code]=new Object,v[this.props.suborderid][this.props.data.elements.returndate.code].isValueChange=m,this.props.reciveValueChange(v),i.default.createElement("tbody",{ref:"forceUpdate",className:"forceUpdate-setoutreturn"},i.default.createElement("tr",null,i.default.createElement("td",null,i.default.createElement(d.default,{params:{isMust:1==this.props.data.mandatory,title:this.props.data.elements.setoutdate.title}})),i.default.createElement("td",null,this.getDefaultValue()[this.props.data.elements.setoutdate.code]),i.default.createElement("td",null,i.default.createElement("div",{
ref:"setoutdatepicker",className:"input-group input-medium  input-group-sm ddDatePicker date date-picker  "},i.default.createElement("input",{ref:"setoutdate",readOnly:!0,defaultValue:h,type:"text",className:"form-control input-medium input readOnlyDatePicker",onPaste:this.handlerChange}),i.default.createElement("span",{className:"input-group-btn"},i.default.createElement("button",{className:"btn default",type:"button"},i.default.createElement("i",{className:"fa fa-calendar"})))),i.default.createElement("div",null,i.default.createElement("span",{className:this.state.setoutclassname},this.state.setouttips)))),i.default.createElement("tr",{className:p},i.default.createElement("td",null,i.default.createElement(d.default,{params:{isMust:1==this.props.data.mandatory,title:this.props.data.elements.returndate.title}})),i.default.createElement("td",null,this.getDefaultValue()[this.props.data.elements.returndate.code]),i.default.createElement("td",null,i.default.createElement("div",{ref:"returndatepicker",className:"input-group input-medium  input-group-sm ddDatePicker date date-picker  "},i.default.createElement("input",{ref:"returndate",readOnly:!0,defaultValue:f,type:"text",className:"form-control input-medium readOnlyDatePicker",onPaste:this.handlerChange}),i.default.createElement("span",{className:"input-group-btn"},i.default.createElement("button",{className:"btn default",type:"button"},i.default.createElement("i",{className:"fa fa-calendar"})))),i.default.createElement("div",null,i.default.createElement("span",{className:this.state.returnclassname},this.state.returntips)))))}}});t.default=m},function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(25),i=s(r),n=a(26),l=(s(n),a(28)),o=s(l),p=a(29),d=s(p),u=a(30),c=s(u),m=i.default.createClass({displayName:"Flight_takeofftime_arrivaltimeRow",prehandledata:function(e){if("emptyrow"==e){var t=this.props.data.elements,a=new Object;return a[t.takeofftime.code]="&-1&-1",a[t.arrivaltime.code]="&-1&-1",a}return e},prehandleupdatedata:function(e){return e},componentDidMount:function(e){function t(e){$(h.refs.arrivaldatepicker).datepicker({orientation:"top right",container:"#reactall",startDate:function(){if(f.props.isForCusClient){var e=parseInt(h.props.severTimeStamp),t=new Date(e);if(void 0!==e||null!==e){var a=new Date,s=a.valueOf();return Math.abs(e-s)>36e5?t:"+0d"}return"+0d"}return-(1/0)}(),beforeShowDay:function(t){var a=new Object;a.enabled=!0,a.classes="",a.tooltip="";for(var s in e){var r=e[s].StartTime.split("T")[0].split("-"),i=e[s].EndTime.split("T")[0].split("-"),n=new Date(r[0],r[1]-1,r[2],0,0,0).valueOf(),l=new Date(i[0],i[1]-1,i[2],0,0,0).valueOf(),o=t.valueOf(),p=0==e[s].RuleUseTypeValue;if(!(o>l||o<n))switch(e[s].SelectRuleType){case 0:var d=e[s].RangeStart.split("T")[0].split("-"),u=e[s].RangeEnd.split("T")[0].split("-"),c=new Date(d[0],d[1]-1,d[2],0,0,0).valueOf(),m=new Date(u[0],u[1]-1,u[2],0,0,0).valueOf(),h=!1;o<=m&&o>=c&&(h=!0);var f=p==h;f||(a.enabled=!1);break;case 1:var v=e[s].Week.split("|"),g=!1,b=t.getDay();for(var y in v)if(v[y]==b){g=!0;break}var f=p==g;f||(a.enabled=!1);break;case 2:p=p==e[s].IsDouble;var E=!1;t.getDate()%2==0&&(E=!0);var f=E==p;f||(a.enabled=!1);break;case 3:var V=e[s].UseDate.split("|"),N=t.getDate(),k=!1;for(var S in V)if(V[S]==N){k=!0;break}var f=p==k;f||(a.enabled=!1)}}return a.enabled||(a.classes="delete",a.tooltip=""),a}})}function a(){$(h.refs.arrivaldatepicker).datepicker({orientation:"top right",container:"#reactall",startDate:function(){return f.props.isForCusClient?"+0d":-(1/0)}()})}function s(){$(h.refs.takeoffdatepicker).datepicker({orientation:"top right",container:"#reactall"}).on("changeDate",function(e){var t=e.date?e.date.valueOf():"";if(""!=t)var a=new Date(t),s=a.getFullYear(),r=1==String(parseInt(a.getMonth())+1).length?"0"+String(parseInt(a.getMonth())+1):String(parseInt(a.getMonth())+1),t=1==String(parseInt(a.getDate())).length?"0"+String(parseInt(a.getDate())):String(parseInt(a.getDate())),i=s+"-"+r+"-"+t;else var i="";var n=h.refs.takeoffhour.value==-1?"-1":function(){return 1==String(h.refs.takeoffhour.value).length?"0"+h.refs.takeoffhour.value:h.refs.takeoffhour.value}(),l=h.refs.takeoffmin.value==-1?"-1":function(){return 1==String(h.refs.takeoffmin.value).length?"0"+h.refs.takeoffmin.value:h.refs.takeoffmin.value}(),o=i+"&"+n+"&"+l,p=$(h.refs.arrivaldate).val();if(p){var d=p.split("-"),a=new Date(parseInt(d[0]),parseInt(d[1]-1),parseInt(d[2]),0,0,0),s=a.getFullYear(),r=1==String(parseInt(a.getMonth())+1).length?"0"+String(parseInt(a.getMonth())+1):String(parseInt(a.getMonth())+1),t=1==String(parseInt(a.getDate())).length?"0"+String(parseInt(a.getDate())):String(parseInt(a.getDate()));p=s+"-"+r+"-"+t}else p="";var u=h.refs.arrivalhour.value==-1?"-1":function(){return 1==String(h.refs.arrivalhour.value).length?"0"+h.refs.arrivalhour.value:h.refs.arrivalhour.value}(),c=h.refs.arrivalmin.value==-1?"-1":function(){return 1==String(h.refs.arrivalmin.value).length?"0"+h.refs.arrivalmin.value:h.refs.arrivalmin.value}(),m=p+"&"+u+"&"+c,f={};if(f[h.props.data.elements.takeofftime.code]=o,f[h.props.data.elements.arrivaltime.code]=m,"reChange"==h.props.UIType){if("&-1&-1"==o){var v=h.prehandledata(h.props.beforeRechangeValue);f[h.props.data.elements.takeofftime.code]=v[h.props.data.elements.takeofftime.code]}if("&-1&-1"==m){var v=h.prehandledata(h.props.beforeRechangeValue);f[h.props.data.elements.arrivaltime.code]=v[h.props.data.elements.arrivaltime.code]}}var g=f[h.props.data.elements.takeofftime.code].split("&"),b=f[h.props.data.elements.arrivaltime.code].split("&");h.detectValueState(g[0],g[1],g[2],b[0],b[1],b[2]),h.setState({postValue:f},function(){h.upadteToForm(h.getdUpdateData());var e=h.state.postValue,t=e[h.props.data.elements.takeofftime.code].toString().split("&"),a=e[h.props.data.elements.arrivaltime.code].toString().split("&"),s=new Object;s[h.props.suborderid]=new Object,"&-1&-1"==e[h.props.data.elements.takeofftime.code]?s[h.props.suborderid][h.props.data.elements.takeofftime.code]="":s[h.props.suborderid][h.props.data.elements.takeofftime.code]=t[0]+" "+("-1"==t[1]?"":t[1])+":"+("-1"==t[2]?"":t[2]),"&-1&-1"==e[h.props.data.elements.arrivaltime.code]?s[h.props.suborderid][h.props.data.elements.arrivaltime.code]="":s[h.props.suborderid][h.props.data.elements.arrivaltime.code]=a[0]+" "+("-1"==a[1]?"":a[1])+":"+("-1"==a[2]?"":a[2]),h.props.reciveTempValue(s);var r={};r[h.props.data.elements.takeofftime.code]={title:h.props.data.elements.takeofftime.title,str:s[h.props.suborderid][h.props.data.elements.takeofftime.code]},r[h.props.data.elements.arrivaltime.code]={title:h.props.data.elements.arrivaltime.title,str:s[h.props.suborderid][h.props.data.elements.arrivaltime.code]},h.updateCopyObj(r)})}).on("hide",function(){$(h.refs.takeoffdatepicker).find("input").blur()}),$(h.refs.arrivaldatepicker).on("changeDate",function(e){var t=e.date?e.date.valueOf():"";if(""!=t)var a=new Date(t),s=a.getFullYear(),r=1==String(parseInt(a.getMonth())+1).length?"0"+String(parseInt(a.getMonth())+1):String(parseInt(a.getMonth())+1),t=1==String(parseInt(a.getDate())).length?"0"+String(parseInt(a.getDate())):String(parseInt(a.getDate())),i=s+"-"+r+"-"+t;else var i="";var n=h.refs.arrivalhour.value==-1?"-1":function(){return 1==String(h.refs.arrivalhour.value).length?"0"+h.refs.arrivalhour.value:h.refs.arrivalhour.value}(),l=h.refs.arrivalmin.value==-1?"-1":function(){return 1==String(h.refs.arrivalmin.value).length?"0"+h.refs.arrivalmin.value:h.refs.arrivalmin.value}(),o=i+"&"+n+"&"+l,p=$(h.refs.takeoffdate).val();if(p){var d=p.split("-"),a=new Date(parseInt(d[0]),parseInt(d[1]-1),parseInt(d[2]),0,0,0),s=a.getFullYear(),r=1==String(parseInt(a.getMonth())+1).length?"0"+String(parseInt(a.getMonth())+1):String(parseInt(a.getMonth())+1),t=1==String(parseInt(a.getDate())+1).length?"0"+String(parseInt(a.getDate())):String(parseInt(a.getDate()));p=s+"-"+r+"-"+t}else p="";var u=h.refs.takeoffhour.value==-1?"-1":function(){return 1==String(h.refs.takeoffhour.value).length?"0"+h.refs.takeoffhour.value:h.refs.takeoffhour.value}(),c=h.refs.takeoffmin.value==-1?"-1":function(){return 1==String(h.refs.takeoffmin.value).length?"0"+h.refs.takeoffmin.value:h.refs.takeoffmin.value}(),m=p+"&"+u+"&"+c,f={};if(f[h.props.data.elements.takeofftime.code]=m,f[h.props.data.elements.arrivaltime.code]=o,"reChange"==h.props.UIType){if("&-1&-1"==m){var v=h.prehandledata(h.props.beforeRechangeValue);f[h.props.data.elements.takeofftime.code]=v[h.props.data.elements.takeofftime.code]}if("&-1&-1"==o){var v=h.prehandledata(h.props.beforeRechangeValue);f[h.props.data.elements.arrivaltime.code]=v[h.props.data.elements.arrivaltime.code]}}var g=f[h.props.data.elements.takeofftime.code].split("&"),b=f[h.props.data.elements.arrivaltime.code].split("&");h.detectValueState(g[0],g[1],g[2],b[0],b[1],b[2]),h.setState({postValue:f},function(){h.upadteToForm(h.getdUpdateData());var e=h.state.postValue,t=e[h.props.data.elements.takeofftime.code].toString().split("&"),a=e[h.props.data.elements.arrivaltime.code].toString().split("&"),s=new Object;s[h.props.suborderid]=new Object,"&-1&-1"==e[h.props.data.elements.takeofftime.code]?s[h.props.suborderid][h.props.data.elements.takeofftime.code]="":s[h.props.suborderid][h.props.data.elements.takeofftime.code]=t[0]+" "+("-1"==t[1]?"":t[1])+":"+("-1"==t[2]?"":t[2]),"&-1&-1"==e[h.props.data.elements.arrivaltime.code]?s[h.props.suborderid][h.props.data.elements.arrivaltime.code]="":s[h.props.suborderid][h.props.data.elements.arrivaltime.code]=a[0]+" "+("-1"==a[1]?"":a[1])+":"+("-1"==a[2]?"":a[2]),h.props.reciveTempValue(s);var r={};r[h.props.data.elements.takeofftime.code]={title:h.props.data.elements.takeofftime.title,str:s[h.props.suborderid][h.props.data.elements.takeofftime.code]},r[h.props.data.elements.arrivaltime.code]={title:h.props.data.elements.arrivaltime.title,str:s[h.props.suborderid][h.props.data.elements.arrivaltime.code]},h.updateCopyObj(r);var i=new Object;i[h.props.data.elements.takeofftime.code]=t[0],i[h.props.data.elements.arrivaltime.code]=a[0];var n=h.props.data.elements,l=new Object;l[h.props.suborderid]=new Object;for(var o in n)for(var p in n[o].systemFieldMap)l[h.props.suborderid][n[o].systemFieldMap[p].postKey]=i[n[o].code];h.props.recieveSystemFields(l)})}).on("hide",function(){$(h.refs.arrivaldatepicker).find("input").blur()})}this.detectValueWhenMounted();var r=this.state.postValue,i=r[this.props.data.elements.takeofftime.code].toString().split("&"),n=r[this.props.data.elements.arrivaltime.code].toString().split("&"),l=new Object;l[this.props.suborderid]=new Object,"&-1&-1"==r[this.props.data.elements.takeofftime.code]?l[this.props.suborderid][this.props.data.elements.takeofftime.code]="":l[this.props.suborderid][this.props.data.elements.takeofftime.code]=i[0]+" "+("-1"==i[1]?"":i[1])+":"+("-1"==i[2]?"":i[2]),"&-1&-1"==r[this.props.data.elements.arrivaltime.code]?l[this.props.suborderid][this.props.data.elements.arrivaltime.code]="":l[this.props.suborderid][this.props.data.elements.arrivaltime.code]=n[0]+" "+("-1"==n[1]?"":n[1])+":"+("-1"==n[2]?"":n[2]),this.props.reciveTempValue(l);var o={};o[this.props.data.elements.takeofftime.code]={title:this.props.data.elements.takeofftime.title,str:l[this.props.suborderid][this.props.data.elements.takeofftime.code]},o[this.props.data.elements.arrivaltime.code]={title:this.props.data.elements.arrivaltime.title,str:l[this.props.suborderid][this.props.data.elements.arrivaltime.code]},this.updateCopyObj(o);var p=new Object;p[this.props.data.elements.takeofftime.code]=i[0],p[this.props.data.elements.arrivaltime.code]=n[0];var d=this.props.data.elements,u=new Object;u[this.props.suborderid]=new Object;for(var c in d)for(var m in d[c].systemFieldMap)u[this.props.suborderid][d[c].systemFieldMap[m].postKey]=p[d[c].code];this.props.recieveSystemFields(u);var h=this,f=this;this.props.limit===!1?a():$.ajax({url:"/ServiceRules/GetRulesByItemID/"+this.props.serviceItemID,type:"get",dataType:"json",success:function(e){t(e)}}),s()},mixins:[c.default],detectValueState:function(e,t,a,s,r,i){var n=1,l=1,o=1,p=1,d="",u="",c="",m="";if(e&&t!=-1&&a!=-1&&s&&r!=-1&&i!=-1){var h=e.split("-"),f=s.split("-"),v=new Date(parseInt(h[0]),parseInt(h[1]-1),parseInt(h[2]),t,a),g=new Date(parseInt(f[0]),parseInt(f[1]-1),parseInt(f[2]),r,i),b=v.valueOf(),y=g.valueOf();if(y<b){if(n=0,l=1,o=0,p=1,d="help-inline tips",u=this.props.data.elements.takeofftime.title+"不应该晚于"+this.props.data.elements.arrivaltime.title+"!",c="help-inline tips",m=this.props.data.elements.arrivaltime.title+"不应该早于"+this.props.data.elements.takeofftime.title+"!","reChange"==this.props.UIType){var E=this.prehandledata(this.props.beforeRechangeValue);e+"&"+t+"&"+a==E[this.props.data.elements.takeofftime.code]&&(d="help-inline",u=this.props.data.elements.takeofftime.tips),s+"&"+r+"&"+i==E[this.props.data.elements.arrivaltime.code]&&(c="help-inline",m=this.props.data.elements.arrivaltime.tips)}}else n=1,l=1,o=1,p=1,d="help-inline",u=this.props.data.elements.takeofftime.tips,c="help-inline",m=this.props.data.elements.arrivaltime.tips}else{if(e&&t!=-1&&a!=-1)d="help-inline",u=this.props.data.elements.takeofftime.tips,n=1,l=1;else{if(d="help-inline tips",u="请填写完整的"+this.props.data.elements.takeofftime.title,"reChange"==this.props.UIType){var E=this.prehandledata(this.props.beforeRechangeValue);e+" "+t+":"+a==E[this.props.data.elements.takeofftime.code]&&(d="help-inline",u=this.props.data.elements.takeofftime.tips)}n=0,l=0}if(s&&r!=-1&&i!=-1)c="help-inline",m=this.props.data.elements.arrivaltime.tips,o=1,p=1;else{if(c="help-inline tips",m="请填写完整的"+this.props.data.elements.arrivaltime.title,"reChange"==this.props.UIType){var E=this.prehandledata(this.props.beforeRechangeValue);s+" "+r+":"+i==E[this.props.data.elements.arrivaltime.code]&&(c="help-inline",m=this.props.data.elements.arrivaltime.tips)}o=0,p=0}}this.props.limit!==!1&&"2"!=this.props.data.mandatory||(d="help-inline",u=this.props.data.elements.takeofftime.tips,c="help-inline",m=this.props.data.elements.arrivaltime.tips),this.setState({takeoffclassname:d,takeofftips:u,arrivalclassname:c,arrivaltips:m});var V=new Object;V[this.props.suborderid]=new Object,V[this.props.suborderid][this.props.data.elements.takeofftime.code]=new Object,V[this.props.suborderid][this.props.data.elements.takeofftime.code].isValueUseAble=n,V[this.props.suborderid][this.props.data.elements.takeofftime.code].isValueNotEmpty=l,V[this.props.suborderid][this.props.data.elements.takeofftime.code].isValueMandatory=this.props.data.mandatory,V[this.props.suborderid][this.props.data.elements.arrivaltime.code]=new Object,V[this.props.suborderid][this.props.data.elements.arrivaltime.code].isValueUseAble=o,V[this.props.suborderid][this.props.data.elements.arrivaltime.code].isValueNotEmpty=p,V[this.props.suborderid][this.props.data.elements.arrivaltime.code].isValueMandatory=this.props.data.mandatory,this.props.reciveValueState(V)},detectValueWhenMounted:function(){if("emptyrow"==this.getDefaultValue()){this.setState({takeoffclassname:"help-inline",takeofftips:this.props.data.elements.takeofftime.tips,arrivalclassname:"help-inline",arrivaltips:this.props.data.elements.arrivaltime.tips});var e=new Object;e[this.props.suborderid]=new Object,e[this.props.suborderid][this.props.data.elements.takeofftime.code]=new Object,e[this.props.suborderid][this.props.data.elements.takeofftime.code].isValueUseAble=0,e[this.props.suborderid][this.props.data.elements.takeofftime.code].isValueNotEmpty=0,e[this.props.suborderid][this.props.data.elements.takeofftime.code].isValueMandatory=this.props.data.mandatory,e[this.props.suborderid][this.props.data.elements.arrivaltime.code]=new Object,e[this.props.suborderid][this.props.data.elements.arrivaltime.code].isValueUseAble=0,e[this.props.suborderid][this.props.data.elements.arrivaltime.code].isValueNotEmpty=0,e[this.props.suborderid][this.props.data.elements.arrivaltime.code].isValueMandatory=this.props.data.mandatory,this.props.reciveValueState(e)}else{var t=this.props.data.elements.takeofftime.code,a=this.props.data.elements.arrivaltime.code,s=this.state.postValue[t].toString().split("&"),r=s[0],i=s[1],n=s[2],l=this.state.postValue[a].toString().split("&"),o=l[0],p=l[1],d=l[2];this.detectValueState(r,i,n,o,p,d)}},hoursMap:function(e,t){for(var a=[],s=0;s<6;s++)a.push(s);for(var r=[],s=6;s<11;s++)r.push(s);for(var n=[],s=11;s<13;s++)n.push(s);for(var l=[],s=13;s<19;s++)l.push(s);for(var o=[],s=19;s<24;s++)o.push(s);return i.default.createElement("select",{ref:e,defaultValue:t,className:"form-control input-inline input100 input-sm",onChange:this.handlerChange},i.default.createElement("option",{value:-1},"选择"),a.map(function(e,t){return i.default.createElement("option",{key:e,value:e},"凌晨 ",e,"点")}),r.map(function(e,t){return i.default.createElement("option",{key:e,value:e},"上午 ",e,"点")}),n.map(function(e,t){return i.default.createElement("option",{key:e,value:e},"中午 ",e,"点")}),l.map(function(e,t){return i.default.createElement("option",{key:e,value:e},"下午 ",e,"点")}),o.map(function(e,t){return i.default.createElement("option",{key:e,value:e},"晚上 ",e,"点")}))},minutesMap:function(e,t){for(var a=[],s=0;s<60;s++)a.push(s);return i.default.createElement("select",{ref:e,name:"mins",defaultValue:t,className:"form-control input-inline input80 input-sm",onChange:this.handlerChange},i.default.createElement("option",{value:-1},"选择"),a.map(function(e,t){return i.default.createElement("option",{key:e,value:e},e,"分")}))},handlerChange:function(e){var t=this,a=$(t.refs.takeoffdate).val();if(a)var s=a.split("-"),r=new Date(parseInt(s[0]),parseInt(s[1]-1),parseInt(s[2]),0,0,0),i=r.getFullYear(),n=1==String(parseInt(r.getMonth())+1).length?"0"+String(parseInt(r.getMonth())+1):String(parseInt(r.getMonth())+1),l=1==String(parseInt(r.getDate())+1).length?"0"+String(parseInt(r.getDate())):String(parseInt(r.getDate())),a=i+"-"+n+"-"+l;else var a="";var o=t.refs.takeoffhour.value==-1?"-1":function(){return 1==String(t.refs.takeoffhour.value).length?"0"+t.refs.takeoffhour.value:t.refs.takeoffhour.value}(),p=t.refs.takeoffmin.value==-1?"-1":function(){return 1==String(t.refs.takeoffmin.value).length?"0"+t.refs.takeoffmin.value:t.refs.takeoffmin.value}(),d=a+"&"+o+"&"+p,u=$(t.refs.arrivaldate).val();if(u){var c=u.split("-"),m=new Date(parseInt(c[0]),parseInt(c[1]-1),parseInt(c[2]),0,0,0),i=m.getFullYear(),n=1==String(parseInt(m.getMonth())+1).length?"0"+String(parseInt(m.getMonth())+1):String(parseInt(m.getMonth())+1),l=1==String(parseInt(m.getDate())+1).length?"0"+String(parseInt(m.getDate())):String(parseInt(m.getDate()));u=i+"-"+n+"-"+l}else u="";var h=t.refs.arrivalhour.value==-1?"-1":function(){return 1==String(t.refs.arrivalhour.value).length?"0"+t.refs.arrivalhour.value:t.refs.arrivalhour.value}(),f=t.refs.arrivalmin.value==-1?"-1":function(){return 1==String(t.refs.arrivalmin.value).length?"0"+t.refs.arrivalmin.value:t.refs.arrivalmin.value}(),v=u+"&"+h+"&"+f,g={};if(g[this.props.data.elements.takeofftime.code]=d,g[this.props.data.elements.arrivaltime.code]=v,"reChange"==t.props.UIType){if("&-1&-1"==d){var b=this.prehandledata(this.props.beforeRechangeValue);g[this.props.data.elements.takeofftime.code]=b[this.props.data.elements.takeofftime.code]}if("&-1&-1"==v){var b=this.prehandledata(this.props.beforeRechangeValue);g[this.props.data.elements.arrivaltime.code]=b[this.props.data.elements.arrivaltime.code]}}var y=g[this.props.data.elements.takeofftime.code].split("&"),E=g[this.props.data.elements.arrivaltime.code].split("&");this.detectValueState(y[0],y[1],y[2],E[0],E[1],E[2]),this.setState({postValue:g},function(){this.upadteToForm(this.getdUpdateData());var e=t.state.postValue,a=e[t.props.data.elements.takeofftime.code].toString().split("&"),s=e[t.props.data.elements.arrivaltime.code].toString().split("&"),r=new Object;r[t.props.suborderid]=new Object,"&-1&-1"==e[t.props.data.elements.takeofftime.code]?r[t.props.suborderid][t.props.data.elements.takeofftime.code]="":r[t.props.suborderid][t.props.data.elements.takeofftime.code]=a[0]+" "+("-1"==a[1]?"":a[1])+":"+("-1"==a[2]?"":a[2]),"&-1&-1"==e[t.props.data.elements.arrivaltime.code]?r[t.props.suborderid][t.props.data.elements.arrivaltime.code]="":r[t.props.suborderid][t.props.data.elements.arrivaltime.code]=s[0]+" "+("-1"==s[1]?"":s[1])+":"+("-1"==s[2]?"":s[2]),t.props.reciveTempValue(r);var i={};i[t.props.data.elements.takeofftime.code]={title:t.props.data.elements.takeofftime.title,str:r[t.props.suborderid][t.props.data.elements.takeofftime.code]},i[t.props.data.elements.arrivaltime.code]={title:t.props.data.elements.arrivaltime.title,str:r[t.props.suborderid][t.props.data.elements.arrivaltime.code]},t.updateCopyObj(i)})},render:function(){var e=this.props.suborderid,t=this.props.componentid,a=this.props.data.elements.takeofftime.code,s=this.props.data.elements.arrivaltime.code;if("edit"==this.props.UIType){var r=this.state.postValue[a].toString().split("&"),n=r[0],l=parseInt(r[1]),p=parseInt(r[2]),u=this.state.postValue[s].toString().split("&"),c=u[0],m=parseInt(u[1]),h=parseInt(u[2]);return i.default.createElement("div",null,i.default.createElement("div",{className:"form-group","data-suborderid":e,"data-componentid":t,"data-segmentcode":this.props.data.elements.takeofftime.code},i.default.createElement(o.default,{params:{isMust:1==this.props.data.mandatory,title:this.props.data.elements.takeofftime.title}}),i.default.createElement("div",{className:"col-md-10"},i.default.createElement("div",{ref:"takeoffdatepicker",className:"input-group input-medium  input-group-sm ddDatePicker date date-picker  "},i.default.createElement("input",{readOnly:!0,defaultValue:n,ref:"takeoffdate",type:"text",className:"form-control input-sm readOnlyDatePicker ",placeholder:"",onChange:this.handlerChange}),i.default.createElement("span",{className:"input-group-btn"},i.default.createElement("button",{className:"btn default",type:"button"},i.default.createElement("i",{className:"fa fa-calendar"})))),i.default.createElement("div",{className:"verticalBottom",style:{display:"inline-block;height:30px;white-space:nowrap;width:195px;margin-top:5px;margin-right:5px"}},this.hoursMap("takeoffhour",l),this.minutesMap("takeoffmin",p)),i.default.createElement("span",{className:this.state.takeoffclassname},this.state.takeofftips))),i.default.createElement("div",{className:"form-group","data-suborderid":e,"data-componentid":t,"data-segmentcode":this.props.data.elements.arrivaltime.code},i.default.createElement(o.default,{params:{isMust:1==this.props.data.mandatory,title:this.props.data.elements.arrivaltime.title}}),i.default.createElement("div",{className:"col-md-10"},i.default.createElement("div",{ref:"arrivaldatepicker",className:"input-group input-medium  input-group-sm ddDatePicker date date-picker  "},i.default.createElement("input",{readOnly:!0,defaultValue:c,ref:"arrivaldate",type:"text",className:"form-control input-sm readOnlyDatePicker",placeholder:"",onChange:this.handlerChange}),i.default.createElement("span",{className:"input-group-btn"},i.default.createElement("button",{className:"btn default",type:"button"},i.default.createElement("i",{className:"fa fa-calendar"})))),i.default.createElement("div",{className:"verticalBottom",style:{display:"inline-block;height:30px;white-space:nowrap;width:195px;margin-top:5px;margin-right:5px"}},this.hoursMap("arrivalhour",m),this.minutesMap("arrivalmin",h)),i.default.createElement("span",{className:this.state.arrivalclassname},this.state.arrivaltips))))}if("reChange"==this.props.UIType){var f=this.prehandledata(this.props.beforeRechangeValue),v=0,g=0;if(f==this.state.postValue){var n="",l=-1,p=-1,c="",m=-1,h=-1;v=0,g=0}else{if(f[a]==this.state.postValue[a]||"&-1&-1"==this.state.postValue[a]){var n="",l=-1,p=-1;v=0}else{var r=this.state.postValue[a].toString().split("&"),n=r[0],l=parseInt(r[1]),p=parseInt(r[2]);v=1}if(f[s]==this.state.postValue[s]||"&-1&-1"==this.state.postValue[s]){var c="",m=-1,h=-1;g=0}else{var u=this.state.postValue[s].toString().split("&"),c=u[0],m=parseInt(u[1]),h=parseInt(u[2]);g=1}}var b=new Object;b[this.props.suborderid]=new Object,b[this.props.suborderid][this.props.data.elements.takeofftime.code]=new Object,b[this.props.suborderid][this.props.data.elements.takeofftime.code].isValueChange=v,b[this.props.suborderid][this.props.data.elements.arrivaltime.code]=new Object,b[this.props.suborderid][this.props.data.elements.arrivaltime.code].isValueChange=g,this.props.reciveValueChange(b);var y=this.getDefaultValue()[this.props.data.elements.takeofftime.code].split("&");y=y[0]+" "+y[1]+":"+y[2];var E=this.getDefaultValue()[this.props.data.elements.arrivaltime.code].split("&");return E=E[0]+" "+E[1]+":"+E[2],i.default.createElement("tbody",null,i.default.createElement("tr",null,i.default.createElement("td",null,i.default.createElement(d.default,{params:{isMust:1==this.props.data.mandatory,title:this.props.data.elements.takeofftime.title}})),i.default.createElement("td",null,y),i.default.createElement("td",null,i.default.createElement("div",{ref:"takeoffdatepicker",className:"input-group input-medium  input-group-sm ddDatePicker date date-picker  "},i.default.createElement("input",{readOnly:!0,defaultValue:n,ref:"takeoffdate",type:"text",className:"form-control input-sm readOnlyDatePicker ",placeholder:"",onChange:this.handlerChange}),i.default.createElement("span",{className:"input-group-btn"},i.default.createElement("button",{className:"btn default",type:"button"},i.default.createElement("i",{className:"fa fa-calendar"})))),i.default.createElement("div",{className:"verticalBottom",style:{display:"inline-block;height:30px;white-space:nowrap;width:195px;margin-top:5px"}},this.hoursMap("takeoffhour",l),this.minutesMap("takeoffmin",p)),i.default.createElement("div",null,i.default.createElement("span",{className:this.state.takeoffclassname},this.state.takeofftips)))),i.default.createElement("tr",null,i.default.createElement("td",null,i.default.createElement(d.default,{params:{isMust:1==this.props.data.mandatory,title:this.props.data.elements.arrivaltime.title}})),i.default.createElement("td",null,E),i.default.createElement("td",null,i.default.createElement("div",{ref:"arrivaldatepicker",className:"input-group input-medium  input-group-sm ddDatePicker date date-picker  "},i.default.createElement("input",{readOnly:!0,defaultValue:c,ref:"arrivaldate",type:"text",className:"form-control input-sm readOnlyDatePicker ",placeholder:"",onChange:this.handlerChange}),i.default.createElement("span",{className:"input-group-btn"},i.default.createElement("button",{className:"btn default",type:"button"},i.default.createElement("i",{className:"fa fa-calendar"})))),i.default.createElement("div",{style:{display:"inline-block;height:30px;white-space:nowrap;width:195px;margin-top:5px"}},this.hoursMap("arrivalhour",m),this.minutesMap("arrivalmin",h)),i.default.createElement("div",null," ",i.default.createElement("span",{className:this.state.arrivalclassname},this.state.arrivaltips)))))}}});t.default=m},function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(25),i=s(r),n=a(26),l=(s(n),a(28)),o=s(l),p=a(29),d=s(p),u=a(30),c=s(u),m=i.default.createClass({displayName:"Flight_takeofftime_pickuptimeRow",prehandledata:function(e){if("emptyrow"==e){var t=this.props.data.elements,a=new Object;return a[t.takeofftime.code]="&-1&-1",a[t.pickuptime.code]="&-1&-1",a}return e},prehandleupdatedata:function(e){return e},componentDidMount:function(e){function t(){$(h.refs.pickupdatepicker).datepicker({orientation:"top right",container:"#reactall",startDate:function(){if(f.props.isForCusClient){var e=parseInt(h.props.severTimeStamp),t=new Date(e);if(void 0!==e||null!==e){var a=new Date,s=a.valueOf();return Math.abs(e-s)>36e5?t:"+0d"}return"+0d"}return-(1/0)}()})}function a(e){$(h.refs.pickupdatepicker).datepicker({orientation:"top right",container:"#reactall",startDate:function(){return f.props.isForCusClient?"+0d":"1900-01-01"}(),beforeShowDay:function(t){var a=new Object;a.enabled=!0,a.classes="",a.tooltip="";for(var s in e){var r=e[s].StartTime.split("T")[0].split("-"),i=e[s].EndTime.split("T")[0].split("-"),n=new Date(r[0],r[1]-1,r[2],0,0,0).valueOf(),l=new Date(i[0],i[1]-1,i[2],0,0,0).valueOf(),o=t.valueOf(),p=0==e[s].RuleUseTypeValue;if(!(o>l||o<n))switch(e[s].SelectRuleType){case 0:var d=e[s].RangeStart.split("T")[0].split("-"),u=e[s].RangeEnd.split("T")[0].split("-"),c=new Date(d[0],d[1]-1,d[2],0,0,0).valueOf(),m=new Date(u[0],u[1]-1,u[2],0,0,0).valueOf(),h=!1;o<=m&&o>=c&&(h=!0);var f=p==h;f||(a.enabled=!1);break;case 1:var v=e[s].Week.split("|"),g=!1,b=t.getDay();for(var y in v)if(v[y]==b){g=!0;break}var f=p==g;f||(a.enabled=!1);break;case 2:p=p==e[s].IsDouble;var E=!1;t.getDate()%2==0&&(E=!0);var f=E==p;f||(a.enabled=!1);break;case 3:var V=e[s].UseDate.split("|"),N=t.getDate(),k=!1;for(var S in V)if(V[S]==N){k=!0;break}var f=p==k;f||(a.enabled=!1)}}return a.enabled||(a.classes="delete",a.tooltip=""),a}})}function s(){$(h.refs.takeoffdatepicker).datepicker({orientation:"top right",container:"#reactall"}).on("changeDate",function(e){var t=e.date?e.date.valueOf():"";if(""!=t)var a=new Date(t),s=a.getFullYear(),r=1==String(parseInt(a.getMonth())+1).length?"0"+String(parseInt(a.getMonth())+1):String(parseInt(a.getMonth())+1),t=1==String(parseInt(a.getDate())).length?"0"+String(parseInt(a.getDate())):String(parseInt(a.getDate())),i=s+"-"+r+"-"+t;else var i="";var n=h.refs.takeoffhour.value==-1?"-1":function(){return 1==String(h.refs.takeoffhour.value).length?"0"+h.refs.takeoffhour.value:h.refs.takeoffhour.value}(),l=h.refs.takeoffmin.value==-1?"-1":function(){return 1==String(h.refs.takeoffmin.value).length?"0"+h.refs.takeoffmin.value:h.refs.takeoffmin.value}(),o=i+"&"+n+"&"+l,p=$(h.refs.pickupdate).val();if(p){var d=p.split("-"),a=new Date(parseInt(d[0]),parseInt(d[1]-1),parseInt(d[2]),0,0,0),s=a.getFullYear(),r=1==String(parseInt(a.getMonth())+1).length?"0"+String(parseInt(a.getMonth())+1):String(parseInt(a.getMonth())+1),t=1==String(parseInt(a.getDate())+1).length?"0"+String(parseInt(a.getDate())):String(parseInt(a.getDate()));p=s+"-"+r+"-"+t}else p="";var u=h.refs.pickuphour.value==-1?"-1":function(){return 1==String(h.refs.pickuphour.value).length?"0"+h.refs.pickuphour.value:h.refs.pickuphour.value}(),c=h.refs.pickupmin.value==-1?"-1":function(){return 1==String(h.refs.pickupmin.value).length?"0"+h.refs.pickupmin.value:h.refs.pickupmin.value}(),m=p+"&"+u+"&"+c,f={};if(f[h.props.data.elements.takeofftime.code]=o,f[h.props.data.elements.pickuptime.code]=m,"reChange"==h.props.UIType){if("&-1&-1"==o){var v=h.prehandledata(h.props.beforeRechangeValue);f[h.props.data.elements.takeofftime.code]=v[h.props.data.elements.takeofftime.code]}if("&-1&-1"==m){var v=h.prehandledata(h.props.beforeRechangeValue);f[h.props.data.elements.pickuptime.code]=v[h.props.data.elements.pickuptime.code]}}var g=f[h.props.data.elements.takeofftime.code].split("&"),b=f[h.props.data.elements.pickuptime.code].split("&");h.detectValueState(g[0],g[1],g[2],b[0],b[1],b[2]),h.setState({postValue:f},function(){h.upadteToForm(h.getdUpdateData());var e=h.state.postValue,t=e[h.props.data.elements.takeofftime.code].toString().split("&"),a=e[h.props.data.elements.pickuptime.code].toString().split("&"),s=new Object;s[h.props.suborderid]=new Object,s[h.props.suborderid][h.props.data.elements.takeofftime.code]=t[0]+" "+t[1]+":"+t[2],s[h.props.suborderid][h.props.data.elements.pickuptime.code]=a[0]+" "+a[1]+":"+a[2],h.props.reciveTempValue(s);var r={};r[h.props.data.elements.takeofftime.code]={title:h.props.data.elements.takeofftime.title,str:s[h.props.suborderid][h.props.data.elements.takeofftime.code]},r[h.props.data.elements.pickuptime.code]={title:h.props.data.elements.pickuptime.title,str:s[h.props.suborderid][h.props.data.elements.pickuptime.code]},h.updateCopyObj(r)})}).on("hide",function(){$(h.refs.takeoffdatepicker).find("input").blur();
}),$(h.refs.pickupdatepicker).on("changeDate",function(e){var t=e.date?e.date.valueOf():"";if(""!=t)var a=new Date(t),s=a.getFullYear(),r=1==String(parseInt(a.getMonth())+1).length?"0"+String(parseInt(a.getMonth())+1):String(parseInt(a.getMonth())+1),t=1==String(parseInt(a.getDate())).length?"0"+String(parseInt(a.getDate())):String(parseInt(a.getDate())),i=s+"-"+r+"-"+t;else var i="";var n=h.refs.pickuphour.value==-1?"-1":function(){return 1==String(h.refs.pickuphour.value).length?"0"+h.refs.pickuphour.value:h.refs.pickuphour.value}(),l=h.refs.pickupmin.value==-1?"-1":function(){return 1==String(h.refs.pickupmin.value).length?"0"+h.refs.pickupmin.value:h.refs.pickupmin.value}(),o=i+"&"+n+"&"+l,p=$(h.refs.takeoffdate).val();if(p){var d=p.split("-"),a=new Date(parseInt(d[0]),parseInt(d[1]-1),parseInt(d[2]),0,0,0),s=a.getFullYear(),r=1==String(parseInt(a.getMonth())+1).length?"0"+String(parseInt(a.getMonth())+1):String(parseInt(a.getMonth())+1),t=1==String(parseInt(a.getDate())).length?"0"+String(parseInt(a.getDate())):String(parseInt(a.getDate()));p=s+"-"+r+"-"+t}else p="";var u=h.refs.takeoffhour.value==-1?"-1":function(){return 1==String(h.refs.takeoffhour.value).length?"0"+h.refs.takeoffhour.value:h.refs.takeoffhour.value}(),c=h.refs.takeoffmin.value==-1?"-1":function(){return 1==String(h.refs.takeoffmin.value).length?"0"+h.refs.takeoffmin.value:h.refs.takeoffmin.value}(),m=p+"&"+u+"&"+c,f={};if(f[h.props.data.elements.takeofftime.code]=m,f[h.props.data.elements.pickuptime.code]=o,"reChange"==h.props.UIType){if("&-1&-1"==m){var v=h.prehandledata(h.props.beforeRechangeValue);f[h.props.data.elements.takeofftime.code]=v[h.props.data.elements.takeofftime.code]}if("&-1&-1"==o){var v=h.prehandledata(h.props.beforeRechangeValue);f[h.props.data.elements.pickuptime.code]=v[h.props.data.elements.pickuptime.code]}}var g=f[h.props.data.elements.takeofftime.code].split("&"),b=f[h.props.data.elements.pickuptime.code].split("&");h.detectValueState(g[0],g[1],g[2],b[0],b[1],b[2]),h.setState({postValue:f},function(){h.upadteToForm(h.getdUpdateData());var e=h.state.postValue,t=e[h.props.data.elements.takeofftime.code].toString().split("&"),a=e[h.props.data.elements.pickuptime.code].toString().split("&"),s=new Object;s[h.props.suborderid]=new Object,s[h.props.suborderid][h.props.data.elements.takeofftime.code]=t[0]+" "+t[1]+":"+t[2],s[h.props.suborderid][h.props.data.elements.pickuptime.code]=a[0]+" "+a[1]+":"+a[2],h.props.reciveTempValue(s);var r={};r[h.props.data.elements.takeofftime.code]={title:h.props.data.elements.takeofftime.title,str:s[h.props.suborderid][h.props.data.elements.takeofftime.code]},r[h.props.data.elements.pickuptime.code]={title:h.props.data.elements.pickuptime.title,str:s[h.props.suborderid][h.props.data.elements.pickuptime.code]},h.updateCopyObj(r);var i=new Object;i[h.props.data.elements.takeofftime.code]=t[0],i[h.props.data.elements.pickuptime.code]=a[0];var n=h.props.data.elements,l=new Object;l[h.props.suborderid]=new Object;for(var o in n)for(var p in n[o].systemFieldMap)l[h.props.suborderid][n[o].systemFieldMap[p].postKey]=i[n[o].code];h.props.recieveSystemFields(l)})}).on("hide",function(){$(h.refs.pickupdatepicker).find("input").blur()})}this.detectValueWhenMounted();var r=this.state.postValue,i=r[this.props.data.elements.takeofftime.code].toString().split("&"),n=r[this.props.data.elements.pickuptime.code].toString().split("&"),l=new Object;l[this.props.suborderid]=new Object,l[this.props.suborderid][this.props.data.elements.takeofftime.code]=i[0]+" "+i[1]+":"+i[2],l[this.props.suborderid][this.props.data.elements.pickuptime.code]=n[0]+" "+n[1]+":"+n[2],this.props.reciveTempValue(l);var o={};o[this.props.data.elements.takeofftime.code]={title:this.props.data.elements.takeofftime.title,str:l[this.props.suborderid][this.props.data.elements.takeofftime.code]},o[this.props.data.elements.pickuptime.code]={title:this.props.data.elements.pickuptime.title,str:l[this.props.suborderid][this.props.data.elements.pickuptime.code]},this.updateCopyObj(o);var p=new Object;p[this.props.data.elements.takeofftime.code]=i[0],p[this.props.data.elements.pickuptime.code]=n[0];var d=this.props.data.elements,u=new Object;u[this.props.suborderid]=new Object;for(var c in d)for(var m in d[c].systemFieldMap)u[this.props.suborderid][d[c].systemFieldMap[m].postKey]=p[d[c].code];this.props.recieveSystemFields(u);var h=this,f=this;this.props.limit===!1?t():$.ajax({url:"/ServiceRules/GetRulesByItemID/"+this.props.serviceItemID,type:"get",dataType:"json",success:function(e){a(e)}}),s()},mixins:[c.default],detectValueState:function(e,t,a,s,r,i){console.log(e),console.log(t),console.log(a),console.log(s),console.log(r),console.log(i);var n=1,l=1,o=1,p=1,d="",u="",c="",m="";if(e&&t!=-1&&a!=-1&&s&&r!=-1&&i!=-1){var h=e.split("-"),f=s.split("-"),v=new Date(parseInt(h[0]),parseInt(h[1]-1),parseInt(h[2]),t,a),g=new Date(parseInt(f[0]),parseInt(f[1]-1),parseInt(f[2]),r,i),b=v.valueOf(),y=g.valueOf(),E=parseInt(this.props.data.timeAdvanced),V=10;if(y>b-60*E*60*1e3){if(takeoffstate=0,pickupstate=0,n=0,l=1,o=0,p=1,d="help-inline tips",u=this.props.data.elements.pickuptime.title+"起码提前"+this.props.data.elements.takeofftime.title+">="+E+"个小时！",c="help-inline tips",m=this.props.data.elements.pickuptime.title+"起码提前"+this.props.data.elements.takeofftime.title+">="+E+"个小时！","reChange"==this.props.UIType){var N=this.prehandledata(this.props.beforeRechangeValue);e+"&"+t+"&"+a==N[this.props.data.elements.takeofftime.code]&&(d="help-inline",u=this.props.data.elements.takeofftime.tips),s+"&"+r+"&"+i==N[this.props.data.elements.pickuptime.code]&&(c="help-inline",m=this.props.data.elements.pickuptime.tips)}}else n=1,l=1,o=1,p=1,d="help-inline",u=this.props.data.elements.takeofftime.tips,c="help-inline",m=this.props.data.elements.pickuptime.tips;if(y<=b-60*V*60*1e3&&(takeoffstate=0,pickupstate=0,n=0,l=1,o=0,p=1,d="help-inline tips",u=this.props.data.elements.pickuptime.title+"提前"+this.props.data.elements.takeofftime.title+"需要<"+V+"个小时！",c="help-inline tips",m=this.props.data.elements.pickuptime.title+"提前"+this.props.data.elements.takeofftime.title+"需要<"+V+"个小时！","reChange"==this.props.UIType)){var N=this.prehandledata(this.props.beforeRechangeValue);e+"&"+t+"&"+a==N[this.props.data.elements.takeofftime.code]&&(d="help-inline",u=this.props.data.elements.takeofftime.tips),s+"&"+r+"&"+i==N[this.props.data.elements.pickuptime.code]&&(c="help-inline",m=this.props.data.elements.pickuptime.tips)}}else{if(e&&t!=-1&&a!=-1)d="help-inline",u=this.props.data.elements.takeofftime.tips,n=1,l=1;else{if(d="help-inline tips",u="请填写完整的"+this.props.data.elements.takeofftime.title,"reChange"==this.props.UIType){var N=this.prehandledata(this.props.beforeRechangeValue);e+" "+t+":"+a==N[this.props.data.elements.takeofftime.code]&&(d="help-inline",u=this.props.data.elements.takeofftime.tips)}n=0,l=0}if(s&&r!=-1&&i!=-1)c="help-inline",m=this.props.data.elements.pickuptime.tips,o=1,p=1;else if(c="help-inline tips",m="请填写完整的"+this.props.data.elements.pickuptime.title,o=0,p=0,"reChange"==this.props.UIType){var N=this.prehandledata(this.props.beforeRechangeValue);s+" "+r+":"+i==N[this.props.data.elements.pickuptime.code]&&(c="help-inline",m=this.props.data.elements.pickuptime.tips)}}this.props.limit!==!1&&"2"!=this.props.data.mandatory||(d="help-inline",u=this.props.data.elements.takeofftime.tips,c="help-inline",m=this.props.data.elements.pickuptime.tips),this.setState({takeoffclassname:d,takeofftips:u,pickupclassname:c,pickuptips:m});var k=new Object;k[this.props.suborderid]=new Object,k[this.props.suborderid][this.props.data.elements.takeofftime.code]=new Object,k[this.props.suborderid][this.props.data.elements.takeofftime.code].isValueUseAble=n,k[this.props.suborderid][this.props.data.elements.takeofftime.code].isValueNotEmpty=l,k[this.props.suborderid][this.props.data.elements.takeofftime.code].isValueMandatory=this.props.data.mandatory,k[this.props.suborderid][this.props.data.elements.pickuptime.code]=new Object,k[this.props.suborderid][this.props.data.elements.pickuptime.code].isValueUseAble=o,k[this.props.suborderid][this.props.data.elements.pickuptime.code].isValueNotEmpty=p,k[this.props.suborderid][this.props.data.elements.pickuptime.code].isValueMandatory=this.props.data.mandatory,this.props.reciveValueState(k)},detectValueWhenMounted:function(){if("emptyrow"==this.getDefaultValue()){this.setState({takeoffclassname:"help-inline",takeofftips:this.props.data.elements.takeofftime.tips,pickupclassname:"help-inline",pickuptips:this.props.data.elements.pickuptime.tips});var e=new Object;e[this.props.suborderid]=new Object,e[this.props.suborderid][this.props.data.elements.takeofftime.code]=0,e[this.props.suborderid][this.props.data.elements.pickuptime.code]=0,this.props.reciveValueState(e)}else{var t=this.props.data.elements.takeofftime.code,a=this.props.data.elements.pickuptime.code,s=this.state.postValue[t].toString().split("&"),r=s[0],i=s[1],n=s[2],l=this.state.postValue[a].toString().split("&"),o=l[0],p=l[1],d=l[2];this.detectValueState(r,i,n,o,p,d)}},hoursMap:function(e,t){for(var a=[],s=0;s<6;s++)a.push(s);for(var r=[],s=6;s<11;s++)r.push(s);for(var n=[],s=11;s<13;s++)n.push(s);for(var l=[],s=13;s<19;s++)l.push(s);for(var o=[],s=19;s<24;s++)o.push(s);return i.default.createElement("select",{ref:e,defaultValue:t,className:"form-control input-inline input100 input-sm",onChange:this.handlerChange},i.default.createElement("option",{value:-1},"选择"),a.map(function(e,t){return i.default.createElement("option",{key:e,value:e},"凌晨 ",e,"点")}),r.map(function(e,t){return i.default.createElement("option",{key:e,value:e},"上午 ",e,"点")}),n.map(function(e,t){return i.default.createElement("option",{key:e,value:e},"中午 ",e,"点")}),l.map(function(e,t){return i.default.createElement("option",{key:e,value:e},"下午 ",e,"点")}),o.map(function(e,t){return i.default.createElement("option",{key:e,value:e},"晚上 ",e,"点")}))},minutesMap:function(e,t){for(var a=[],s=0;s<60;s++)a.push(s);return i.default.createElement("select",{ref:e,defaultValue:t,name:"mins",className:"form-control input-inline input80 input-sm",onChange:this.handlerChange},i.default.createElement("option",{value:-1},"选择"),a.map(function(e,t){return i.default.createElement("option",{key:e,value:e},e,"分")}))},handlerChange:function(e){var t=this,a=$(t.refs.takeoffdate).val();if(a)var s=a.split("-"),r=new Date(parseInt(s[0]),parseInt(s[1]-1),parseInt(s[2]),0,0,0),i=r.getFullYear(),n=1==String(parseInt(r.getMonth())+1).length?"0"+String(parseInt(r.getMonth())+1):String(parseInt(r.getMonth())+1),l=1==String(parseInt(r.getDate())+1).length?"0"+String(parseInt(r.getDate())):String(parseInt(r.getDate())),a=i+"-"+n+"-"+l;else var a="";var o=t.refs.takeoffhour.value==-1?"-1":function(){return 1==String(t.refs.takeoffhour.value).length?"0"+t.refs.takeoffhour.value:t.refs.takeoffhour.value}(),p=t.refs.takeoffmin.value==-1?"-1":function(){return 1==String(t.refs.takeoffmin.value).length?"0"+t.refs.takeoffmin.value:t.refs.takeoffmin.value}(),d=a+"&"+o+"&"+p,u=$(t.refs.pickupdate).val();if(u)var c=u.split("-"),r=new Date(parseInt(c[0]),parseInt(c[1]-1),parseInt(c[2]),0,0,0),i=r.getFullYear(),n=1==String(parseInt(r.getMonth())+1).length?"0"+String(parseInt(r.getMonth())+1):String(parseInt(r.getMonth())+1),l=1==String(parseInt(r.getDate())+1).length?"0"+String(parseInt(r.getDate())):String(parseInt(r.getDate())),u=i+"-"+n+"-"+l;else var u="";var m=t.refs.pickuphour.value==-1?"-1":function(){return 1==String(t.refs.pickuphour.value).length?"0"+t.refs.pickuphour.value:t.refs.pickuphour.value}(),h=t.refs.pickupmin.value==-1?"-1":function(){return 1==String(t.refs.pickupmin.value).length?"0"+t.refs.pickupmin.value:t.refs.pickupmin.value}(),f=u+"&"+m+"&"+h,v={};if(v[this.props.data.elements.takeofftime.code]=d,v[this.props.data.elements.pickuptime.code]=f,"reChange"==this.props.UIType){if("&-1&-1"==d){var g=this.prehandledata(this.props.beforeRechangeValue);v[this.props.data.elements.takeofftime.code]=g[this.props.data.elements.takeofftime.code]}if("&-1&-1"==f){var g=this.prehandledata(this.props.beforeRechangeValue);v[this.props.data.elements.pickuptime.code]=g[this.props.data.elements.pickuptime.code]}}var b=v[t.props.data.elements.takeofftime.code].split("&"),y=v[t.props.data.elements.pickuptime.code].split("&");t.detectValueState(b[0],b[1],b[2],y[0],y[1],y[2]),this.setState({postValue:v},function(){this.upadteToForm(this.getdUpdateData());var e=this.state.postValue,t=e[this.props.data.elements.takeofftime.code].toString().split("&"),a=e[this.props.data.elements.pickuptime.code].toString().split("&"),s=new Object;s[this.props.suborderid]=new Object,s[this.props.suborderid][this.props.data.elements.takeofftime.code]=t[0]+" "+t[1]+":"+t[2],s[this.props.suborderid][this.props.data.elements.pickuptime.code]=a[0]+" "+a[1]+":"+a[2],this.props.reciveTempValue(s);var r={};r[this.props.data.elements.takeofftime.code]={title:this.props.data.elements.takeofftime.title,str:s[this.props.suborderid][this.props.data.elements.takeofftime.code]},r[this.props.data.elements.pickuptime.code]={title:this.props.data.elements.pickuptime.title,str:s[this.props.suborderid][this.props.data.elements.pickuptime.code]},this.updateCopyObj(r)})},render:function(){var e=this.props.suborderid,t=this.props.componentid,a=this.props.data.elements.takeofftime.code,s=this.props.data.elements.pickuptime.code,r=this.state.postValue[a].toString().split("&"),n=r[0],l=parseInt(r[1]),p=parseInt(r[2]),u=this.state.postValue[s].toString().split("&"),c=u[0],m=parseInt(u[1]),h=parseInt(u[2]);if("edit"==this.props.UIType)return i.default.createElement("div",null,i.default.createElement("div",{className:"form-group","data-suborderid":e,"data-componentid":t,"data-segmentcode":this.props.data.elements.takeofftime.code},i.default.createElement(o.default,{params:{isMust:1==this.props.data.mandatory,title:this.props.data.elements.takeofftime.title}}),i.default.createElement("div",{className:"col-md-10"},i.default.createElement("div",{ref:"takeoffdatepicker",className:"input-group input-medium  input-group-sm ddDatePicker date date-picker  "},i.default.createElement("input",{readOnly:!0,defaultValue:n,ref:"takeoffdate",type:"text",className:"form-control input-sm readOnlyDatePicker",placeholder:"",onChange:this.handlerChange}),i.default.createElement("span",{className:"input-group-btn"},i.default.createElement("button",{className:"btn default",type:"button"},i.default.createElement("i",{className:"fa fa-calendar"})))),i.default.createElement("div",{className:"verticalBottom",style:{display:"inline-block;height:30px;white-space:nowrap;width:195px;margin-top:5px;margin-right:5px"}},this.hoursMap("takeoffhour",l),this.minutesMap("takeoffmin",p)),i.default.createElement("span",{className:this.state.takeoffclassname},this.state.takeofftips))),i.default.createElement("div",{className:"form-group","data-suborderid":e,"data-componentid":t,"data-segmentcode":this.props.data.elements.pickuptime.code},i.default.createElement(o.default,{params:{isMust:1==this.props.data.mandatory,title:this.props.data.elements.pickuptime.title}}),i.default.createElement("div",{className:"col-md-10"},i.default.createElement("div",{ref:"pickupdatepicker",className:"input-group input-medium  input-group-sm ddDatePicker date date-picker  "},i.default.createElement("input",{readOnly:!0,defaultValue:c,ref:"pickupdate",type:"text",className:"form-control input-sm readOnlyDatePicker ",placeholder:"",onChange:this.handlerChange}),i.default.createElement("span",{className:"input-group-btn"},i.default.createElement("button",{className:"btn default",type:"button"},i.default.createElement("i",{className:"fa fa-calendar"})))),i.default.createElement("div",{style:{display:"inline-block;height:30px;white-space:nowrap;width:195px;margin-top:5px;margin-right:5px"}},this.hoursMap("pickuphour",m),this.minutesMap("pickupmin",h)),i.default.createElement("span",{className:this.state.pickupclassname},this.state.pickuptips))));if("reChange"==this.props.UIType){var f=this.prehandledata(this.props.beforeRechangeValue),v=0,g=0;if(f==this.state.postValue){var n="",l=-1,p=-1,c="",m=-1,h=-1;v=0,g=0}else{if(f[a]==this.state.postValue[a]||"&-1&-1"==this.state.postValue[a]){var n="",l=-1,p=-1;v=0}else{var r=this.state.postValue[a].toString().split("&"),n=r[0],l=parseInt(r[1]),p=parseInt(r[2]);v=1}if(f[s]==this.state.postValue[s]||"&-1&-1"==this.state.postValue[s]){var c="",m=-1,h=-1;g=0}else{var u=this.state.postValue[s].toString().split("&"),c=u[0],m=parseInt(u[1]),h=parseInt(u[2]);g=1}var b=new Object;b[this.props.suborderid]=new Object,b[this.props.suborderid][this.props.data.elements.takeofftime.code]=new Object,b[this.props.suborderid][this.props.data.elements.takeofftime.code].isValueChange=v,b[this.props.suborderid][this.props.data.elements.pickuptime.code]=new Object,b[this.props.suborderid][this.props.data.elements.pickuptime.code].isValueChange=g,this.props.reciveValueChange(b)}var y=this.getDefaultValue()[this.props.data.elements.takeofftime.code].split("&");y=y[0]+" "+y[1]+":"+y[2];var E=this.getDefaultValue()[this.props.data.elements.pickuptime.code].split("&");return E=E[0]+" "+E[1]+":"+E[2],i.default.createElement("tbody",null,i.default.createElement("tr",null,i.default.createElement("td",null,i.default.createElement(d.default,{params:{isMust:1==this.props.data.mandatory,title:this.props.data.elements.takeofftime.title}})),i.default.createElement("td",null,y),i.default.createElement("td",null,i.default.createElement("div",{ref:"takeoffdatepicker",className:"input-group input-medium  input-group-sm ddDatePicker date date-picker  "},i.default.createElement("input",{readOnly:!0,defaultValue:n,ref:"takeoffdate",type:"text",className:"form-control input-sm readOnlyDatePicker",placeholder:"",onChange:this.handlerChange}),i.default.createElement("span",{className:"input-group-btn"},i.default.createElement("button",{className:"btn default",type:"button"},i.default.createElement("i",{className:"fa fa-calendar"})))),i.default.createElement("div",{className:"verticalBottom",style:{display:"inline-block;height:30px;white-space:nowrap;width:195px;margin-top:5px;"}},this.hoursMap("takeoffhour",l),this.minutesMap("takeoffmin",p)),i.default.createElement("div",null,i.default.createElement("span",{className:this.state.takeoffclassname},this.state.takeofftips)))),i.default.createElement("tr",null,i.default.createElement("td",null,i.default.createElement(d.default,{params:{isMust:1==this.props.data.mandatory,title:this.props.data.elements.pickuptime.title}})),i.default.createElement("td",null,E),i.default.createElement("td",null,i.default.createElement("div",{ref:"pickupdatepicker",className:"input-group input-medium  input-group-sm ddDatePicker date date-picker  "},i.default.createElement("input",{readOnly:!0,defaultValue:c,ref:"pickupdate",type:"text",className:"form-control input-sm readOnlyDatePicker",placeholder:"",onChange:this.handlerChange}),i.default.createElement("span",{className:"input-group-btn"},i.default.createElement("button",{className:"btn default",type:"button"},i.default.createElement("i",{className:"fa fa-calendar"})))),i.default.createElement("div",{style:{display:"inline-block;height:30px;white-space:nowrap;width:195px;margin-top:5px"}},this.hoursMap("pickuphour",m),this.minutesMap("pickupmin",h)),i.default.createElement("div",null,i.default.createElement("span",{className:this.state.pickupclassname},this.state.pickuptips)))))}}});t.default=m},function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(25),i=s(r),n=a(26),l=(s(n),a(28)),o=s(l),p=a(29),d=s(p),u=a(30),c=s(u),m=i.default.createClass({displayName:"BusRouteRow",prehandledata:function(e){if("emptyrow"==e){var t={};return t[this.props.data.elements.single.code]="",t}return e},prehandleupdatedata:function(e){return e},mixins:[c.default],detectValueState:function(e){var t=1,a=1,s="",r="";!e||this.isFullSpace(e)?(s="help-inline tips",r="请填写"+this.props.data.elements.single.title,t=0,a=0):(s="help-inline",r=this.props.data.elements.single.tips,t=1,a=1),this.props.limit!==!1&&"2"!=this.props.data.mandatory||(s="help-inline",r=this.props.data.elements.single.tips),this.setState({classname:s,tips:r});var i=new Object;i[this.props.suborderid]=new Object,i[this.props.suborderid][this.props.data.elements.single.code]=new Object,i[this.props.suborderid][this.props.data.elements.single.code].isValueUseAble=t,i[this.props.suborderid][this.props.data.elements.single.code].isValueNotEmpty=a,i[this.props.suborderid][this.props.data.elements.single.code].isValueMandatory=this.props.data.mandatory,this.props.reciveValueState(i)},detectValueWhenMounted:function(){if("emptyrow"==this.getDefaultValue()){this.setState({classname:"help-inline",tips:this.props.data.elements.single.tips});var e=new Object;e[this.props.suborderid]=new Object,e[this.props.suborderid][this.props.data.elements.single.code]=new Object,e[this.props.suborderid][this.props.data.elements.single.code].isValueUseAble=0,e[this.props.suborderid][this.props.data.elements.single.code].isValueNotEmpty=0,e[this.props.suborderid][this.props.data.elements.single.code].isValueMandatory=this.props.data.mandatory,this.props.reciveValueState(e)}else this.detectValueState(this.state.postValue[this.props.data.elements.single.code])},handlerChange:function(e){var t={};if(t[this.props.data.elements.single.code]=e.target.value,"reChange"==this.props.UIType&&!e.target.value.toString().trim()){var a=this.prehandledata(this.props.beforeRechangeValue);t[this.props.data.elements.single.code]=a[this.props.data.elements.single.code]}this.detectValueState(t[this.props.data.elements.single.code]),this.setState({postValue:t},function(){this.upadteToForm(this.getdUpdateData());var e={};e[this.props.suborderid]=new Object,e[this.props.suborderid][this.props.data.elements.single.code]=this.state.postValue[this.props.data.elements.single.code],this.props.reciveTempValue(e);var t={};t[this.props.data.elements.single.code]={title:this.props.data.elements.single.title,str:this.state.postValue[this.props.data.elements.single.code]},this.updateCopyObj(t)})},isFullSpace:function(e){var t="^[s]+$",a=new RegExp(t);return!!a.test(e)},getInitialState:function(){return{classname:"inline-help",tips:this.props.data.elements.single.tips}},componentDidMount:function(e){var t={};t[this.props.suborderid]=new Object,t[this.props.suborderid][this.props.data.elements.single.code]=this.state.postValue[this.props.data.elements.single.code],this.props.reciveTempValue(t),this.detectValueWhenMounted();var a={};a[this.props.data.elements.single.code]={title:this.props.data.elements.single.title,str:this.state.postValue[this.props.data.elements.single.code]},this.updateCopyObj(a)},render:function(){var e=this.props.suborderid,t=this.props.componentid,a=this.props.data.elements.single.code;if("edit"==this.props.UIType)return i.default.createElement("div",{className:"form-group","data-suborderid":e,"data-componentid":t,"data-segmentcode":a},i.default.createElement(o.default,{params:{isMust:1==this.props.data.mandatory,title:this.props.data.elements.single.title}}),i.default.createElement("div",{className:"col-md-10"},i.default.createElement("textarea",{type:"text",rows:5,className:"form-control input-inline input-medium  ",defaultValue:this.state.postValue[a],onPaste:this.handlerChange,onChange:this.handlerChange}),i.default.createElement("span",{className:this.state.classname},this.state.tips)));if("reChange"==this.props.UIType){var s=this.prehandledata(this.props.beforeRechangeValue),r=0;if(s[this.props.data.elements.single.code]==this.state.postValue[this.props.data.elements.single.code]||""==this.state.postValue[this.props.data.elements.single.code]){r=0;var n=""}else{r=1;var n=this.state.postValue[this.props.data.elements.single.code]}var l=new Object;return l[this.props.suborderid]=new Object,l[this.props.suborderid][this.props.data.elements.single.code]=new Object,l[this.props.suborderid][this.props.data.elements.single.code].isValueChange=r,this.props.reciveValueChange(l),i.default.createElement("tbody",null,i.default.createElement("tr",null,i.default.createElement("td",null,i.default.createElement(d.default,{params:{isMust:1==this.props.data.mandatory,title:this.props.data.elements.single.title}})),i.default.createElement("td",null,this.getDefaultValue()[this.props.data.elements.single.code]),i.default.createElement("td",null,i.default.createElement("textarea",{type:"text",rows:5,className:"form-control input-inline input-medium  ",defaultValue:n,onPaste:this.handlerChange,onChange:this.handlerChange}),i.default.createElement("div",null," ",i.default.createElement("span",{className:this.state.classname},this.state.tips)))))}}});t.default=m},function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(25),i=s(r),n=a(26),l=(s(n),a(28)),o=s(l),p=a(29),d=s(p),u=a(30),c=s(u),m=i.default.createClass({displayName:"HotelNameRow",prehandledata:function(e){if("emptyrow"==e){var t={};return t[this.props.data.elements.single.code]="",t}return e},prehandleupdatedata:function(e){return e},isPropertyHotelName:function(e){var t="^[^一-龥]+$",a=new RegExp(t);return!!a.test(e)},componentDidMount:function(e){this.detectValueWhenMounted();var t={};t[this.props.suborderid]=new Object,t[this.props.suborderid][this.props.data.elements.single.code]=this.state.postValue[this.props.data.elements.single.code],this.props.reciveTempValue(t);var a={};a[this.props.data.elements.single.code]={title:this.props.data.elements.single.title,str:this.state.postValue[this.props.data.elements.single.code]},this.updateCopyObj(a);var s=this,r=this.props.data.areaID,i=new Bloodhound({datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.HotalName)},queryTokenizer:Bloodhound.tokenizers.whitespace,limit:15,remote:{wildcard:"%QUERY",url:window.location.origin+"/Hotals/GetHotal?CityID="+r+"&Str=%QUERY",filter:function(e){var t=e.hotals.length;return $.map(e.hotals,function(e){return{name:e.HotalName,count:t}})}}});i.initialize(),$(this.refs.hotelName).typeahead({hint:!1,highlight:!0,minLength:1,classNames:{menu:function(){var e=$(document).width();return e<500?"tt-menu tt-menu-top":"tt-menu"}()}},{name:"xxx",displayKey:"name",limit:30,source:i,templates:{header:function(e){return['<div class="empty-message">',"共搜索到<strong>"+e.suggestions.length+"</strong>个酒店","</div>"].join("\n")}}}).bind("typeahead:select",function(e,t){var a={};if(a[s.props.data.elements.single.code]=t.name,"reChange"==s.props.UIType&&!a[s.props.data.elements.single.code].trim()){var r=s.prehandledata(s.props.beforeRechangeValue);a[s.props.data.elements.single.code]=r[s.props.data.elements.single.code]}s.detectValueState(a[s.props.data.elements.single.code]),s.setState({postValue:a},function(){s.upadteToForm(s.getdUpdateData());var e={};e[s.props.suborderid]=new Object,e[s.props.suborderid][s.props.data.elements.single.code]=s.state.postValue[s.props.data.elements.single.code],s.props.reciveTempValue(e);var t={};t[s.props.data.elements.single.code]={title:s.props.data.elements.single.title,str:s.state.postValue[s.props.data.elements.single.code]},s.updateCopyObj(t)})})},mixins:[c.default],detectValueState:function(e){var t=1,a=1,s="",r="";e&&this.isPropertyHotelName(e)?(s="help-inline",r=this.props.data.elements.single.tips,t=1,a=1):(s="help-inline tips",r="请填写英文全称，不要中文，不要地址",t=0,a=0),this.props.limit!==!1&&"2"!=this.props.data.mandatory||(s="help-inline",r=this.props.data.elements.single.tips),this.setState({classname:s,tips:r});var i=new Object;i[this.props.suborderid]=new Object,i[this.props.suborderid][this.props.data.elements.single.code]=new Object,i[this.props.suborderid][this.props.data.elements.single.code].isValueUseAble=t,i[this.props.suborderid][this.props.data.elements.single.code].isValueNotEmpty=a,i[this.props.suborderid][this.props.data.elements.single.code].isValueMandatory=this.props.data.mandatory,this.props.reciveValueState(i)},detectValueWhenMounted:function(){if("emptyrow"==this.getDefaultValue()){this.setState({classname:"help-inline",tips:this.props.data.elements.single.tips});var e=new Object;e[this.props.suborderid]=new Object,e[this.props.suborderid][this.props.data.elements.single.code]=new Object,e[this.props.suborderid][this.props.data.elements.single.code].isValueUseAble=0,e[this.props.suborderid][this.props.data.elements.single.code].isValueNotEmpty=0,e[this.props.suborderid][this.props.data.elements.single.code].isValueMandatory=this.props.data.mandatory,this.props.reciveValueState(e)}else this.detectValueState(this.state.postValue[this.props.data.elements.single.code])},handlerChange:function(e){var t={};if(t[this.props.data.elements.single.code]=e.target.value,"reChange"==this.props.UIType&&!e.target.value.toString().trim()){var a=this.prehandledata(this.props.beforeRechangeValue);t[this.props.data.elements.single.code]=a[this.props.data.elements.single.code]}this.detectValueState(t[this.props.data.elements.single.code]),this.setState({postValue:t},function(){this.upadteToForm(this.getdUpdateData());var e={};e[this.props.suborderid]=new Object,e[this.props.suborderid][this.props.data.elements.single.code]=this.state.postValue[this.props.data.elements.single.code],this.props.reciveTempValue(e);var t={};t[this.props.data.elements.single.code]={title:this.props.data.elements.single.title,str:this.state.postValue[this.props.data.elements.single.code]},this.updateCopyObj(t)})},render:function(){var e=this.props.suborderid,t=this.props.componentid,a=this.props.data.elements.single.code;if("edit"==this.props.UIType)return i.default.createElement("div",{className:"form-group","data-suborderid":e,"data-componentid":t,"data-segmentcode":a},i.default.createElement(o.default,{params:{isMust:1==this.props.data.mandatory,title:this.props.data.elements.single.title}}),i.default.createElement("div",{className:"col-md-10"},i.default.createElement("input",{ref:"hotelName",type:"text",style:{width:"240px",marginRight:"15px !important"},className:"form-control input-inline input-medium  input-sm",defaultValue:this.state.postValue[a],onPaste:this.handlerChange,onChange:this.handlerChange}),i.default.createElement("span",{className:this.state.classname},this.state.tips)));var s=this.prehandledata(this.props.beforeRechangeValue),r=0;if(s[this.props.data.elements.single.code]==this.state.postValue[this.props.data.elements.single.code]||""==this.state.postValue[this.props.data.elements.single.code]){r=0;var n=""}else{r=1;var n=this.state.postValue[this.props.data.elements.single.code]}var l=new Object;return l[this.props.suborderid]=new Object,l[this.props.suborderid][this.props.data.elements.single.code]=new Object,l[this.props.suborderid][this.props.data.elements.single.code].isValueChange=r,this.props.reciveValueChange(l),i.default.createElement("tbody",null,i.default.createElement("tr",null,i.default.createElement("td",null,i.default.createElement(d.default,{params:{isMust:1==this.props.data.mandatory,title:this.props.data.elements.single.title}})),i.default.createElement("td",null,this.getDefaultValue()[this.props.data.elements.single.code]),i.default.createElement("td",null,i.default.createElement("input",{ref:"hotelName",type:"text",style:{width:"240px",marginRight:"15px !important"},className:"form-control input-inline input-medium  input-sm",defaultValue:n,onPaste:this.handlerChange,onChange:this.handlerChange}),i.default.createElement("div",null,i.default.createElement("span",{className:this.state.classname},this.state.tips)))))}});t.default=m},function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(25),i=s(r),n=a(26),l=(s(n),a(28)),o=s(l),p=a(29),d=s(p),u=a(30),c=s(u),m=i.default.createClass({displayName:"TEXTinputRow",prehandledata:function(e){if("emptyrow"==e){var t={};return t[this.props.data.elements.single.code]="",
t}return e},prehandleupdatedata:function(e){return e},mixins:[c.default],detectValueState:function(e){var t=1,a=0,s="",r="";e?(s="help-inline",r=this.props.data.elements.single.tips,a=1,t=1):(s="help-inline tips",r="请填写"+this.props.data.elements.single.title,a=0,t=0),this.props.limit!==!1&&"2"!=this.props.data.mandatory||(s="help-inline",r=this.props.data.elements.single.tips),this.setState({classname:s,tips:r});var i=new Object;i[this.props.suborderid]=new Object,i[this.props.suborderid][this.props.data.elements.single.code]=new Object,i[this.props.suborderid][this.props.data.elements.single.code].isValueUseAble=a,i[this.props.suborderid][this.props.data.elements.single.code].isValueNotEmpty=t,i[this.props.suborderid][this.props.data.elements.single.code].isValueMandatory=this.props.data.mandatory,this.props.reciveValueState(i)},detectValueWhenMounted:function(){if("emptyrow"==this.getDefaultValue()){this.setState({classname:"help-inline",tips:this.props.data.elements.single.tips});var e=new Object;e[this.props.suborderid]=new Object,e[this.props.suborderid][this.props.data.elements.single.code]=new Object,e[this.props.suborderid][this.props.data.elements.single.code].isValueUseAble=0,e[this.props.suborderid][this.props.data.elements.single.code].isValueNotEmpty=0,e[this.props.suborderid][this.props.data.elements.single.code].isValueMandatory=this.props.data.mandatory,this.props.reciveValueState(e)}else this.detectValueState(this.state.postValue[this.props.data.elements.single.code])},handlerChange:function(e){var t={};if(t[this.props.data.elements.single.code]=e.target.value.toString().trim(),"reChange"==this.props.UIType&&!e.target.value.toString().trim()){var a=this.prehandledata(this.props.beforeRechangeValue);t[this.props.data.elements.single.code]=a[this.props.data.elements.single.code]}this.detectValueState(t[this.props.data.elements.single.code]),this.setState({postValue:t},function(){this.upadteToForm(this.getdUpdateData());var e={};e[this.props.suborderid]=new Object,e[this.props.suborderid][this.props.data.elements.single.code]=this.state.postValue[this.props.data.elements.single.code],this.props.reciveTempValue(e);var t={};t[this.props.data.elements.single.code]={title:this.props.data.elements.single.title,str:this.state.postValue[this.props.data.elements.single.code]},this.updateCopyObj(t)})},getInitialState:function(){return{classname:"inline-help",tips:this.props.data.elements.single.tips}},componentDidMount:function(e){var t={};t[this.props.suborderid]=new Object,t[this.props.suborderid][this.props.data.elements.single.code]=this.state.postValue[this.props.data.elements.single.code],this.props.reciveTempValue(t),this.detectValueWhenMounted();var a={};a[this.props.data.elements.single.code]={title:this.props.data.elements.single.title,str:this.state.postValue[this.props.data.elements.single.code]},this.updateCopyObj(a)},render:function(){var e=this.props.suborderid,t=this.props.componentid,a=this.props.data.elements.single.code;if("edit"==this.props.UIType)return i.default.createElement("div",{className:"form-group","data-suborderid":e,"data-componentid":t,"data-segmentcode":a},i.default.createElement(o.default,{params:{isMust:1==this.props.data.mandatory,title:this.props.data.elements.single.title}}),i.default.createElement("div",{className:"col-md-10"},i.default.createElement("input",{type:"text",className:"form-control input-inline input-medium  input-sm",defaultValue:this.state.postValue[a],onPaste:this.handlerChange,onChange:this.handlerChange}),i.default.createElement("span",{className:this.state.classname},this.state.tips)));if("reChange"==this.props.UIType){var s=this.prehandledata(this.props.beforeRechangeValue),r=0;if(s[this.props.data.elements.single.code]==this.state.postValue[this.props.data.elements.single.code]||""==this.state.postValue[this.props.data.elements.single.code]){r=0;var n=""}else{r=1;var n=this.state.postValue[this.props.data.elements.single.code]}var l=new Object;return l[this.props.suborderid]=new Object,l[this.props.suborderid][this.props.data.elements.single.code]=new Object,l[this.props.suborderid][this.props.data.elements.single.code].isValueChange=r,this.props.reciveValueChange(l),i.default.createElement("tbody",null,i.default.createElement("tr",null,i.default.createElement("td",null,i.default.createElement(d.default,{params:{isMust:1==this.props.data.mandatory,title:this.props.data.elements.single.title}})),i.default.createElement("td",null,this.getDefaultValue()[this.props.data.elements.single.code]),i.default.createElement("td",null,i.default.createElement("input",{type:"text",className:"form-control input-inline input-medium  input-sm",defaultValue:n,onPaste:this.handlerChange,onChange:this.handlerChange}),i.default.createElement("div",null," ",i.default.createElement("span",{className:this.state.classname},this.state.tips)))))}}});t.default=m},function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(25),i=s(r),n=a(26),l=(s(n),a(28)),o=s(l),p=a(29),d=s(p),u=a(30),c=s(u),m=i.default.createClass({displayName:"SelectMenuRow",prehandledata:function(e){if("emptyrow"==e){var t={};return t[this.props.data.elements.single.code]=new Object,t[this.props.data.elements.single.code].value=-1,t[this.props.data.elements.single.code].text="",t}var a=this.props.data.elements.single.code,s=parseInt(e[a].value),r=e[a].text;return s in this.props.data.list?this.props.data.list[s]!=r&&(e[this.props.data.elements.single.code].value=-1,e[this.props.data.elements.single.code].text=""):(e[this.props.data.elements.single.code].value=-1,e[this.props.data.elements.single.code].text=""),e},prehandleupdatedata:function(e){return e},detectValueState:function(e){var t=1,a=1,s="",r="";e==-1?(s="help-inline tips",r="请填写"+this.props.data.elements.single.title,t=0,a=0):(s="help-inline",r=this.props.data.elements.single.tips,t=1,a=1),this.props.limit!==!1&&"2"!=this.props.data.mandatory||(s="help-inline",r=this.props.data.elements.single.tips),this.setState({classname:s,tips:r});var i=new Object;i[this.props.suborderid]=new Object,i[this.props.suborderid][this.props.data.elements.single.code]=new Object,i[this.props.suborderid][this.props.data.elements.single.code].isValueUseAble=t,i[this.props.suborderid][this.props.data.elements.single.code].isValueNotEmpty=a,i[this.props.suborderid][this.props.data.elements.single.code].isValueMandatory=this.props.data.mandatory,this.props.reciveValueState(i)},detectValueWhenMounted:function(){if("emptyrow"==this.getDefaultValue()){this.setState({classname:"help-inline",tips:this.props.data.elements.single.tips});var e=new Object;e[this.props.suborderid]=new Object,e[this.props.suborderid][this.props.data.elements.single.code]=new Object,e[this.props.suborderid][this.props.data.elements.single.code].isValueUseAble=0,e[this.props.suborderid][this.props.data.elements.single.code].isValueNotEmpty=0,e[this.props.suborderid][this.props.data.elements.single.code].isValueMandatory=this.props.data.mandatory,this.props.reciveValueState(e)}else this.detectValueState(this.state.postValue[this.props.data.elements.single.code].value)},componentDidMount:function(e){var t={};t[this.props.suborderid]=new Object,t[this.props.suborderid][this.props.data.elements.single.code]=this.state.postValue[this.props.data.elements.single.code].text,this.props.reciveTempValue(t);var a={};a[this.props.data.elements.single.code]={title:this.props.data.elements.single.title,str:this.state.postValue[this.props.data.elements.single.code].text},this.updateCopyObj(a),this.detectValueWhenMounted()},mixins:[c.default],handlerChange:function(e){for(var t={},a=this.refs.menu.childNodes,s="",r=0;r<a.length;r++)a[r].selected===!0&&"-1"!=a[r].value&&(s=a[r].innerHTML);if(t[this.props.data.elements.single.code]={value:e.target.value,text:s},"reChange"==this.props.UIType&&t[this.props.data.elements.single.code].value==-1){var i=this.prehandledata(this.props.beforeRechangeValue);t[this.props.data.elements.single.code]=i[this.props.data.elements.single.code]}this.detectValueState(t[this.props.data.elements.single.code].value),this.setState({postValue:t},function(){this.upadteToForm(this.getdUpdateData());var e={};e[this.props.suborderid]=new Object,e[this.props.suborderid][this.props.data.elements.single.code]=this.state.postValue[this.props.data.elements.single.code].text,this.props.reciveTempValue(e);var t={};t[this.props.data.elements.single.code]={title:this.props.data.elements.single.title,str:this.state.postValue[this.props.data.elements.single.code].text},this.updateCopyObj(t)})},renderOptions:function(e){var t=new Array(i.default.createElement("option",{key:-1,value:"-1"},"请选择"));return t.concat(e.map(function(e,t){return i.default.createElement("option",{key:t,value:t},e)}))},render:function(){var e=this.props.suborderid,t=this.props.componentid,a=this.props.data.elements.single.code;if("edit"==this.props.UIType)return i.default.createElement("div",{className:"form-group","data-suborderid":e,"data-componentid":t,"data-segmentcode":a},i.default.createElement(o.default,{params:{isMust:1==this.props.data.mandatory,title:this.props.data.elements.single.title}}),i.default.createElement("div",{className:"col-md-10"},i.default.createElement("select",{type:"text",ref:"menu",className:"form-control input-inline input-medium  input-sm",defaultValue:this.state.postValue[a].value,onPaste:this.handlerChange,onChange:this.handlerChange},this.renderOptions(this.props.data.list)),i.default.createElement("span",{className:this.state.classname},this.state.tips)));if("reChange"==this.props.UIType){var s=this.prehandledata(this.props.beforeRechangeValue),r=-1;if(s[this.props.data.elements.single.code].value==this.state.postValue[this.props.data.elements.single.code].value||this.state.postValue[this.props.data.elements.single.code].value==-1){r=0;var n=-1}else{r=1;var n=this.state.postValue[this.props.data.elements.single.code].value}var l=new Object;return l[this.props.suborderid]=new Object,l[this.props.suborderid][this.props.data.elements.single.code]=new Object,l[this.props.suborderid][this.props.data.elements.single.code].isValueChange=r,this.props.reciveValueChange(l),i.default.createElement("tbody",null,i.default.createElement("tr",null,i.default.createElement("td",null," ",i.default.createElement(d.default,{params:{isMust:1==this.props.data.mandatory,title:this.props.data.elements.single.title}})),i.default.createElement("td",null,this.getDefaultValue()[this.props.data.elements.single.code].text),i.default.createElement("td",null,i.default.createElement("select",{type:"text",ref:"menu",className:"form-control input-inline input-medium  input-sm",defaultValue:n,onPaste:this.handlerChange,onChange:this.handlerChange},this.renderOptions(this.props.data.list)),i.default.createElement("div",null,i.default.createElement("span",{className:this.state.classname},this.state.tips)))))}}});t.default=m},function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(25),i=s(r),n=a(26),l=(s(n),a(28)),o=s(l),p=a(29),d=s(p),u=a(30),c=s(u),m=i.default.createClass({displayName:"TimePickerRow",prehandledata:function(e){if("emptyrow"==e){var t={};return t[this.props.data.elements.single.code]="-1:-1",t}return e},prehandleupdatedata:function(e){return e},hoursMap:function(e,t){for(var a=this,s=[],r=0;r<6;r++)s.push(r);for(var n=[],r=6;r<11;r++)n.push(r);for(var l=[],r=11;r<13;r++)l.push(r);for(var o=[],r=13;r<19;r++)o.push(r);for(var p=[],r=19;r<24;r++)p.push(r);return i.default.createElement("select",{ref:e,defaultValue:parseInt(t),className:"form-control input-inline input100 input-sm",onChange:a.handlerChange},i.default.createElement("option",{value:-1},"选择"),s.map(function(e,t){return i.default.createElement("option",{key:e,value:e},"凌晨 ",e,"点")}),n.map(function(e,t){return i.default.createElement("option",{key:e,value:e},"上午 ",e,"点")}),l.map(function(e,t){return i.default.createElement("option",{key:e,value:e},"中午 ",e,"点")}),o.map(function(e,t){return i.default.createElement("option",{key:e,value:e},"下午 ",e,"点")}),p.map(function(e,t){return i.default.createElement("option",{key:e,value:e},"晚上 ",e,"点")}))},minutesMap:function(e,t){for(var a=this,s=[],r=0;r<60;r++)s.push(r);return i.default.createElement("select",{ref:e,name:"mins",defaultValue:parseInt(t),className:"form-control input-inline input80 input-sm",onChange:a.handlerChange},i.default.createElement("option",{value:-1},"选择"),s.map(function(e,t){return i.default.createElement("option",{key:e,value:e},e,"分")}))},detectValueState:function(e,t){var a=this.props.data.timeSince&&this.props.data.timeSinceCheck?this.props.data.timeSince:"0:0",s=this.props.data.timeBefore&&this.props.data.timeBeforeCheck?this.props.data.timeBefore:"23:59",r=1,i=1,n="",l="";if(""==e||""==t)n="help-inline tips",l="请选择完整的"+this.props.data.elements.single.title,r=0,i=0;else{var o=parseInt(60*parseInt(e)+parseInt(t)),p=a.toString().split(":"),d=s.toString().split(":"),u=parseInt(60*parseInt(p[0])+parseInt(p[1])),c=parseInt(60*parseInt(d[0])+parseInt(d[1]));o<u||o>c?(n="help-inline tips",l="所选值在允许时间之外,合理"+this.props.data.elements.single.title+"范围：从 "+a+" 到 "+s,r=0,i=1):(n="help-inline",l=this.props.data.elements.single.tips,r=1,i=1),this.props.limit!==!1&&"2"!=this.props.data.mandatory||(n="help-inline",l=this.props.data.elements.single.tips)}this.setState({classname:n,tips:l});var m=new Object;m[this.props.suborderid]=new Object,m[this.props.suborderid][this.props.data.elements.single.code]=new Object,m[this.props.suborderid][this.props.data.elements.single.code].isValueUseAble=r,m[this.props.suborderid][this.props.data.elements.single.code].isValueNotEmpty=i,m[this.props.suborderid][this.props.data.elements.single.code].isValueMandatory=this.props.data.mandatory,this.props.reciveValueState(m)},detectValueWhenMounted:function(){if("emptyrow"==this.getDefaultValue()){this.setState({classname:"help-inline",tips:this.props.data.elements.single.tips});var e=new Object;e[this.props.suborderid]=new Object,e[this.props.suborderid][this.props.data.elements.single.code]=new Object,e[this.props.suborderid][this.props.data.elements.single.code].isValueUseAble=0,e[this.props.suborderid][this.props.data.elements.single.code].isValueNotEmpty=0,e[this.props.suborderid][this.props.data.elements.single.code].isValueMandatory=this.props.data.mandatory,this.props.reciveValueState(e)}else{var t=this.state.postValue[this.props.data.elements.single.code].toString().split(":");this.detectValueState(t[0],t[1])}},handlerChange:function(e){var t=this,a=this.refs.servicehour.value==-1?"":function(){return 1==String(t.refs.servicehour.value).length?"0"+t.refs.servicehour.value:t.refs.servicehour.value}(),s=this.refs.servicemin.value==-1?"":function(){return 1==String(t.refs.servicemin.value).length?"0"+t.refs.servicemin.value:t.refs.servicemin.value}(),r={};if(r[this.props.data.elements.single.code]=a+":"+s,"reChange"==this.props.UIType&&":"==r[this.props.data.elements.single.code]){var i=this.prehandledata(this.props.beforeRechangeValue);r[this.props.data.elements.single.code]=i[this.props.data.elements.single.code]}var n=r[this.props.data.elements.single.code].split(":");this.detectValueState(n[0],n[1]);var l={};l[this.props.data.elements.single.code]={title:this.props.data.elements.single.title,str:r[this.props.data.elements.single.code]},this.updateCopyObj(l),this.setState({postValue:r},function(){this.upadteToForm(this.getdUpdateData());var e={};e[this.props.suborderid]=new Object,e[this.props.suborderid][this.props.data.elements.single.code]=this.state.postValue[this.props.data.elements.single.code],this.props.reciveTempValue(e)})},mixins:[c.default],getInitialState:function(){return{classname:"inline-help",tips:this.props.data.elements.single.tips}},componentDidMount:function(e){var t={};t[this.props.suborderid]=new Object,t[this.props.suborderid][this.props.data.elements.single.code]=this.state.postValue[this.props.data.elements.single.code],this.props.reciveTempValue(t),this.detectValueWhenMounted();var a={};a[this.props.data.elements.single.code]={title:this.props.data.elements.single.title,str:"-1:-1"==this.state.postValue[this.props.data.elements.single.code]?"":this.state.postValue[this.props.data.elements.single.code]},this.updateCopyObj(a)},render:function(){var e=this.props.suborderid,t=this.props.componentid,a=this.props.data.elements.single.code,s=this.state.postValue[this.props.data.elements.single.code].toString().split(":");if("edit"==this.props.UIType)return i.default.createElement("div",{className:"form-group","data-suborderid":e,"data-componentid":t,"data-segmentcode":a},i.default.createElement(o.default,{params:{isMust:1==this.props.data.mandatory,title:this.props.data.elements.single.title}}),i.default.createElement("div",{className:"col-md-10"},this.hoursMap("servicehour",s[0]),this.minutesMap("servicemin",s[1]),i.default.createElement("span",{className:this.state.classname},this.state.tips)));if("reChange"==this.props.UIType){var s=this.prehandledata(this.props.beforeRechangeValue),r=0;if(s[this.props.data.elements.single.code]==this.state.postValue[this.props.data.elements.single.code]||"-1:-1"==this.state.postValue[this.props.data.elements.single.code]){r=0;var n=-1,l=-1}else{r=1;var p=this.state.postValue[this.props.data.elements.single.code].toString().split(":"),n=p[0],l=p[1]}var u=new Object;return u[this.props.suborderid]=new Object,u[this.props.suborderid][this.props.data.elements.single.code]=new Object,u[this.props.suborderid][this.props.data.elements.single.code].isValueChange=r,this.props.reciveValueChange(u),i.default.createElement("tbody",null,i.default.createElement("tr",null,i.default.createElement("td",null,i.default.createElement(d.default,{params:{isMust:1==this.props.data.mandatory,title:this.props.data.elements.single.title}})),i.default.createElement("td",null,this.getDefaultValue()[this.props.data.elements.single.code]),i.default.createElement("td",null,this.hoursMap("servicehour",n),this.minutesMap("servicemin",l),i.default.createElement("div",null," ",i.default.createElement("span",{className:this.state.classname},this.state.tips)))))}}});t.default=m},function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(25),i=s(r),n=a(26),l=(s(n),a(28)),o=s(l),p=a(29),d=s(p),u=a(30),c=s(u),m=i.default.createClass({displayName:"FlightNoRow",prehandledata:function(e){if("emptyrow"==e){var t={};return t[this.props.data.elements.single.code]="",t}return e},prehandleupdatedata:function(e){return e},mixins:[c.default],detectValueState:function(e){var t=1,a=1,s="",r="",i="";e?this.isFlightNO(e)?(s="help-inline",r="margin-left-10",i=this.props.data.elements.single.tips,t=1,a=1):(s="help-inline tips",r="hidden",i="航班号是字母和数字的组合(至少3位)",t=0,a=1):(s="help-inline tips",r="hidden",i="请填写"+this.props.data.elements.single.title,t=0,a=0),this.props.limit!==!1&&"2"!=this.props.data.mandatory||(s="help-inline",i=this.props.data.elements.single.tips),this.setState({classname:s,tips:i,searchClass:r});var n=new Object;n[this.props.suborderid]=new Object,n[this.props.suborderid][this.props.data.elements.single.code]=new Object,n[this.props.suborderid][this.props.data.elements.single.code].isValueUseAble=t,n[this.props.suborderid][this.props.data.elements.single.code].isValueNotEmpty=a,n[this.props.suborderid][this.props.data.elements.single.code].isValueMandatory=this.props.data.mandatory,this.props.reciveValueState(n)},isFlightNO:function(e){e=e.trim();var t=/^[a-zA-Z0-9]{3,}$/;return!!t.test(e)&&(!/^[a-zA-Z]{3,}$/.test(e)&&!/^[0-9]{3,}$/.test(e))},getFlightInfo:function(e){var t=this;$.ajax({url:"/Fliter/GetFliterInfo",method:"get",data:{FlightNo:e},dataType:"json",success:function(e){200===e.ErrorCode&&null!==e.FliterInfo&&(tips=e.FliterInfo.FilterDeparture+"-"+e.FliterInfo.FilterArrival,t.setState({tips:tips}))}})},blurHandler:function(e){var t;t=e.target.value,t&&this.flightNoHandler(t)},goSearch:function(e){var t,a,s=this,r="",i="",n=reactx.getALL().refs[s.props.suborderid].refs,l=0;for(var o in n){if(l>=this.props.allLength)break;if("Flight_takeofftime_pickuptime"===n[o].props.type||"Flight_takeofftime_arrivaltime"===n[o].props.type){var i=n[o].state.postValue[n[o].props.data.elements.takeofftime.code];if(t=i.split("&"),t.length>0){a=t[0].split("-");for(var p in a)r+=""+a[p]}break}l++}window.open("http://www.variflight.com/flight/fnum/"+s.state.postValue[s.props.data.elements.single.code]+".html?AE71649A58c77&fdate="+r,"_blank")},flightNoHandler:function(e){this.isFlightNO(e)&&this.getFlightInfo(e.trim())},detectValueWhenMounted:function(){if("emptyrow"==this.getDefaultValue()){this.setState({classname:"help-inline",tips:this.props.data.elements.single.tips,searchClass:"hidden"});var e=new Object;e[this.props.suborderid]=new Object,e[this.props.suborderid][this.props.data.elements.single.code]=new Object,e[this.props.suborderid][this.props.data.elements.single.code].isValueUseAble=0,e[this.props.suborderid][this.props.data.elements.single.code].isValueNotEmpty=0,e[this.props.suborderid][this.props.data.elements.single.code].isValueMandatory=this.props.data.mandatory,this.props.reciveValueState(e)}else this.detectValueState(this.state.postValue[this.props.data.elements.single.code])},handlerChange:function(e){var t={};if(t[this.props.data.elements.single.code]=e.target.value,"reChange"==this.props.UIType&&!e.target.value.toString().trim()){var a=this.prehandledata(this.props.beforeRechangeValue);t[this.props.data.elements.single.code]=a[this.props.data.elements.single.code]}this.detectValueState(t[this.props.data.elements.single.code]),this.setState({postValue:t},function(){this.upadteToForm(this.getdUpdateData());var e={};e[this.props.suborderid]=new Object,e[this.props.suborderid][this.props.data.elements.single.code]=this.state.postValue[this.props.data.elements.single.code],this.props.reciveTempValue(e);var t={};t[this.props.data.elements.single.code]={title:this.props.data.elements.single.title,str:this.state.postValue[this.props.data.elements.single.code]},this.updateCopyObj(t)})},componentDidMount:function(e){var t={};t[this.props.suborderid]=new Object,t[this.props.suborderid][this.props.data.elements.single.code]=this.state.postValue[this.props.data.elements.single.code],this.props.reciveTempValue(t),this.detectValueWhenMounted();var a={};a[this.props.data.elements.single.code]={title:this.props.data.elements.single.title,str:this.state.postValue[this.props.data.elements.single.code]},this.updateCopyObj(a);var s=this.state.postValue[this.props.data.elements.single.code];s&&this.flightNoHandler(s)},render:function(){var e=this.props.suborderid,t=this.props.componentid,a=this.props.data.elements.single.code,s=null;if(this.props.isForCusClient===!1&&(s=i.default.createElement("a",{className:this.state.searchClass,onClick:this.goSearch},"查询航班")),"edit"==this.props.UIType)return i.default.createElement("div",{className:"form-group","data-suborderid":e,"data-componentid":t,"data-segmentcode":a},i.default.createElement(o.default,{params:{isMust:1==this.props.data.mandatory,title:this.props.data.elements.single.title}}),i.default.createElement("div",{className:"col-md-10"},i.default.createElement("input",{type:"text",className:"form-control input-inline input-medium  input-sm",defaultValue:this.state.postValue[a],onBlur:this.blurHandler,onPaste:this.handlerChange,onChange:this.handlerChange}),i.default.createElement("span",{className:this.state.classname},this.state.tips,s)));if("reChange"==this.props.UIType){var r=this.prehandledata(this.props.beforeRechangeValue),n=0;if(r[this.props.data.elements.single.code]==this.state.postValue[this.props.data.elements.single.code]||""==this.state.postValue[this.props.data.elements.single.code]){n=0;var l=""}else{n=1;var l=this.state.postValue[this.props.data.elements.single.code]}var p=new Object;return p[this.props.suborderid]=new Object,p[this.props.suborderid][this.props.data.elements.single.code]=new Object,p[this.props.suborderid][this.props.data.elements.single.code].isValueChange=n,this.props.reciveValueChange(p),i.default.createElement("tbody",null,i.default.createElement("tr",null,i.default.createElement("td",null,i.default.createElement(d.default,{params:{isMust:1==this.props.data.mandatory,title:this.props.data.elements.single.title}})),i.default.createElement("td",null,this.getDefaultValue()[this.props.data.elements.single.code]),i.default.createElement("td",null,i.default.createElement("input",{type:"text",className:"form-control input-inline input-medium  input-sm",defaultValue:l,onPaste:this.handlerChange,onChange:this.handlerChange}),i.default.createElement("div",null,i.default.createElement("span",{className:this.state.classname},this.state.tips)))))}}});t.default=m},function(e,t,a){"use strict";var s=a(43),r=s.CopyToClipboard;e.exports=r},function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a={};for(var s in e)t.indexOf(s)>=0||Object.prototype.hasOwnProperty.call(e,s)&&(a[s]=e[s]);return a}Object.defineProperty(t,"__esModule",{value:!0}),t.CopyToClipboard=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},n=a(25),l=s(n),o=a(44),p=s(o);t.CopyToClipboard=l.default.createClass({displayName:"CopyToClipboard",propTypes:{text:l.default.PropTypes.string.isRequired,children:l.default.PropTypes.element.isRequired,onCopy:l.default.PropTypes.func,options:l.default.PropTypes.shape({debug:l.default.PropTypes.bool,message:l.default.PropTypes.string})},onClick:function(e){var t=this.props,a=t.text,s=t.onCopy,r=t.children,i=t.options,n=l.default.Children.only(r);(0,p.default)(a,i),s&&s(a),n&&n.props&&"function"==typeof n.props.onClick&&n.props.onClick(e)},render:function(){var e=this.props,t=(e.text,e.onCopy,e.options,e.children),a=r(e,["text","onCopy","options","children"]),s=l.default.Children.only(t);return l.default.cloneElement(s,i({},a,{onClick:this.onClick}))}})},function(e,t,a){"use strict";function s(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}function r(e,t){var a,r,l,o,p,d,u=!1;t||(t={}),a=t.debug||!1;try{l=i(),o=document.createRange(),p=document.getSelection(),d=document.createElement("span"),d.textContent=e,d.setAttribute("style",["all: unset","position: fixed","top: 0","clip: rect(0, 0, 0, 0)","white-space: pre","-webkit-user-select: text","-moz-user-select: text","-ms-user-select: text","user-select: text"].join(";")),document.body.appendChild(d),o.selectNode(d),p.addRange(o);var c=document.execCommand("copy");if(!c)throw new Error("copy command was unsuccessful");u=!0}catch(i){a&&console.error("unable to copy using execCommand: ",i),a&&console.warn("trying IE specific stuff");try{window.clipboardData.setData("text",e),u=!0}catch(i){a&&console.error("unable to copy using clipboardData: ",i),a&&console.error("falling back to prompt"),r=s("message"in t?t.message:n),window.prompt(r,e)}}finally{p&&("function"==typeof p.removeRange?p.removeRange(o):p.removeAllRanges()),d&&document.body.removeChild(d),l()}return u}var i=a(45),n="Copy to clipboard: #{key}, Enter";e.exports=r},function(e,t){"use strict";e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,a=[],s=0;s<e.rangeCount;s++)a.push(e.getRangeAt(s));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||a.forEach(function(t){e.addRange(t)}),t&&t.focus()}}},function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(25),i=s(r),n=a(26),l=(s(n),a(28)),o=(s(l),a(29)),p=(s(o),a(42)),d=s(p),u=a(30),c=(s(u),i.default.createClass({displayName:"Copy",getInitialState:function(){return{copyStr:"测试",fromWhich:""}},componentDidMount:function(e){var t=this;$(t.refs.globalCopyCatcher).bind("click",function(e,t,a){console.log("click")}),$(t.refs.globalCopyCatcher).bind("updateCopyboard",{p:t},function(e,a,s){e.data.p.setState({copyStr:a,fromWhich:s},function(){$(t.refs.globalCopyCatcher).click()})})},onCopy:function(e){console.log(e);var t=this.state.fromWhich;""!=t&&t.success("复制成功！")},render:function(e){return i.default.createElement(d.default,{ref:"CopyToClipboardWrapper",key:"CopyToClipboardWrapper",text:this.state.copyStr,onCopy:this.onCopy},i.default.createElement("button",{ref:"globalCopyCatcher",key:"globalCopyCatcher",id:"globalCopyCatcher",className:"hidden global btn button-default",role:"button"},"对单利器"))}}));t.default=c},function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var r=a(25),i=s(r),n=a(26),l=(s(n),a(28)),o=(s(l),a(29)),p=(s(o),a(42)),d=s(p),u=i.default.createClass({displayName:"BaseInfo",componentDidMount:function(){window.BaseInfoRef=this,this.props.buttons&&this.props.buttons.copyToClipboard===!0&&this.updateCopyStr(),this.detectValueState(this.state,this.state.eidtFlag)},toHalfWidth:function(e){for(var t="",a=0;a<e.length;a++)t+=12288!=e.charCodeAt(a)?e.charCodeAt(a)>65280&&e.charCodeAt(a)<65375?String.fromCharCode(e.charCodeAt(a)-65248):String.fromCharCode(e.charCodeAt(a)):String.fromCharCode(e.charCodeAt(a)-12256);return t},handleblur:function(e){var t=new Object,a=e.target.id;if("Wechat"!=a){var s=this.toHalfWidth(e.target.value.trim());t[e.target.id]=s}else{var s=e.target.value.trim();t[e.target.id]=s}"CustomerEnname"==a&&(t[e.target.id]=s.toUpperCase()),this.setState(t)},handlechange:function(e){var t=new Object,a=e.target.id;if("Wechat"!=a){var s=this.toHalfWidth(e.target.value.trim());t[e.target.id]=e.target.value.trim()}else{var s=e.target.value.trim();t[e.target.id]=e.target.value.trim()}"Wechat"==a?this.detectValueState({Wechat:s},!1):"BakTel"==a?this.detectValueState({BakTel:s},!1):"Tel"==a?this.detectValueState({Tel:s},!1):"Email"==a?this.detectValueState({Email:s},!1):"CustomerName"==a?this.detectValueState({CustomerName:s},!1):"CustomerEnname"==a&&this.detectValueState({CustomerEnname:s},!1),this.setState(t,function(){this.props.buttons&&this.props.buttons.copyToClipboard===!0&&this.updateCopyStr()})},isTel:function(e){return!!e},isChineseChar:function(e){var t=/^[\u4e00-\u9fa5 ]+$/;return!!t.test(e)},isEnglishChar:function(e){var t=/^[ａ-ｚＡ-ＺA-Z a-z]+$/;return!!t.test(e)},isEmail:function(e){var t=/^([a-zA-Z0-9_#*~$^`|;:"'\/?<>,&\\\(\)={}\[\]\%\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{1,10})+$/;return!!t.test(e)},getDefaultProps:function(){var e=new Object;return e.CustomerEnnameTip="请与护照上的姓名拼音保持一致",e.CustomerNameTip="",e.EmailTip="常用邮箱，用来接收确认单或预订信息变更通知",e.TelTip="如有变更请及时告知我们",e.BakTelTip="尽量填写国外当地号码，以便及时联系",e.WechatTip="不是昵称，在“微信-我”界面中，您头像的旁边可以找到",e.CustomerEnnameclassname="help-inline",e.CustomerNameclassname="help-inline",e.Emailclassname="help-inline",e.Telclassname="help-inline",e.BakTelclassname="help-inline",e.Wechatclassname="help-inline",e},getInitialState:function(){var e=new Object;return e.eidtFlag=!this.props.editFlag,e.tip=new Object,e.tip.CustomerEnnameTip=this.props.CustomerEnnameTip,e.tip.CustomerNameTip=this.props.CustomerNameTip,e.tip.EmailTip=this.props.EmailTip,e.tip.TelTip=this.props.TelTip,e.tip.BakTelTip=this.props.BakTelTip,e.tip.WechatTip=this.props.WechatTip,e.tipclassname=new Object,e.tipclassname.CustomerEnnameclassname=this.props.CustomerEnnameclassname,e.tipclassname.CustomerNameclassname=this.props.CustomerNameclassname,e.tipclassname.Emailclassname=this.props.Emailclassname,e.tipclassname.Telclassname=this.props.Telclassname,e.tipclassname.BakTelclassname=this.props.baseinfo.BakTelclassname,e.tipclassname.Wechatclassname=this.props.Wechatclassname,e.CustomerEnname=this.props.baseinfo.CustomerEnname?this.toHalfWidth(this.props.baseinfo.CustomerEnname.toString().trim()):"",
e.CustomerName=this.props.baseinfo.CustomerName?this.toHalfWidth(this.props.baseinfo.CustomerName.toString().trim()):"",e.Email=this.props.baseinfo.Email?this.toHalfWidth(this.props.baseinfo.Email.toString().trim()):"",e.Tel=this.props.baseinfo.Tel?this.toHalfWidth(this.props.baseinfo.Tel.toString().trim()):"",e.BakTel=this.props.baseinfo.BakTel?this.toHalfWidth(this.props.baseinfo.BakTel.toString().trim()):"",e.Wechat=this.props.baseinfo.Wechat?this.props.baseinfo.Wechat.toString().trim():"",e.valueState=new Object,e.copyStr="what the hell",e},detectValueState:function(e,t){var a=new Object;a=$.extend(!0,{},this.state.valueState);var s=this.state.tip,r=this.state.tipclassname;for(var i in e)"tip"!=i&&"tipclassname"!=i&&"eidtFlag"!=i&&("Wechat"==i?(e[i]?(a[i]={isValueMandatory:1,isValueNotEmpty:1,isValueUseAble:1},s[i+"Tip"]=this.props[i+"Tip"],r[i+"classname"]=this.props[i+"classname"]):(s[i+"Tip"]="请填写微信号！",r[i+"classname"]="help-inline tips",a[i]={isValueMandatory:1,isValueNotEmpty:0,isValueUseAble:0}),1==t&&(s[i+"Tip"]=this.props[i+"Tip"],r[i+"classname"]=this.props[i+"classname"])):"BakTel"==i?(e[i]?(a[i]={isValueMandatory:0,isValueNotEmpty:1,isValueUseAble:1},s[i+"Tip"]=this.props[i+"Tip"],r[i+"classname"]=this.props[i+"classname"]):(a[i]={isValueMandatory:0,isValueNotEmpty:1,isValueUseAble:1},s[i+"Tip"]=this.props[i+"Tip"],r[i+"classname"]="help-inline "),1==t&&(s[i+"Tip"]=this.props[i+"Tip"],r[i+"classname"]=this.props[i+"classname"])):"Tel"==i?(e[i]?this.isTel(e[i])?(a[i]={isValueMandatory:1,isValueNotEmpty:1,isValueUseAble:1},s[i+"Tip"]=this.props[i+"Tip"],r[i+"classname"]=this.props[i+"classname"]):(a[i]={isValueMandatory:1,isValueNotEmpty:1,isValueUseAble:0},s[i+"Tip"]="请检查联系电话",r[i+"classname"]="help-inline tips"):(a[i]={isValueMandatory:1,isValueNotEmpty:0,isValueUseAble:0},s[i+"Tip"]="请填写联系电话",r[i+"classname"]="help-inline tips"),1==t&&(s[i+"Tip"]=this.props[i+"Tip"],r[i+"classname"]=this.props[i+"classname"])):"Email"==i?(e[i]?this.isEmail(e[i])?(a[i]={isValueMandatory:1,isValueNotEmpty:1,isValueUseAble:1},s[i+"Tip"]=this.props[i+"Tip"],r[i+"classname"]=this.props[i+"classname"]):(s[i+"Tip"]="请填写正确的邮箱地址！",r[i+"classname"]="help-inline tips",a[i]={isValueMandatory:1,isValueNotEmpty:1,isValueUseAble:0}):(a[i]={isValueMandatory:1,isValueNotEmpty:0,isValueUseAble:0},s[i+"Tip"]="请填写正确的邮箱地址！",r[i+"classname"]="help-inline tips"),1==t&&(s[i+"Tip"]=this.props[i+"Tip"],r[i+"classname"]=this.props[i+"classname"])):"CustomerName"==i?(e[i]?this.isChineseChar(e[i])?(a[i]={isValueMandatory:1,isValueNotEmpty:1,isValueUseAble:1},s[i+"Tip"]=this.props[i+"Tip"],r[i+"classname"]=this.props[i+"classname"]):(a[i]={isValueMandatory:1,isValueNotEmpty:1,isValueUseAble:0},s[i+"Tip"]="请检查姓名（中文）",r[i+"classname"]="help-inline tips"):(a[i]={isValueMandatory:1,isValueNotEmpty:0,isValueUseAble:0},s[i+"Tip"]="请填写正确的姓名（中文）",r[i+"classname"]="help-inline tips"),1==t&&(s[i+"Tip"]=this.props[i+"Tip"],r[i+"classname"]=this.props[i+"classname"])):"CustomerEnname"==i&&(e[i]?this.isEnglishChar(e[i])?(a[i]={isValueMandatory:1,isValueNotEmpty:1,isValueUseAble:1},s[i+"Tip"]=this.props[i+"Tip"],r[i+"classname"]=this.props[i+"classname"]):(a[i]={isValueMandatory:1,isValueNotEmpty:1,isValueUseAble:0},s[i+"Tip"]="请检查姓名（拼音）",r[i+"classname"]="help-inline tips"):(a[i]={isValueMandatory:1,isValueNotEmpty:0,isValueUseAble:0},s[i+"Tip"]="请填写正确的姓名（拼音）",r[i+"classname"]="help-inline tips"),1==t&&(s[i+"Tip"]=this.props[i+"Tip"],r[i+"classname"]=this.props[i+"classname"])));this.setState({valueState:a,tip:s,tipclassname:r},function(){})},onCopy:function(){$(this.refs.copyUserInfoToClipboard).success("复制成功！")},renderButtons:function(){return this.props.buttons&&this.props.buttons.copyToClipboard===!0?i.default.createElement("div",{className:"panel-heading"},i.default.createElement("span",{className:"help-inline",style:{float:"right"}},i.default.createElement(d.default,{key:"CopyToClipboardWrapper",text:this.state.copyStr,onCopy:this.onCopy},i.default.createElement("a",{ref:"copyUserInfoToClipboard",key:"copyUserInfoToClipboard",id:"copyUserInfoToClipboard",className:"btn btn-sm btn-default button70",role:"button"},"复制")))):null},renderQRCode:function(){return this.props.imageUrl&&""!==this.props.imageUrl?i.default.createElement("div",{className:"text-center"},i.default.createElement("div",{className:"flex"},i.default.createElement("img",{src:this.props.imageUrl,alt:"等待二维码"}),i.default.createElement("div",{className:"text"},"微信扫码关注，绑定帐号后"),i.default.createElement("div",{className:"text"},"随时跟踪订单，查看确认单"))):null},updateCopyStr:function(){var e="",t=this.state;e+="淘宝ID："+this.props.code+"\n",e+="中文姓名："+t.CustomerName+"\n",e+="姓名拼音："+t.CustomerEnname+"\n",e+="联系电话："+t.Tel+"\n",e+="备用联系电话："+t.BakTel+"\n",e+="Email地址："+t.Email+"\n",e+="微-信："+t.Wechat+"\n",this.setState({copyStr:e})},render:function(){var e=this.state,t=this.props.code;return i.default.createElement("div",{className:"panel panel-default",style:{position:"relative"}},this.renderButtons(),this.renderQRCode(),i.default.createElement("div",{id:"baseinfo",className:"panel-body form "},i.default.createElement("div",{id:"customerid",style:{display:"none"}},this.props.baseinfo.CustomerID),i.default.createElement("div",{id:"orderid",style:{display:"none"}},this.props.baseinfo.OrderID),i.default.createElement("form",{className:"form-horizontal",role:"form"},i.default.createElement("div",{className:"form-body"},i.default.createElement("div",{className:"form-group"},i.default.createElement("label",{className:"col-md-2 control-label"},"淘宝ID："),i.default.createElement("span",{id:"CustomerTBCode",className:"help-inline",style:{marginLeft:"5px"}},t)),i.default.createElement("div",{className:"form-group"},i.default.createElement("label",{className:"col-md-2 control-label"},i.default.createElement("span",{className:"redspark"},"*"),"中文姓名："),i.default.createElement("div",{className:"col-md-10"},i.default.createElement("input",{onBlur:this.handleblur,onChange:this.handlechange,ref:"CustomerName",id:"CustomerName",type:"text",className:"form-control input-inline input-sm input200",value:e.CustomerName,placeholder:"张三"}),i.default.createElement("span",{className:e.tipclassname.CustomerNameclassname},e.tip.CustomerNameTip," "))),i.default.createElement("div",{className:"form-group"},i.default.createElement("label",{className:"col-md-2 control-label"},i.default.createElement("span",{className:"redspark"},"*"),"姓名拼音："),i.default.createElement("div",{className:"col-md-10"},i.default.createElement("input",{onBlur:this.handleblur,onChange:this.handlechange,ref:"CustomerEnname",id:"CustomerEnname",type:"text",className:"form-control input-inline input-sm input200",value:e.CustomerEnname,placeholder:"ZHANGSAN"}),i.default.createElement("span",{className:e.tipclassname.CustomerEnnameclassname},e.tip.CustomerEnnameTip," "))),i.default.createElement("div",{className:"form-group"},i.default.createElement("label",{className:"col-md-2 control-label"},i.default.createElement("span",{className:"redspark"},"*"),"联系电话："),i.default.createElement("div",{className:"col-md-10"},i.default.createElement("input",{onBlur:this.handleblur,onChange:this.handlechange,ref:"Tel",id:"Tel",type:"text",className:"form-control input-inline input-sm input200",value:e.Tel,placeholder:"务必填写国外能接通电话"}),i.default.createElement("span",{className:e.tipclassname.Telclassname},e.tip.TelTip," "))),i.default.createElement("div",{className:"form-group"},i.default.createElement("label",{className:"col-md-2 control-label"},"备用联系电话："),i.default.createElement("div",{className:"col-md-10"},i.default.createElement("input",{onBlur:this.handleblur,onChange:this.handlechange,ref:"BakTel",id:"BakTel",type:"text",className:"form-control input-inline input-sm input200",value:e.BakTel,placeholder:""}),i.default.createElement("span",{className:e.tipclassname.BakTelclassname},e.tip.BakTelTip," "))),i.default.createElement("div",{className:"form-group"},i.default.createElement("label",{className:"col-md-2 control-label"},i.default.createElement("span",{className:"redspark"},"*")," Email地址："),i.default.createElement("div",{className:"col-md-10"},i.default.createElement("input",{onBlur:this.handleblur,onChange:this.handlechange,ref:"Email",id:"Email",type:"text",className:"form-control input-inline input-sm input200",value:e.Email,placeholder:""}),i.default.createElement("span",{className:e.tipclassname.Emailclassname},e.tip.EmailTip," "))),i.default.createElement("div",{className:"form-group"},i.default.createElement("label",{className:"col-md-2 control-label"},i.default.createElement("span",{className:"redspark"},"*")," 微信号："),i.default.createElement("div",{className:"col-md-10"},i.default.createElement("input",{onBlur:this.handleblur,onChange:this.handlechange,ref:"Wechat",id:"Wechat",type:"text",className:"form-control input-inline input-sm input200",value:e.Wechat,placeholder:""}),i.default.createElement("span",{className:e.tipclassname.Wechatclassname},e.tip.WechatTip," ")))))))}});e.exports=u}]);